{"ast":null,"code":"/** @license\r\n *\r\n * SoundManager 2: JavaScript Sound for the Web\r\n * ----------------------------------------------\r\n * http://schillmania.com/projects/soundmanager2/\r\n *\r\n * Copyright (c) 2007, Scott Schiller. All rights reserved.\r\n * Code provided under the BSD License:\r\n * http://schillmania.com/projects/soundmanager2/license.txt\r\n *\r\n * V2.97a.20170601\r\n */\n(function SM2(window, _undefined) {\n  'use strict';\n\n  if (!window || !window.document) {\n    throw new Error('SoundManager requires a browser with window and document objects.');\n  }\n\n  var soundManager = null;\n\n  function SoundManager(smURL, smID) {\n    this.setupOptions = {\n      url: smURL || null,\n      flashVersion: 8,\n      debugMode: true,\n      debugFlash: false,\n      useConsole: true,\n      consoleOnly: true,\n      waitForWindowLoad: false,\n      bgColor: '#ffffff',\n      useHighPerformance: false,\n      flashPollingInterval: null,\n      html5PollingInterval: null,\n      flashLoadTimeout: 1000,\n      wmode: null,\n      allowScriptAccess: 'always',\n      useFlashBlock: false,\n      useHTML5Audio: true,\n      forceUseGlobalHTML5Audio: false,\n      ignoreMobileRestrictions: false,\n      html5Test: /^(probably|maybe)$/i,\n      preferFlash: false,\n      noSWFCache: false,\n      idPrefix: 'sound'\n    };\n    this.defaultOptions = {\n      autoLoad: false,\n      autoPlay: false,\n      from: null,\n      loops: 1,\n      onid3: null,\n      onerror: null,\n      onload: null,\n      whileloading: null,\n      onplay: null,\n      onpause: null,\n      onresume: null,\n      whileplaying: null,\n      onposition: null,\n      onstop: null,\n      onfinish: null,\n      multiShot: true,\n      multiShotEvents: false,\n      position: null,\n      pan: 0,\n      playbackRate: 1,\n      stream: true,\n      to: null,\n      type: null,\n      usePolicyFile: false,\n      volume: 100\n    };\n    this.flash9Options = {\n      onfailure: null,\n      isMovieStar: null,\n      usePeakData: false,\n      useWaveformData: false,\n      useEQData: false,\n      onbufferchange: null,\n      ondataerror: null\n    };\n    this.movieStarOptions = {\n      bufferTime: 3,\n      serverURL: null,\n      onconnect: null,\n      duration: null\n    };\n    this.audioFormats = {\n      mp3: {\n        type: ['audio/mpeg; codecs=\"mp3\"', 'audio/mpeg', 'audio/mp3', 'audio/MPA', 'audio/mpa-robust'],\n        required: true\n      },\n      mp4: {\n        related: ['aac', 'm4a', 'm4b'],\n        type: ['audio/mp4; codecs=\"mp4a.40.2\"', 'audio/aac', 'audio/x-m4a', 'audio/MP4A-LATM', 'audio/mpeg4-generic'],\n        required: false\n      },\n      ogg: {\n        type: ['audio/ogg; codecs=vorbis'],\n        required: false\n      },\n      opus: {\n        type: ['audio/ogg; codecs=opus', 'audio/opus'],\n        required: false\n      },\n      wav: {\n        type: ['audio/wav; codecs=\"1\"', 'audio/wav', 'audio/wave', 'audio/x-wav'],\n        required: false\n      },\n      flac: {\n        type: ['audio/flac'],\n        required: false\n      }\n    };\n    this.movieID = 'sm2-container';\n    this.id = smID || 'sm2movie';\n    this.debugID = 'soundmanager-debug';\n    this.debugURLParam = /([#?&])debug=1/i;\n    this.versionNumber = 'V2.97a.20170601';\n    this.version = null;\n    this.movieURL = null;\n    this.altURL = null;\n    this.swfLoaded = false;\n    this.enabled = false;\n    this.oMC = null;\n    this.sounds = {};\n    this.soundIDs = [];\n    this.muted = false;\n    this.didFlashBlock = false;\n    this.filePattern = null;\n    this.filePatterns = {\n      flash8: /\\.mp3(\\?.*)?$/i,\n      flash9: /\\.mp3(\\?.*)?$/i\n    };\n    this.features = {\n      buffering: false,\n      peakData: false,\n      waveformData: false,\n      eqData: false,\n      movieStar: false\n    };\n    this.sandbox = {};\n    this.html5 = {\n      usingFlash: null\n    };\n    this.flash = {};\n    this.html5Only = false;\n    this.ignoreFlash = false;\n\n    var SMSound,\n        sm2 = this,\n        globalHTML5Audio = null,\n        flash = null,\n        sm = 'soundManager',\n        smc = sm + ': ',\n        h5 = 'HTML5::',\n        id,\n        ua = navigator.userAgent,\n        wl = window.location.href.toString(),\n        doc = document,\n        doNothing,\n        setProperties,\n        init,\n        fV,\n        on_queue = [],\n        debugOpen = true,\n        debugTS,\n        didAppend = false,\n        appendSuccess = false,\n        didInit = false,\n        disabled = false,\n        windowLoaded = false,\n        _wDS,\n        wdCount = 0,\n        initComplete,\n        _mixin,\n        _assign,\n        extraOptions,\n        addOnEvent,\n        processOnEvents,\n        _initUserOnload,\n        delayWaitForEI,\n        waitForEI,\n        rebootIntoHTML5,\n        setVersionInfo,\n        _handleFocus,\n        strings,\n        initMovie,\n        _domContentLoaded,\n        _winOnLoad,\n        didDCLoaded,\n        getDocument,\n        createMovie,\n        catchError,\n        setPolling,\n        initDebug,\n        debugLevels = ['log', 'info', 'warn', 'error'],\n        defaultFlashVersion = 8,\n        disableObject,\n        failSafely,\n        normalizeMovieURL,\n        oRemoved = null,\n        oRemovedHTML = null,\n        str,\n        flashBlockHandler,\n        getSWFCSS,\n        swfCSS,\n        toggleDebug,\n        loopFix,\n        policyFix,\n        complain,\n        idCheck,\n        waitingForEI = false,\n        initPending = false,\n        startTimer,\n        stopTimer,\n        timerExecute,\n        h5TimerCount = 0,\n        h5IntervalTimer = null,\n        parseURL,\n        messages = [],\n        canIgnoreFlash,\n        needsFlash = null,\n        featureCheck,\n        html5OK,\n        html5CanPlay,\n        html5ErrorCodes,\n        html5Ext,\n        html5Unload,\n        _domContentLoadedIE,\n        testHTML5,\n        event,\n        slice = Array.prototype.slice,\n        useGlobalHTML5Audio = false,\n        lastGlobalHTML5URL,\n        hasFlash,\n        detectFlash,\n        badSafariFix,\n        html5_events,\n        showSupport,\n        flushMessages,\n        wrapCallback,\n        idCounter = 0,\n        didSetup,\n        msecScale = 1000,\n        is_iDevice = ua.match(/(ipad|iphone|ipod)/i),\n        isAndroid = ua.match(/android/i),\n        isIE = ua.match(/msie|trident/i),\n        isWebkit = ua.match(/webkit/i),\n        isSafari = ua.match(/safari/i) && !ua.match(/chrome/i),\n        isOpera = ua.match(/opera/i),\n        mobileHTML5 = ua.match(/(mobile|pre\\/|xoom)/i) || is_iDevice || isAndroid,\n        isBadSafari = !wl.match(/usehtml5audio/i) && !wl.match(/sm2-ignorebadua/i) && isSafari && !ua.match(/silk/i) && ua.match(/OS\\sX\\s10_6_([3-7])/i),\n        hasConsole = window.console !== _undefined && console.log !== _undefined,\n        isFocused = doc.hasFocus !== _undefined ? doc.hasFocus() : null,\n        tryInitOnFocus = isSafari && (doc.hasFocus === _undefined || !doc.hasFocus()),\n        okToDisable = !tryInitOnFocus,\n        flashMIME = /(mp3|mp4|mpa|m4a|m4b)/i,\n        emptyURL = 'about:blank',\n        emptyWAV = 'data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==',\n        overHTTP = doc.location ? doc.location.protocol.match(/http/i) : null,\n        http = !overHTTP ? '//' : '',\n        netStreamMimeTypes = /^\\s*audio\\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\\s*(?:$|;)/i,\n        netStreamTypes = ['mpeg4', 'aac', 'flv', 'mov', 'mp4', 'm4v', 'f4v', 'm4a', 'm4b', 'mp4v', '3gp', '3g2'],\n        netStreamPattern = new RegExp('\\\\.(' + netStreamTypes.join('|') + ')(\\\\?.*)?$', 'i');\n\n    this.mimePattern = /^\\s*audio\\/(?:x-)?(?:mp(?:eg|3))\\s*(?:$|;)/i;\n    this.useAltURL = !overHTTP;\n    swfCSS = {\n      swfBox: 'sm2-object-box',\n      swfDefault: 'movieContainer',\n      swfError: 'swf_error',\n      swfTimedout: 'swf_timedout',\n      swfLoaded: 'swf_loaded',\n      swfUnblocked: 'swf_unblocked',\n      sm2Debug: 'sm2_debug',\n      highPerf: 'high_performance',\n      flashDebug: 'flash_debug'\n    };\n    html5ErrorCodes = [null, 'MEDIA_ERR_ABORTED', 'MEDIA_ERR_NETWORK', 'MEDIA_ERR_DECODE', 'MEDIA_ERR_SRC_NOT_SUPPORTED'];\n\n    this.hasHTML5 = function () {\n      try {\n        return Audio !== _undefined && (isOpera && opera !== _undefined && opera.version() < 10 ? new Audio(null) : new Audio()).canPlayType !== _undefined;\n      } catch (e) {\n        return false;\n      }\n    }();\n\n    this.setup = function (options) {\n      var noURL = !sm2.url;\n\n      if (options !== _undefined && didInit && needsFlash && sm2.ok() && (options.flashVersion !== _undefined || options.url !== _undefined || options.html5Test !== _undefined)) {}\n\n      _assign(options);\n\n      if (!useGlobalHTML5Audio) {\n        if (mobileHTML5) {\n          if (!sm2.setupOptions.ignoreMobileRestrictions || sm2.setupOptions.forceUseGlobalHTML5Audio) {\n            messages.push(strings.globalHTML5);\n            useGlobalHTML5Audio = true;\n          }\n        } else if (sm2.setupOptions.forceUseGlobalHTML5Audio) {\n          messages.push(strings.globalHTML5);\n          useGlobalHTML5Audio = true;\n        }\n      }\n\n      if (!didSetup && mobileHTML5) {\n        if (sm2.setupOptions.ignoreMobileRestrictions) {\n          messages.push(strings.ignoreMobile);\n        } else {\n          sm2.setupOptions.useHTML5Audio = true;\n          sm2.setupOptions.preferFlash = false;\n\n          if (is_iDevice) {\n            sm2.ignoreFlash = true;\n          } else if (isAndroid && !ua.match(/android\\s2\\.3/i) || !isAndroid) {\n            useGlobalHTML5Audio = true;\n          }\n        }\n      }\n\n      if (options) {\n        if (noURL && didDCLoaded && options.url !== _undefined) {\n          sm2.beginDelayedInit();\n        }\n\n        if (!didDCLoaded && options.url !== _undefined && doc.readyState === 'complete') {\n          setTimeout(_domContentLoaded, 1);\n        }\n      }\n\n      didSetup = true;\n      return sm2;\n    };\n\n    this.ok = function () {\n      return needsFlash ? didInit && !disabled : sm2.useHTML5Audio && sm2.hasHTML5;\n    };\n\n    this.supported = this.ok;\n\n    this.getMovie = function (movie_id) {\n      return id(movie_id) || doc[movie_id] || window[movie_id];\n    };\n\n    this.createSound = function (oOptions, _url) {\n      var cs,\n          cs_string,\n          options,\n          oSound = null;\n\n      if (!didInit || !sm2.ok()) {\n        return false;\n      }\n\n      if (_url !== _undefined) {\n        oOptions = {\n          id: oOptions,\n          url: _url\n        };\n      }\n\n      options = _mixin(oOptions);\n      options.url = parseURL(options.url);\n\n      if (options.id === _undefined) {\n        options.id = sm2.setupOptions.idPrefix + idCounter++;\n      }\n\n      if (idCheck(options.id, true)) {\n        return sm2.sounds[options.id];\n      }\n\n      function make() {\n        options = loopFix(options);\n        sm2.sounds[options.id] = new SMSound(options);\n        sm2.soundIDs.push(options.id);\n        return sm2.sounds[options.id];\n      }\n\n      if (html5OK(options)) {\n        oSound = make();\n\n        oSound._setup_html5(options);\n      } else {\n        if (sm2.html5Only) {\n          return make();\n        }\n\n        if (sm2.html5.usingFlash && options.url && options.url.match(/data:/i)) {\n          return make();\n        }\n\n        if (fV > 8) {\n          if (options.isMovieStar === null) {\n            options.isMovieStar = !!(options.serverURL || (options.type ? options.type.match(netStreamMimeTypes) : false) || options.url && options.url.match(netStreamPattern));\n          }\n        }\n\n        options = policyFix(options, cs);\n        oSound = make();\n\n        if (fV === 8) {\n          flash._createSound(options.id, options.loops || 1, options.usePolicyFile);\n        } else {\n          flash._createSound(options.id, options.url, options.usePeakData, options.useWaveformData, options.useEQData, options.isMovieStar, options.isMovieStar ? options.bufferTime : false, options.loops || 1, options.serverURL, options.duration || null, options.autoPlay, true, options.autoLoad, options.usePolicyFile);\n\n          if (!options.serverURL) {\n            oSound.connected = true;\n\n            if (options.onconnect) {\n              options.onconnect.apply(oSound);\n            }\n          }\n        }\n\n        if (!options.serverURL && (options.autoLoad || options.autoPlay)) {\n          oSound.load(options);\n        }\n      }\n\n      if (!options.serverURL && options.autoPlay) {\n        oSound.play();\n      }\n\n      return oSound;\n    };\n\n    this.destroySound = function (sID, _bFromSound) {\n      if (!idCheck(sID)) return false;\n      var oS = sm2.sounds[sID],\n          i;\n      oS.stop();\n      oS._iO = {};\n      oS.unload();\n\n      for (i = 0; i < sm2.soundIDs.length; i++) {\n        if (sm2.soundIDs[i] === sID) {\n          sm2.soundIDs.splice(i, 1);\n          break;\n        }\n      }\n\n      if (!_bFromSound) {\n        oS.destruct(true);\n      }\n\n      oS = null;\n      delete sm2.sounds[sID];\n      return true;\n    };\n\n    this.load = function (sID, oOptions) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].load(oOptions);\n    };\n\n    this.unload = function (sID) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].unload();\n    };\n\n    this.onPosition = function (sID, nPosition, oMethod, oScope) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].onposition(nPosition, oMethod, oScope);\n    };\n\n    this.onposition = this.onPosition;\n\n    this.clearOnPosition = function (sID, nPosition, oMethod) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].clearOnPosition(nPosition, oMethod);\n    };\n\n    this.play = function (sID, oOptions) {\n      var result = null,\n          overloaded = oOptions && !(oOptions instanceof Object);\n\n      if (!didInit || !sm2.ok()) {\n        return false;\n      }\n\n      if (!idCheck(sID, overloaded)) {\n        if (!overloaded) return false;\n\n        if (overloaded) {\n          oOptions = {\n            url: oOptions\n          };\n        }\n\n        if (oOptions && oOptions.url) {\n          oOptions.id = sID;\n          result = sm2.createSound(oOptions).play();\n        }\n      } else if (overloaded) {\n        oOptions = {\n          url: oOptions\n        };\n      }\n\n      if (result === null) {\n        result = sm2.sounds[sID].play(oOptions);\n      }\n\n      return result;\n    };\n\n    this.start = this.play;\n\n    this.setPlaybackRate = function (sID, rate, allowOverride) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].setPlaybackRate(rate, allowOverride);\n    };\n\n    this.setPosition = function (sID, nMsecOffset) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].setPosition(nMsecOffset);\n    };\n\n    this.stop = function (sID) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].stop();\n    };\n\n    this.stopAll = function () {\n      var oSound;\n\n      for (oSound in sm2.sounds) {\n        if (sm2.sounds.hasOwnProperty(oSound)) {\n          sm2.sounds[oSound].stop();\n        }\n      }\n    };\n\n    this.pause = function (sID) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].pause();\n    };\n\n    this.pauseAll = function () {\n      var i;\n\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\n        sm2.sounds[sm2.soundIDs[i]].pause();\n      }\n    };\n\n    this.resume = function (sID) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].resume();\n    };\n\n    this.resumeAll = function () {\n      var i;\n\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\n        sm2.sounds[sm2.soundIDs[i]].resume();\n      }\n    };\n\n    this.togglePause = function (sID) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].togglePause();\n    };\n\n    this.setPan = function (sID, nPan) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].setPan(nPan);\n    };\n\n    this.setVolume = function (sID, nVol) {\n      var i, j;\n\n      if (sID !== _undefined && !isNaN(sID) && nVol === _undefined) {\n        for (i = 0, j = sm2.soundIDs.length; i < j; i++) {\n          sm2.sounds[sm2.soundIDs[i]].setVolume(sID);\n        }\n\n        return false;\n      }\n\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].setVolume(nVol);\n    };\n\n    this.mute = function (sID) {\n      var i = 0;\n\n      if (sID instanceof String) {\n        sID = null;\n      }\n\n      if (!sID) {\n        for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\n          sm2.sounds[sm2.soundIDs[i]].mute();\n        }\n\n        sm2.muted = true;\n      } else {\n        if (!idCheck(sID)) return false;\n        return sm2.sounds[sID].mute();\n      }\n\n      return true;\n    };\n\n    this.muteAll = function () {\n      sm2.mute();\n    };\n\n    this.unmute = function (sID) {\n      var i;\n\n      if (sID instanceof String) {\n        sID = null;\n      }\n\n      if (!sID) {\n        for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\n          sm2.sounds[sm2.soundIDs[i]].unmute();\n        }\n\n        sm2.muted = false;\n      } else {\n        if (!idCheck(sID)) return false;\n        return sm2.sounds[sID].unmute();\n      }\n\n      return true;\n    };\n\n    this.unmuteAll = function () {\n      sm2.unmute();\n    };\n\n    this.toggleMute = function (sID) {\n      if (!idCheck(sID)) return false;\n      return sm2.sounds[sID].toggleMute();\n    };\n\n    this.getMemoryUse = function () {\n      var ram = 0;\n\n      if (flash && fV !== 8) {\n        ram = parseInt(flash._getMemoryUse(), 10);\n      }\n\n      return ram;\n    };\n\n    this.disable = function (bNoDisable) {\n      var i;\n\n      if (bNoDisable === _undefined) {\n        bNoDisable = false;\n      }\n\n      if (disabled) return false;\n      disabled = true;\n\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\n        disableObject(sm2.sounds[sm2.soundIDs[i]]);\n      }\n\n      disableObject(sm2);\n      initComplete(bNoDisable);\n      event.remove(window, 'load', _initUserOnload);\n      return true;\n    };\n\n    this.canPlayMIME = function (sMIME) {\n      var result;\n\n      if (sm2.hasHTML5) {\n        result = html5CanPlay({\n          type: sMIME\n        });\n      }\n\n      if (!result && needsFlash) {\n        result = sMIME && sm2.ok() ? !!((fV > 8 ? sMIME.match(netStreamMimeTypes) : null) || sMIME.match(sm2.mimePattern)) : null;\n      }\n\n      return result;\n    };\n\n    this.canPlayURL = function (sURL) {\n      var result;\n\n      if (sm2.hasHTML5) {\n        result = html5CanPlay({\n          url: sURL\n        });\n      }\n\n      if (!result && needsFlash) {\n        result = sURL && sm2.ok() ? !!sURL.match(sm2.filePattern) : null;\n      }\n\n      return result;\n    };\n\n    this.canPlayLink = function (oLink) {\n      if (oLink.type !== _undefined && oLink.type && sm2.canPlayMIME(oLink.type)) return true;\n      return sm2.canPlayURL(oLink.href);\n    };\n\n    this.getSoundById = function (sID, _suppressDebug) {\n      if (!sID) return null;\n      var result = sm2.sounds[sID];\n      return result;\n    };\n\n    this.onready = function (oMethod, oScope) {\n      var sType = 'onready',\n          result = false;\n\n      if (typeof oMethod === 'function') {\n        if (!oScope) {\n          oScope = window;\n        }\n\n        addOnEvent(sType, oMethod, oScope);\n        processOnEvents();\n        result = true;\n      } else {\n        throw str('needFunction', sType);\n      }\n\n      return result;\n    };\n\n    this.ontimeout = function (oMethod, oScope) {\n      var sType = 'ontimeout',\n          result = false;\n\n      if (typeof oMethod === 'function') {\n        if (!oScope) {\n          oScope = window;\n        }\n\n        addOnEvent(sType, oMethod, oScope);\n        processOnEvents({\n          type: sType\n        });\n        result = true;\n      } else {\n        throw str('needFunction', sType);\n      }\n\n      return result;\n    };\n\n    this._writeDebug = function (sText, sTypeOrObject) {\n      return true;\n    };\n\n    this._wD = this._writeDebug;\n\n    this._debug = function () {};\n\n    this.reboot = function (resetEvents, excludeInit) {\n      var i, j, k;\n\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\n        sm2.sounds[sm2.soundIDs[i]].destruct();\n      }\n\n      if (flash) {\n        try {\n          if (isIE) {\n            oRemovedHTML = flash.innerHTML;\n          }\n\n          oRemoved = flash.parentNode.removeChild(flash);\n        } catch (e) {}\n      }\n\n      oRemovedHTML = oRemoved = needsFlash = flash = null;\n      sm2.enabled = didDCLoaded = didInit = waitingForEI = initPending = didAppend = appendSuccess = disabled = useGlobalHTML5Audio = sm2.swfLoaded = false;\n      sm2.soundIDs = [];\n      sm2.sounds = {};\n      idCounter = 0;\n      didSetup = false;\n\n      if (!resetEvents) {\n        for (i in on_queue) {\n          if (on_queue.hasOwnProperty(i)) {\n            for (j = 0, k = on_queue[i].length; j < k; j++) {\n              on_queue[i][j].fired = false;\n            }\n          }\n        }\n      } else {\n        on_queue = [];\n      }\n\n      sm2.html5 = {\n        usingFlash: null\n      };\n      sm2.flash = {};\n      sm2.html5Only = false;\n      sm2.ignoreFlash = false;\n      window.setTimeout(function () {\n        if (!excludeInit) {\n          sm2.beginDelayedInit();\n        }\n      }, 20);\n      return sm2;\n    };\n\n    this.reset = function () {\n      return sm2.reboot(true, true);\n    };\n\n    this.getMoviePercent = function () {\n      return flash && 'PercentLoaded' in flash ? flash.PercentLoaded() : null;\n    };\n\n    this.beginDelayedInit = function () {\n      windowLoaded = true;\n\n      _domContentLoaded();\n\n      setTimeout(function () {\n        if (initPending) return false;\n        createMovie();\n        initMovie();\n        initPending = true;\n        return true;\n      }, 20);\n      delayWaitForEI();\n    };\n\n    this.destruct = function () {\n      sm2.disable(true);\n    };\n\n    SMSound = function SMSound(oOptions) {\n      var s = this,\n          resetProperties,\n          add_html5_events,\n          remove_html5_events,\n          stop_html5_timer,\n          start_html5_timer,\n          attachOnPosition,\n          onplay_called = false,\n          onPositionItems = [],\n          onPositionFired = 0,\n          detachOnPosition,\n          applyFromTo,\n          lastURL = null,\n          lastHTML5State,\n          urlOmitted;\n      lastHTML5State = {\n        duration: null,\n        time: null\n      };\n      this.id = oOptions.id;\n      this.sID = this.id;\n      this.url = oOptions.url;\n      this.options = _mixin(oOptions);\n      this.instanceOptions = this.options;\n      this._iO = this.instanceOptions;\n      this.pan = this.options.pan;\n      this.volume = this.options.volume;\n      this.isHTML5 = false;\n      this._a = null;\n      urlOmitted = !this.url;\n      this.id3 = {};\n\n      this._debug = function () {};\n\n      this.load = function (options) {\n        var oSound = null,\n            instanceOptions;\n\n        if (options !== _undefined) {\n          s._iO = _mixin(options, s.options);\n        } else {\n          options = s.options;\n          s._iO = options;\n\n          if (lastURL && lastURL !== s.url) {\n            s._iO.url = s.url;\n            s.url = null;\n          }\n        }\n\n        if (!s._iO.url) {\n          s._iO.url = s.url;\n        }\n\n        s._iO.url = parseURL(s._iO.url);\n        s.instanceOptions = s._iO;\n        instanceOptions = s._iO;\n\n        if (!instanceOptions.url && !s.url) {\n          return s;\n        }\n\n        if (instanceOptions.url === s.url && s.readyState !== 0 && s.readyState !== 2) {\n          if (s.readyState === 3 && instanceOptions.onload) {\n            wrapCallback(s, function () {\n              instanceOptions.onload.apply(s, [!!s.duration]);\n            });\n          }\n\n          return s;\n        }\n\n        s.loaded = false;\n        s.readyState = 1;\n        s.playState = 0;\n        s.id3 = {};\n\n        if (html5OK(instanceOptions)) {\n          oSound = s._setup_html5(instanceOptions);\n\n          if (!oSound._called_load) {\n            s._html5_canplay = false;\n\n            if (s.url !== instanceOptions.url) {\n              s._a.src = instanceOptions.url;\n              s.setPosition(0);\n            }\n\n            s._a.autobuffer = 'auto';\n            s._a.preload = 'auto';\n            s._a._called_load = true;\n          } else {}\n        } else {\n          if (sm2.html5Only) {\n            return s;\n          }\n\n          if (s._iO.url && s._iO.url.match(/data:/i)) {\n            return s;\n          }\n\n          try {\n            s.isHTML5 = false;\n            s._iO = policyFix(loopFix(instanceOptions));\n\n            if (s._iO.autoPlay && (s._iO.position || s._iO.from)) {\n              s._iO.autoPlay = false;\n            }\n\n            instanceOptions = s._iO;\n\n            if (fV === 8) {\n              flash._load(s.id, instanceOptions.url, instanceOptions.stream, instanceOptions.autoPlay, instanceOptions.usePolicyFile);\n            } else {\n              flash._load(s.id, instanceOptions.url, !!instanceOptions.stream, !!instanceOptions.autoPlay, instanceOptions.loops || 1, !!instanceOptions.autoLoad, instanceOptions.usePolicyFile);\n            }\n          } catch (e) {\n            catchError({\n              type: 'SMSOUND_LOAD_JS_EXCEPTION',\n              fatal: true\n            });\n          }\n        }\n\n        s.url = instanceOptions.url;\n        return s;\n      };\n\n      this.unload = function () {\n        if (s.readyState !== 0) {\n          if (!s.isHTML5) {\n            if (fV === 8) {\n              flash._unload(s.id, emptyURL);\n            } else {\n              flash._unload(s.id);\n            }\n          } else {\n            stop_html5_timer();\n\n            if (s._a) {\n              s._a.pause();\n\n              lastURL = html5Unload(s._a);\n            }\n          }\n\n          resetProperties();\n        }\n\n        return s;\n      };\n\n      this.destruct = function (_bFromSM) {\n        if (!s.isHTML5) {\n          s._iO.onfailure = null;\n\n          flash._destroySound(s.id);\n        } else {\n          stop_html5_timer();\n\n          if (s._a) {\n            s._a.pause();\n\n            html5Unload(s._a);\n\n            if (!useGlobalHTML5Audio) {\n              remove_html5_events();\n            }\n\n            s._a._s = null;\n            s._a = null;\n          }\n        }\n\n        if (!_bFromSM) {\n          sm2.destroySound(s.id, true);\n        }\n      };\n\n      this.play = function (options, _updatePlayState) {\n        var fN,\n            allowMulti,\n            a,\n            onready,\n            audioClone,\n            _onended,\n            _oncanplay,\n            startOK = true;\n\n        _updatePlayState = _updatePlayState === _undefined ? true : _updatePlayState;\n\n        if (!options) {\n          options = {};\n        }\n\n        if (s.url) {\n          s._iO.url = s.url;\n        }\n\n        s._iO = _mixin(s._iO, s.options);\n        s._iO = _mixin(options, s._iO);\n        s._iO.url = parseURL(s._iO.url);\n        s.instanceOptions = s._iO;\n\n        if (!s.isHTML5 && s._iO.serverURL && !s.connected) {\n          if (!s.getAutoPlay()) {\n            s.setAutoPlay(true);\n          }\n\n          return s;\n        }\n\n        if (html5OK(s._iO)) {\n          s._setup_html5(s._iO);\n\n          start_html5_timer();\n        }\n\n        if (s.playState === 1 && !s.paused) {\n          allowMulti = s._iO.multiShot;\n\n          if (!allowMulti) {\n            if (s.isHTML5) {\n              s.setPosition(s._iO.position);\n            }\n\n            return s;\n          }\n        }\n\n        if (options.url && options.url !== s.url) {\n          if (!s.readyState && !s.isHTML5 && fV === 8 && urlOmitted) {\n            urlOmitted = false;\n          } else {\n            s.load(s._iO);\n          }\n        }\n\n        if (!s.loaded) {\n          if (s.readyState === 0) {\n            if (!s.isHTML5 && !sm2.html5Only) {\n              s._iO.autoPlay = true;\n              s.load(s._iO);\n            } else if (s.isHTML5) {\n              s.load(s._iO);\n            } else {\n              return s;\n            }\n\n            s.instanceOptions = s._iO;\n          } else if (s.readyState === 2) {\n            return s;\n          } else {}\n        } else {}\n\n        if (!s.isHTML5 && fV === 9 && s.position > 0 && s.position === s.duration) {\n          options.position = 0;\n        }\n\n        if (s.paused && s.position >= 0 && (!s._iO.serverURL || s.position > 0)) {\n          s.resume();\n        } else {\n          s._iO = _mixin(options, s._iO);\n\n          if ((!s.isHTML5 && s._iO.position !== null && s._iO.position > 0 || s._iO.from !== null && s._iO.from > 0 || s._iO.to !== null) && s.instanceCount === 0 && s.playState === 0 && !s._iO.serverURL) {\n            onready = function onready() {\n              s._iO = _mixin(options, s._iO);\n              s.play(s._iO);\n            };\n\n            if (s.isHTML5 && !s._html5_canplay) {\n              s.load({\n                _oncanplay: onready\n              });\n            } else if (!s.isHTML5 && !s.loaded && (!s.readyState || s.readyState !== 2)) {\n              s.load({\n                onload: onready\n              });\n            }\n\n            s._iO = applyFromTo();\n          }\n\n          if (!s.instanceCount || s._iO.multiShotEvents || s.isHTML5 && s._iO.multiShot && !useGlobalHTML5Audio || !s.isHTML5 && fV > 8 && !s.getAutoPlay()) {\n            s.instanceCount++;\n          }\n\n          if (s._iO.onposition && s.playState === 0) {\n            attachOnPosition(s);\n          }\n\n          s.playState = 1;\n          s.paused = false;\n          s.position = s._iO.position !== _undefined && !isNaN(s._iO.position) ? s._iO.position : 0;\n\n          if (!s.isHTML5) {\n            s._iO = policyFix(loopFix(s._iO));\n          }\n\n          if (s._iO.onplay && _updatePlayState) {\n            s._iO.onplay.apply(s);\n\n            onplay_called = true;\n          }\n\n          s.setVolume(s._iO.volume, true);\n          s.setPan(s._iO.pan, true);\n\n          if (s._iO.playbackRate !== 1) {\n            s.setPlaybackRate(s._iO.playbackRate);\n          }\n\n          if (!s.isHTML5) {\n            startOK = flash._start(s.id, s._iO.loops || 1, fV === 9 ? s.position : s.position / msecScale, s._iO.multiShot || false);\n\n            if (fV === 9 && !startOK) {\n              if (s._iO.onplayerror) {\n                s._iO.onplayerror.apply(s);\n              }\n            }\n          } else if (s.instanceCount < 2) {\n            start_html5_timer();\n            a = s._setup_html5();\n            s.setPosition(s._iO.position);\n            a.play();\n          } else {\n            audioClone = new Audio(s._iO.url);\n\n            _onended = function onended() {\n              event.remove(audioClone, 'ended', _onended);\n\n              s._onfinish(s);\n\n              html5Unload(audioClone);\n              audioClone = null;\n            };\n\n            _oncanplay = function oncanplay() {\n              event.remove(audioClone, 'canplay', _oncanplay);\n\n              try {\n                audioClone.currentTime = s._iO.position / msecScale;\n              } catch (err) {}\n\n              audioClone.play();\n            };\n\n            event.add(audioClone, 'ended', _onended);\n\n            if (s._iO.volume !== _undefined) {\n              audioClone.volume = Math.max(0, Math.min(1, s._iO.volume / 100));\n            }\n\n            if (s.muted) {\n              audioClone.muted = true;\n            }\n\n            if (s._iO.position) {\n              event.add(audioClone, 'canplay', _oncanplay);\n            } else {\n              audioClone.play();\n            }\n          }\n        }\n\n        return s;\n      };\n\n      this.start = this.play;\n\n      this.stop = function (bAll) {\n        var instanceOptions = s._iO,\n            originalPosition;\n\n        if (s.playState === 1) {\n          s._onbufferchange(0);\n\n          s._resetOnPosition(0);\n\n          s.paused = false;\n\n          if (!s.isHTML5) {\n            s.playState = 0;\n          }\n\n          detachOnPosition();\n\n          if (instanceOptions.to) {\n            s.clearOnPosition(instanceOptions.to);\n          }\n\n          if (!s.isHTML5) {\n            flash._stop(s.id, bAll);\n\n            if (instanceOptions.serverURL) {\n              s.unload();\n            }\n          } else if (s._a) {\n            originalPosition = s.position;\n            s.setPosition(0);\n            s.position = originalPosition;\n\n            s._a.pause();\n\n            s.playState = 0;\n\n            s._onTimer();\n\n            stop_html5_timer();\n          }\n\n          s.instanceCount = 0;\n          s._iO = {};\n\n          if (instanceOptions.onstop) {\n            instanceOptions.onstop.apply(s);\n          }\n        }\n\n        return s;\n      };\n\n      this.setAutoPlay = function (autoPlay) {\n        s._iO.autoPlay = autoPlay;\n\n        if (!s.isHTML5) {\n          flash._setAutoPlay(s.id, autoPlay);\n\n          if (autoPlay) {\n            if (!s.instanceCount && s.readyState === 1) {\n              s.instanceCount++;\n            }\n          }\n        }\n      };\n\n      this.getAutoPlay = function () {\n        return s._iO.autoPlay;\n      };\n\n      this.setPlaybackRate = function (playbackRate) {\n        var normalizedRate = Math.max(0.5, Math.min(4, playbackRate));\n\n        if (s.isHTML5) {\n          try {\n            s._iO.playbackRate = normalizedRate;\n            s._a.playbackRate = normalizedRate;\n          } catch (e) {}\n        }\n\n        return s;\n      };\n\n      this.setPosition = function (nMsecOffset) {\n        if (nMsecOffset === _undefined) {\n          nMsecOffset = 0;\n        }\n\n        var position,\n            position1K,\n            offset = s.isHTML5 ? Math.max(nMsecOffset, 0) : Math.min(s.duration || s._iO.duration, Math.max(nMsecOffset, 0));\n        s.position = offset;\n        position1K = s.position / msecScale;\n\n        s._resetOnPosition(s.position);\n\n        s._iO.position = offset;\n\n        if (!s.isHTML5) {\n          position = fV === 9 ? s.position : position1K;\n\n          if (s.readyState && s.readyState !== 2) {\n            flash._setPosition(s.id, position, s.paused || !s.playState, s._iO.multiShot);\n          }\n        } else if (s._a) {\n          if (s._html5_canplay) {\n            if (s._a.currentTime.toFixed(3) !== position1K.toFixed(3)) {\n              try {\n                s._a.currentTime = position1K;\n\n                if (s.playState === 0 || s.paused) {\n                  s._a.pause();\n                }\n              } catch (e) {}\n            }\n          } else if (position1K) {\n            return s;\n          }\n\n          if (s.paused) {\n            s._onTimer(true);\n          }\n        }\n\n        return s;\n      };\n\n      this.pause = function (_bCallFlash) {\n        if (s.paused || s.playState === 0 && s.readyState !== 1) return s;\n        s.paused = true;\n\n        if (!s.isHTML5) {\n          if (_bCallFlash || _bCallFlash === _undefined) {\n            flash._pause(s.id, s._iO.multiShot);\n          }\n        } else {\n          s._setup_html5().pause();\n\n          stop_html5_timer();\n        }\n\n        if (s._iO.onpause) {\n          s._iO.onpause.apply(s);\n        }\n\n        return s;\n      };\n\n      this.resume = function () {\n        var instanceOptions = s._iO;\n        if (!s.paused) return s;\n        s.paused = false;\n        s.playState = 1;\n\n        if (!s.isHTML5) {\n          if (instanceOptions.isMovieStar && !instanceOptions.serverURL) {\n            s.setPosition(s.position);\n          }\n\n          flash._pause(s.id, instanceOptions.multiShot);\n        } else {\n          s._setup_html5().play();\n\n          start_html5_timer();\n        }\n\n        if (!onplay_called && instanceOptions.onplay) {\n          instanceOptions.onplay.apply(s);\n          onplay_called = true;\n        } else if (instanceOptions.onresume) {\n          instanceOptions.onresume.apply(s);\n        }\n\n        return s;\n      };\n\n      this.togglePause = function () {\n        if (s.playState === 0) {\n          s.play({\n            position: fV === 9 && !s.isHTML5 ? s.position : s.position / msecScale\n          });\n          return s;\n        }\n\n        if (s.paused) {\n          s.resume();\n        } else {\n          s.pause();\n        }\n\n        return s;\n      };\n\n      this.setPan = function (nPan, bInstanceOnly) {\n        if (nPan === _undefined) {\n          nPan = 0;\n        }\n\n        if (bInstanceOnly === _undefined) {\n          bInstanceOnly = false;\n        }\n\n        if (!s.isHTML5) {\n          flash._setPan(s.id, nPan);\n        }\n\n        s._iO.pan = nPan;\n\n        if (!bInstanceOnly) {\n          s.pan = nPan;\n          s.options.pan = nPan;\n        }\n\n        return s;\n      };\n\n      this.setVolume = function (nVol, _bInstanceOnly) {\n        if (nVol === _undefined) {\n          nVol = 100;\n        }\n\n        if (_bInstanceOnly === _undefined) {\n          _bInstanceOnly = false;\n        }\n\n        if (!s.isHTML5) {\n          flash._setVolume(s.id, sm2.muted && !s.muted || s.muted ? 0 : nVol);\n        } else if (s._a) {\n          if (sm2.muted && !s.muted) {\n            s.muted = true;\n            s._a.muted = true;\n          }\n\n          s._a.volume = Math.max(0, Math.min(1, nVol / 100));\n        }\n\n        s._iO.volume = nVol;\n\n        if (!_bInstanceOnly) {\n          s.volume = nVol;\n          s.options.volume = nVol;\n        }\n\n        return s;\n      };\n\n      this.mute = function () {\n        s.muted = true;\n\n        if (!s.isHTML5) {\n          flash._setVolume(s.id, 0);\n        } else if (s._a) {\n          s._a.muted = true;\n        }\n\n        return s;\n      };\n\n      this.unmute = function () {\n        s.muted = false;\n        var hasIO = s._iO.volume !== _undefined;\n\n        if (!s.isHTML5) {\n          flash._setVolume(s.id, hasIO ? s._iO.volume : s.options.volume);\n        } else if (s._a) {\n          s._a.muted = false;\n        }\n\n        return s;\n      };\n\n      this.toggleMute = function () {\n        return s.muted ? s.unmute() : s.mute();\n      };\n\n      this.onPosition = function (nPosition, oMethod, oScope) {\n        onPositionItems.push({\n          position: parseInt(nPosition, 10),\n          method: oMethod,\n          scope: oScope !== _undefined ? oScope : s,\n          fired: false\n        });\n        return s;\n      };\n\n      this.onposition = this.onPosition;\n\n      this.clearOnPosition = function (nPosition, oMethod) {\n        var i;\n        nPosition = parseInt(nPosition, 10);\n\n        if (isNaN(nPosition)) {\n          return;\n        }\n\n        for (i = 0; i < onPositionItems.length; i++) {\n          if (nPosition === onPositionItems[i].position) {\n            if (!oMethod || oMethod === onPositionItems[i].method) {\n              if (onPositionItems[i].fired) {\n                onPositionFired--;\n              }\n\n              onPositionItems.splice(i, 1);\n            }\n          }\n        }\n      };\n\n      this._processOnPosition = function () {\n        var i,\n            item,\n            j = onPositionItems.length;\n        if (!j || !s.playState || onPositionFired >= j) return false;\n\n        for (i = j - 1; i >= 0; i--) {\n          item = onPositionItems[i];\n\n          if (!item.fired && s.position >= item.position) {\n            item.fired = true;\n            onPositionFired++;\n            item.method.apply(item.scope, [item.position]);\n            j = onPositionItems.length;\n          }\n        }\n\n        return true;\n      };\n\n      this._resetOnPosition = function (nPosition) {\n        var i,\n            item,\n            j = onPositionItems.length;\n        if (!j) return false;\n\n        for (i = j - 1; i >= 0; i--) {\n          item = onPositionItems[i];\n\n          if (item.fired && nPosition <= item.position) {\n            item.fired = false;\n            onPositionFired--;\n          }\n        }\n\n        return true;\n      };\n\n      applyFromTo = function applyFromTo() {\n        var instanceOptions = s._iO,\n            f = instanceOptions.from,\n            t = instanceOptions.to,\n            start,\n            _end;\n\n        _end = function end() {\n          s.clearOnPosition(t, _end);\n          s.stop();\n        };\n\n        start = function start() {\n          if (t !== null && !isNaN(t)) {\n            s.onPosition(t, _end);\n          }\n        };\n\n        if (f !== null && !isNaN(f)) {\n          instanceOptions.position = f;\n          instanceOptions.multiShot = false;\n          start();\n        }\n\n        return instanceOptions;\n      };\n\n      attachOnPosition = function attachOnPosition() {\n        var item,\n            op = s._iO.onposition;\n\n        if (op) {\n          for (item in op) {\n            if (op.hasOwnProperty(item)) {\n              s.onPosition(parseInt(item, 10), op[item]);\n            }\n          }\n        }\n      };\n\n      detachOnPosition = function detachOnPosition() {\n        var item,\n            op = s._iO.onposition;\n\n        if (op) {\n          for (item in op) {\n            if (op.hasOwnProperty(item)) {\n              s.clearOnPosition(parseInt(item, 10));\n            }\n          }\n        }\n      };\n\n      start_html5_timer = function start_html5_timer() {\n        if (s.isHTML5) {\n          startTimer(s);\n        }\n      };\n\n      stop_html5_timer = function stop_html5_timer() {\n        if (s.isHTML5) {\n          stopTimer(s);\n        }\n      };\n\n      resetProperties = function resetProperties(retainPosition) {\n        if (!retainPosition) {\n          onPositionItems = [];\n          onPositionFired = 0;\n        }\n\n        onplay_called = false;\n        s._hasTimer = null;\n        s._a = null;\n        s._html5_canplay = false;\n        s.bytesLoaded = null;\n        s.bytesTotal = null;\n        s.duration = s._iO && s._iO.duration ? s._iO.duration : null;\n        s.durationEstimate = null;\n        s.buffered = [];\n        s.eqData = [];\n        s.eqData.left = [];\n        s.eqData.right = [];\n        s.failures = 0;\n        s.isBuffering = false;\n        s.instanceOptions = {};\n        s.instanceCount = 0;\n        s.loaded = false;\n        s.metadata = {};\n        s.readyState = 0;\n        s.muted = false;\n        s.paused = false;\n        s.peakData = {\n          left: 0,\n          right: 0\n        };\n        s.waveformData = {\n          left: [],\n          right: []\n        };\n        s.playState = 0;\n        s.position = null;\n        s.id3 = {};\n      };\n\n      resetProperties();\n\n      this._onTimer = function (bForce) {\n        var duration,\n            isNew = false,\n            time,\n            x = {};\n\n        if (s._hasTimer || bForce) {\n          if (s._a && (bForce || (s.playState > 0 || s.readyState === 1) && !s.paused)) {\n            duration = s._get_html5_duration();\n\n            if (duration !== lastHTML5State.duration) {\n              lastHTML5State.duration = duration;\n              s.duration = duration;\n              isNew = true;\n            }\n\n            s.durationEstimate = s.duration;\n            time = s._a.currentTime * msecScale || 0;\n\n            if (time !== lastHTML5State.time) {\n              lastHTML5State.time = time;\n              isNew = true;\n            }\n\n            if (isNew || bForce) {\n              s._whileplaying(time, x, x, x, x);\n            }\n          }\n        }\n\n        return isNew;\n      };\n\n      this._get_html5_duration = function () {\n        var instanceOptions = s._iO,\n            d = s._a && s._a.duration ? s._a.duration * msecScale : instanceOptions && instanceOptions.duration ? instanceOptions.duration : null,\n            result = d && !isNaN(d) && d !== Infinity ? d : null;\n        return result;\n      };\n\n      this._apply_loop = function (a, nLoops) {\n        a.loop = nLoops > 1 ? 'loop' : '';\n      };\n\n      this._setup_html5 = function (options) {\n        var instanceOptions = _mixin(s._iO, options),\n            a = useGlobalHTML5Audio ? globalHTML5Audio : s._a,\n            dURL = decodeURI(instanceOptions.url),\n            sameURL;\n\n        if (useGlobalHTML5Audio) {\n          if (dURL === decodeURI(lastGlobalHTML5URL)) {\n            sameURL = true;\n          }\n        } else if (dURL === decodeURI(lastURL)) {\n          sameURL = true;\n        }\n\n        if (a) {\n          if (a._s) {\n            if (useGlobalHTML5Audio) {\n              if (a._s && a._s.playState && !sameURL) {\n                a._s.stop();\n              }\n            } else if (!useGlobalHTML5Audio && dURL === decodeURI(lastURL)) {\n              s._apply_loop(a, instanceOptions.loops);\n\n              return a;\n            }\n          }\n\n          if (!sameURL) {\n            if (lastURL) {\n              resetProperties(false);\n            }\n\n            a.src = instanceOptions.url;\n            s.url = instanceOptions.url;\n            lastURL = instanceOptions.url;\n            lastGlobalHTML5URL = instanceOptions.url;\n            a._called_load = false;\n          }\n        } else {\n          if (instanceOptions.autoLoad || instanceOptions.autoPlay) {\n            s._a = new Audio(instanceOptions.url);\n\n            s._a.load();\n          } else {\n            s._a = isOpera && opera.version() < 10 ? new Audio(null) : new Audio();\n          }\n\n          a = s._a;\n          a._called_load = false;\n\n          if (useGlobalHTML5Audio) {\n            globalHTML5Audio = a;\n          }\n        }\n\n        s.isHTML5 = true;\n        s._a = a;\n        a._s = s;\n        add_html5_events();\n\n        s._apply_loop(a, instanceOptions.loops);\n\n        if (instanceOptions.autoLoad || instanceOptions.autoPlay) {\n          s.load();\n        } else {\n          a.autobuffer = false;\n          a.preload = 'auto';\n        }\n\n        return a;\n      };\n\n      add_html5_events = function add_html5_events() {\n        if (s._a._added_events) return false;\n        var f;\n\n        function add(oEvt, oFn, bCapture) {\n          return s._a ? s._a.addEventListener(oEvt, oFn, bCapture || false) : null;\n        }\n\n        s._a._added_events = true;\n\n        for (f in html5_events) {\n          if (html5_events.hasOwnProperty(f)) {\n            add(f, html5_events[f]);\n          }\n        }\n\n        return true;\n      };\n\n      remove_html5_events = function remove_html5_events() {\n        var f;\n\n        function remove(oEvt, oFn, bCapture) {\n          return s._a ? s._a.removeEventListener(oEvt, oFn, bCapture || false) : null;\n        }\n\n        s._a._added_events = false;\n\n        for (f in html5_events) {\n          if (html5_events.hasOwnProperty(f)) {\n            remove(f, html5_events[f]);\n          }\n        }\n      };\n\n      this._onload = function (nSuccess) {\n        var fN,\n            loadOK = !!nSuccess || !s.isHTML5 && fV === 8 && s.duration;\n        s.loaded = loadOK;\n        s.readyState = loadOK ? 3 : 2;\n\n        s._onbufferchange(0);\n\n        if (!loadOK && !s.isHTML5) {\n          s._onerror();\n        }\n\n        if (s._iO.onload) {\n          wrapCallback(s, function () {\n            s._iO.onload.apply(s, [loadOK]);\n          });\n        }\n\n        return true;\n      };\n\n      this._onerror = function (errorCode, description) {\n        if (s._iO.onerror) {\n          wrapCallback(s, function () {\n            s._iO.onerror.apply(s, [errorCode, description]);\n          });\n        }\n      };\n\n      this._onbufferchange = function (nIsBuffering) {\n        if (s.playState === 0) return false;\n        if (nIsBuffering && s.isBuffering || !nIsBuffering && !s.isBuffering) return false;\n        s.isBuffering = nIsBuffering === 1;\n\n        if (s._iO.onbufferchange) {\n          s._iO.onbufferchange.apply(s, [nIsBuffering]);\n        }\n\n        return true;\n      };\n\n      this._onsuspend = function () {\n        if (s._iO.onsuspend) {\n          s._iO.onsuspend.apply(s);\n        }\n\n        return true;\n      };\n\n      this._onfailure = function (msg, level, code) {\n        s.failures++;\n\n        if (s._iO.onfailure && s.failures === 1) {\n          s._iO.onfailure(msg, level, code);\n        } else {}\n      };\n\n      this._onwarning = function (msg, level, code) {\n        if (s._iO.onwarning) {\n          s._iO.onwarning(msg, level, code);\n        }\n      };\n\n      this._onfinish = function () {\n        var io_onfinish = s._iO.onfinish;\n\n        s._onbufferchange(0);\n\n        s._resetOnPosition(0);\n\n        if (s.instanceCount) {\n          s.instanceCount--;\n\n          if (!s.instanceCount) {\n            detachOnPosition();\n            s.playState = 0;\n            s.paused = false;\n            s.instanceCount = 0;\n            s.instanceOptions = {};\n            s._iO = {};\n            stop_html5_timer();\n\n            if (s.isHTML5) {\n              s.position = 0;\n            }\n          }\n\n          if (!s.instanceCount || s._iO.multiShotEvents) {\n            if (io_onfinish) {\n              wrapCallback(s, function () {\n                io_onfinish.apply(s);\n              });\n            }\n          }\n        }\n      };\n\n      this._whileloading = function (nBytesLoaded, nBytesTotal, nDuration, nBufferLength) {\n        var instanceOptions = s._iO;\n        s.bytesLoaded = nBytesLoaded;\n        s.bytesTotal = nBytesTotal;\n        s.duration = Math.floor(nDuration);\n        s.bufferLength = nBufferLength;\n\n        if (!s.isHTML5 && !instanceOptions.isMovieStar) {\n          if (instanceOptions.duration) {\n            s.durationEstimate = s.duration > instanceOptions.duration ? s.duration : instanceOptions.duration;\n          } else {\n            s.durationEstimate = parseInt(s.bytesTotal / s.bytesLoaded * s.duration, 10);\n          }\n        } else {\n          s.durationEstimate = s.duration;\n        }\n\n        if (!s.isHTML5) {\n          s.buffered = [{\n            start: 0,\n            end: s.duration\n          }];\n        }\n\n        if ((s.readyState !== 3 || s.isHTML5) && instanceOptions.whileloading) {\n          instanceOptions.whileloading.apply(s);\n        }\n      };\n\n      this._whileplaying = function (nPosition, oPeakData, oWaveformDataLeft, oWaveformDataRight, oEQData) {\n        var instanceOptions = s._iO,\n            eqLeft;\n        if (isNaN(nPosition) || nPosition === null) return false;\n        s.position = Math.max(0, nPosition);\n\n        s._processOnPosition();\n\n        if (!s.isHTML5 && fV > 8) {\n          if (instanceOptions.usePeakData && oPeakData !== _undefined && oPeakData) {\n            s.peakData = {\n              left: oPeakData.leftPeak,\n              right: oPeakData.rightPeak\n            };\n          }\n\n          if (instanceOptions.useWaveformData && oWaveformDataLeft !== _undefined && oWaveformDataLeft) {\n            s.waveformData = {\n              left: oWaveformDataLeft.split(','),\n              right: oWaveformDataRight.split(',')\n            };\n          }\n\n          if (instanceOptions.useEQData) {\n            if (oEQData !== _undefined && oEQData && oEQData.leftEQ) {\n              eqLeft = oEQData.leftEQ.split(',');\n              s.eqData = eqLeft;\n              s.eqData.left = eqLeft;\n\n              if (oEQData.rightEQ !== _undefined && oEQData.rightEQ) {\n                s.eqData.right = oEQData.rightEQ.split(',');\n              }\n            }\n          }\n        }\n\n        if (s.playState === 1) {\n          if (!s.isHTML5 && fV === 8 && !s.position && s.isBuffering) {\n            s._onbufferchange(0);\n          }\n\n          if (instanceOptions.whileplaying) {\n            instanceOptions.whileplaying.apply(s);\n          }\n        }\n\n        return true;\n      };\n\n      this._oncaptiondata = function (oData) {\n        s.captiondata = oData;\n\n        if (s._iO.oncaptiondata) {\n          s._iO.oncaptiondata.apply(s, [oData]);\n        }\n      };\n\n      this._onmetadata = function (oMDProps, oMDData) {\n        var oData = {},\n            i,\n            j;\n\n        for (i = 0, j = oMDProps.length; i < j; i++) {\n          oData[oMDProps[i]] = oMDData[i];\n        }\n\n        s.metadata = oData;\n\n        if (s._iO.onmetadata) {\n          s._iO.onmetadata.call(s, s.metadata);\n        }\n      };\n\n      this._onid3 = function (oID3Props, oID3Data) {\n        var oData = [],\n            i,\n            j;\n\n        for (i = 0, j = oID3Props.length; i < j; i++) {\n          oData[oID3Props[i]] = oID3Data[i];\n        }\n\n        s.id3 = _mixin(s.id3, oData);\n\n        if (s._iO.onid3) {\n          s._iO.onid3.apply(s);\n        }\n      };\n\n      this._onconnect = function (bSuccess) {\n        bSuccess = bSuccess === 1;\n        s.connected = bSuccess;\n\n        if (bSuccess) {\n          s.failures = 0;\n\n          if (idCheck(s.id)) {\n            if (s.getAutoPlay()) {\n              s.play(_undefined, s.getAutoPlay());\n            } else if (s._iO.autoLoad) {\n              s.load();\n            }\n          }\n\n          if (s._iO.onconnect) {\n            s._iO.onconnect.apply(s, [bSuccess]);\n          }\n        }\n      };\n\n      this._ondataerror = function (sError) {\n        if (s.playState > 0) {\n          if (s._iO.ondataerror) {\n            s._iO.ondataerror.apply(s);\n          }\n        }\n      };\n    };\n\n    getDocument = function getDocument() {\n      return doc.body || doc.getElementsByTagName('div')[0];\n    };\n\n    id = function id(sID) {\n      return doc.getElementById(sID);\n    };\n\n    _mixin = function mixin(oMain, oAdd) {\n      var o1 = oMain || {},\n          o2,\n          o;\n      o2 = oAdd === _undefined ? sm2.defaultOptions : oAdd;\n\n      for (o in o2) {\n        if (o2.hasOwnProperty(o) && o1[o] === _undefined) {\n          if (typeof o2[o] !== 'object' || o2[o] === null) {\n            o1[o] = o2[o];\n          } else {\n            o1[o] = _mixin(o1[o], o2[o]);\n          }\n        }\n      }\n\n      return o1;\n    };\n\n    wrapCallback = function wrapCallback(oSound, callback) {\n      if (!oSound.isHTML5 && fV === 8) {\n        window.setTimeout(callback, 0);\n      } else {\n        callback();\n      }\n    };\n\n    extraOptions = {\n      onready: 1,\n      ontimeout: 1,\n      defaultOptions: 1,\n      flash9Options: 1,\n      movieStarOptions: 1\n    };\n\n    _assign = function assign(o, oParent) {\n      var i,\n          result = true,\n          hasParent = oParent !== _undefined,\n          setupOptions = sm2.setupOptions,\n          bonusOptions = extraOptions;\n\n      for (i in o) {\n        if (o.hasOwnProperty(i)) {\n          if (typeof o[i] !== 'object' || o[i] === null || o[i] instanceof Array || o[i] instanceof RegExp) {\n            if (hasParent && bonusOptions[oParent] !== _undefined) {\n              sm2[oParent][i] = o[i];\n            } else if (setupOptions[i] !== _undefined) {\n              sm2.setupOptions[i] = o[i];\n              sm2[i] = o[i];\n            } else if (bonusOptions[i] === _undefined) {\n              result = false;\n            } else if (sm2[i] instanceof Function) {\n              sm2[i].apply(sm2, o[i] instanceof Array ? o[i] : [o[i]]);\n            } else {\n              sm2[i] = o[i];\n            }\n          } else if (bonusOptions[i] === _undefined) {\n            result = false;\n          } else {\n            return _assign(o[i], i);\n          }\n        }\n      }\n\n      return result;\n    };\n\n    function preferFlashCheck(kind) {\n      return sm2.preferFlash && hasFlash && !sm2.ignoreFlash && sm2.flash[kind] !== _undefined && sm2.flash[kind];\n    }\n\n    event = function () {\n      var old = window.attachEvent,\n          evt = {\n        add: old ? 'attachEvent' : 'addEventListener',\n        remove: old ? 'detachEvent' : 'removeEventListener'\n      };\n\n      function getArgs(oArgs) {\n        var args = slice.call(oArgs),\n            len = args.length;\n\n        if (old) {\n          args[1] = 'on' + args[1];\n\n          if (len > 3) {\n            args.pop();\n          }\n        } else if (len === 3) {\n          args.push(false);\n        }\n\n        return args;\n      }\n\n      function apply(args, sType) {\n        var element = args.shift(),\n            method = [evt[sType]];\n\n        if (old) {\n          element[method](args[0], args[1]);\n        } else {\n          element[method].apply(element, args);\n        }\n      }\n\n      function add() {\n        apply(getArgs(arguments), 'add');\n      }\n\n      function remove() {\n        apply(getArgs(arguments), 'remove');\n      }\n\n      return {\n        add: add,\n        remove: remove\n      };\n    }();\n\n    function html5_event(oFn) {\n      return function (e) {\n        var s = this._s,\n            result;\n\n        if (!s || !s._a) {\n          result = null;\n        } else {\n          result = oFn.call(this, e);\n        }\n\n        return result;\n      };\n    }\n\n    html5_events = {\n      abort: html5_event(function () {}),\n      canplay: html5_event(function () {\n        var s = this._s,\n            position1K;\n\n        if (s._html5_canplay) {\n          return;\n        }\n\n        s._html5_canplay = true;\n\n        s._onbufferchange(0);\n\n        position1K = s._iO.position !== _undefined && !isNaN(s._iO.position) ? s._iO.position / msecScale : null;\n\n        if (this.currentTime !== position1K) {\n          try {\n            this.currentTime = position1K;\n          } catch (ee) {}\n        }\n\n        if (s._iO._oncanplay) {\n          s._iO._oncanplay();\n        }\n      }),\n      canplaythrough: html5_event(function () {\n        var s = this._s;\n\n        if (!s.loaded) {\n          s._onbufferchange(0);\n\n          s._whileloading(s.bytesLoaded, s.bytesTotal, s._get_html5_duration());\n\n          s._onload(true);\n        }\n      }),\n      durationchange: html5_event(function () {\n        var s = this._s,\n            duration;\n        duration = s._get_html5_duration();\n\n        if (!isNaN(duration) && duration !== s.duration) {\n          s.durationEstimate = s.duration = duration;\n        }\n      }),\n      ended: html5_event(function () {\n        var s = this._s;\n\n        s._onfinish();\n      }),\n      error: html5_event(function () {\n        var description = html5ErrorCodes[this.error.code] || null;\n\n        this._s._onload(false);\n\n        this._s._onerror(this.error.code, description);\n      }),\n      loadeddata: html5_event(function () {\n        var s = this._s;\n\n        if (!s._loaded && !isSafari) {\n          s.duration = s._get_html5_duration();\n        }\n      }),\n      loadedmetadata: html5_event(function () {}),\n      loadstart: html5_event(function () {\n        this._s._onbufferchange(1);\n      }),\n      play: html5_event(function () {\n        this._s._onbufferchange(0);\n      }),\n      playing: html5_event(function () {\n        this._s._onbufferchange(0);\n      }),\n      progress: html5_event(function (e) {\n        var s = this._s,\n            i,\n            j,\n            progStr,\n            buffered = 0,\n            isProgress = e.type === 'progress',\n            ranges = e.target.buffered,\n            loaded = e.loaded || 0,\n            total = e.total || 1;\n        s.buffered = [];\n\n        if (ranges && ranges.length) {\n          for (i = 0, j = ranges.length; i < j; i++) {\n            s.buffered.push({\n              start: ranges.start(i) * msecScale,\n              end: ranges.end(i) * msecScale\n            });\n          }\n\n          buffered = (ranges.end(0) - ranges.start(0)) * msecScale;\n          loaded = Math.min(1, buffered / (e.target.duration * msecScale));\n        }\n\n        if (!isNaN(loaded)) {\n          s._whileloading(loaded, total, s._get_html5_duration());\n\n          if (loaded && total && loaded === total) {\n            html5_events.canplaythrough.call(this, e);\n          }\n        }\n      }),\n      ratechange: html5_event(function () {}),\n      suspend: html5_event(function (e) {\n        var s = this._s;\n        html5_events.progress.call(this, e);\n\n        s._onsuspend();\n      }),\n      stalled: html5_event(function () {}),\n      timeupdate: html5_event(function () {\n        this._s._onTimer();\n      }),\n      waiting: html5_event(function () {\n        var s = this._s;\n\n        s._onbufferchange(1);\n      })\n    };\n\n    html5OK = function html5OK(iO) {\n      var result;\n\n      if (!iO || !iO.type && !iO.url && !iO.serverURL) {\n        result = false;\n      } else if (iO.serverURL || iO.type && preferFlashCheck(iO.type)) {\n        result = false;\n      } else {\n        result = iO.type ? html5CanPlay({\n          type: iO.type\n        }) : html5CanPlay({\n          url: iO.url\n        }) || sm2.html5Only || iO.url.match(/data:/i);\n      }\n\n      return result;\n    };\n\n    html5Unload = function html5Unload(oAudio) {\n      var url;\n\n      if (oAudio) {\n        url = isSafari ? emptyURL : sm2.html5.canPlayType('audio/wav') ? emptyWAV : emptyURL;\n        oAudio.src = url;\n\n        if (oAudio._called_unload !== _undefined) {\n          oAudio._called_load = false;\n        }\n      }\n\n      if (useGlobalHTML5Audio) {\n        lastGlobalHTML5URL = null;\n      }\n\n      return url;\n    };\n\n    html5CanPlay = function html5CanPlay(o) {\n      if (!sm2.useHTML5Audio || !sm2.hasHTML5) return false;\n      var url = o.url || null,\n          mime = o.type || null,\n          aF = sm2.audioFormats,\n          result,\n          offset,\n          fileExt,\n          item;\n      if (mime && sm2.html5[mime] !== _undefined) return sm2.html5[mime] && !preferFlashCheck(mime);\n\n      if (!html5Ext) {\n        html5Ext = [];\n\n        for (item in aF) {\n          if (aF.hasOwnProperty(item)) {\n            html5Ext.push(item);\n\n            if (aF[item].related) {\n              html5Ext = html5Ext.concat(aF[item].related);\n            }\n          }\n        }\n\n        html5Ext = new RegExp('\\\\.(' + html5Ext.join('|') + ')(\\\\?.*)?$', 'i');\n      }\n\n      fileExt = url ? url.toLowerCase().match(html5Ext) : null;\n\n      if (!fileExt || !fileExt.length) {\n        if (!mime) {\n          result = false;\n        } else {\n          offset = mime.indexOf(';');\n          fileExt = (offset !== -1 ? mime.substr(0, offset) : mime).substr(6);\n        }\n      } else {\n        fileExt = fileExt[1];\n      }\n\n      if (fileExt && sm2.html5[fileExt] !== _undefined) {\n        result = sm2.html5[fileExt] && !preferFlashCheck(fileExt);\n      } else {\n        mime = 'audio/' + fileExt;\n        result = sm2.html5.canPlayType({\n          type: mime\n        });\n        sm2.html5[fileExt] = result;\n        result = result && sm2.html5[mime] && !preferFlashCheck(mime);\n      }\n\n      return result;\n    };\n\n    testHTML5 = function testHTML5() {\n      if (!sm2.useHTML5Audio || !sm2.hasHTML5) {\n        sm2.html5.usingFlash = true;\n        needsFlash = true;\n        return false;\n      }\n\n      var a = Audio !== _undefined ? isOpera && opera.version() < 10 ? new Audio(null) : new Audio() : null,\n          item,\n          lookup,\n          support = {},\n          aF,\n          i;\n\n      function cp(m) {\n        var canPlay,\n            j,\n            result = false,\n            isOK = false;\n        if (!a || typeof a.canPlayType !== 'function') return result;\n\n        if (m instanceof Array) {\n          for (i = 0, j = m.length; i < j; i++) {\n            if (sm2.html5[m[i]] || a.canPlayType(m[i]).match(sm2.html5Test)) {\n              isOK = true;\n              sm2.html5[m[i]] = true;\n              sm2.flash[m[i]] = !!m[i].match(flashMIME);\n            }\n          }\n\n          result = isOK;\n        } else {\n          canPlay = a && typeof a.canPlayType === 'function' ? a.canPlayType(m) : false;\n          result = !!(canPlay && canPlay.match(sm2.html5Test));\n        }\n\n        return result;\n      }\n\n      aF = sm2.audioFormats;\n\n      for (item in aF) {\n        if (aF.hasOwnProperty(item)) {\n          lookup = 'audio/' + item;\n          support[item] = cp(aF[item].type);\n          support[lookup] = support[item];\n\n          if (item.match(flashMIME)) {\n            sm2.flash[item] = true;\n            sm2.flash[lookup] = true;\n          } else {\n            sm2.flash[item] = false;\n            sm2.flash[lookup] = false;\n          }\n\n          if (aF[item] && aF[item].related) {\n            for (i = aF[item].related.length - 1; i >= 0; i--) {\n              support['audio/' + aF[item].related[i]] = support[item];\n              sm2.html5[aF[item].related[i]] = support[item];\n              sm2.flash[aF[item].related[i]] = support[item];\n            }\n          }\n        }\n      }\n\n      support.canPlayType = a ? cp : null;\n      sm2.html5 = _mixin(sm2.html5, support);\n      sm2.html5.usingFlash = featureCheck();\n      needsFlash = sm2.html5.usingFlash;\n      return true;\n    };\n\n    strings = {};\n\n    str = function str() {};\n\n    loopFix = function loopFix(sOpt) {\n      if (fV === 8 && sOpt.loops > 1 && sOpt.stream) {\n        sOpt.stream = false;\n      }\n\n      return sOpt;\n    };\n\n    policyFix = function policyFix(sOpt, sPre) {\n      if (sOpt && !sOpt.usePolicyFile && (sOpt.onid3 || sOpt.usePeakData || sOpt.useWaveformData || sOpt.useEQData)) {\n        sOpt.usePolicyFile = true;\n      }\n\n      return sOpt;\n    };\n\n    complain = function complain(sMsg) {};\n\n    doNothing = function doNothing() {\n      return false;\n    };\n\n    disableObject = function disableObject(o) {\n      var oProp;\n\n      for (oProp in o) {\n        if (o.hasOwnProperty(oProp) && typeof o[oProp] === 'function') {\n          o[oProp] = doNothing;\n        }\n      }\n\n      oProp = null;\n    };\n\n    failSafely = function failSafely(bNoDisable) {\n      if (bNoDisable === _undefined) {\n        bNoDisable = false;\n      }\n\n      if (disabled || bNoDisable) {\n        sm2.disable(bNoDisable);\n      }\n    };\n\n    normalizeMovieURL = function normalizeMovieURL(movieURL) {\n      var urlParams = null,\n          url;\n\n      if (movieURL) {\n        if (movieURL.match(/\\.swf(\\?.*)?$/i)) {\n          urlParams = movieURL.substr(movieURL.toLowerCase().lastIndexOf('.swf?') + 4);\n          if (urlParams) return movieURL;\n        } else if (movieURL.lastIndexOf('/') !== movieURL.length - 1) {\n          movieURL += '/';\n        }\n      }\n\n      url = (movieURL && movieURL.lastIndexOf('/') !== -1 ? movieURL.substr(0, movieURL.lastIndexOf('/') + 1) : './') + sm2.movieURL;\n\n      if (sm2.noSWFCache) {\n        url += '?ts=' + new Date().getTime();\n      }\n\n      return url;\n    };\n\n    setVersionInfo = function setVersionInfo() {\n      fV = parseInt(sm2.flashVersion, 10);\n\n      if (fV !== 8 && fV !== 9) {\n        sm2.flashVersion = fV = defaultFlashVersion;\n      }\n\n      var isDebug = sm2.debugMode || sm2.debugFlash ? '_debug.swf' : '.swf';\n\n      if (sm2.useHTML5Audio && !sm2.html5Only && sm2.audioFormats.mp4.required && fV < 9) {\n        sm2.flashVersion = fV = 9;\n      }\n\n      sm2.version = sm2.versionNumber + (sm2.html5Only ? ' (HTML5-only mode)' : fV === 9 ? ' (AS3/Flash 9)' : ' (AS2/Flash 8)');\n\n      if (fV > 8) {\n        sm2.defaultOptions = _mixin(sm2.defaultOptions, sm2.flash9Options);\n        sm2.features.buffering = true;\n        sm2.defaultOptions = _mixin(sm2.defaultOptions, sm2.movieStarOptions);\n        sm2.filePatterns.flash9 = new RegExp('\\\\.(mp3|' + netStreamTypes.join('|') + ')(\\\\?.*)?$', 'i');\n        sm2.features.movieStar = true;\n      } else {\n        sm2.features.movieStar = false;\n      }\n\n      sm2.filePattern = sm2.filePatterns[fV !== 8 ? 'flash9' : 'flash8'];\n      sm2.movieURL = (fV === 8 ? 'soundmanager2.swf' : 'soundmanager2_flash9.swf').replace('.swf', isDebug);\n      sm2.features.peakData = sm2.features.waveformData = sm2.features.eqData = fV > 8;\n    };\n\n    setPolling = function setPolling(bPolling, bHighPerformance) {\n      if (!flash) {\n        return;\n      }\n\n      flash._setPolling(bPolling, bHighPerformance);\n    };\n\n    initDebug = function initDebug() {};\n\n    idCheck = this.getSoundById;\n\n    getSWFCSS = function getSWFCSS() {\n      var css = [];\n\n      if (sm2.debugMode) {\n        css.push(swfCSS.sm2Debug);\n      }\n\n      if (sm2.debugFlash) {\n        css.push(swfCSS.flashDebug);\n      }\n\n      if (sm2.useHighPerformance) {\n        css.push(swfCSS.highPerf);\n      }\n\n      return css.join(' ');\n    };\n\n    flashBlockHandler = function flashBlockHandler() {\n      var name = str('fbHandler'),\n          p = sm2.getMoviePercent(),\n          css = swfCSS,\n          error = {\n        type: 'FLASHBLOCK'\n      };\n\n      if (sm2.html5Only) {\n        return;\n      }\n\n      if (!sm2.ok()) {\n        if (needsFlash) {\n          sm2.oMC.className = getSWFCSS() + ' ' + css.swfDefault + ' ' + (p === null ? css.swfTimedout : css.swfError);\n        }\n\n        sm2.didFlashBlock = true;\n        processOnEvents({\n          type: 'ontimeout',\n          ignoreInit: true,\n          error: error\n        });\n        catchError(error);\n      } else {\n        if (sm2.oMC) {\n          sm2.oMC.className = [getSWFCSS(), css.swfDefault, css.swfLoaded + (sm2.didFlashBlock ? ' ' + css.swfUnblocked : '')].join(' ');\n        }\n      }\n    };\n\n    addOnEvent = function addOnEvent(sType, oMethod, oScope) {\n      if (on_queue[sType] === _undefined) {\n        on_queue[sType] = [];\n      }\n\n      on_queue[sType].push({\n        method: oMethod,\n        scope: oScope || null,\n        fired: false\n      });\n    };\n\n    processOnEvents = function processOnEvents(oOptions) {\n      if (!oOptions) {\n        oOptions = {\n          type: sm2.ok() ? 'onready' : 'ontimeout'\n        };\n      }\n\n      if (!didInit && oOptions && !oOptions.ignoreInit) return false;\n      if (oOptions.type === 'ontimeout' && (sm2.ok() || disabled && !oOptions.ignoreInit)) return false;\n      var status = {\n        success: oOptions && oOptions.ignoreInit ? sm2.ok() : !disabled\n      },\n          srcQueue = oOptions && oOptions.type ? on_queue[oOptions.type] || [] : [],\n          queue = [],\n          i,\n          j,\n          args = [status],\n          canRetry = needsFlash && !sm2.ok();\n\n      if (oOptions.error) {\n        args[0].error = oOptions.error;\n      }\n\n      for (i = 0, j = srcQueue.length; i < j; i++) {\n        if (srcQueue[i].fired !== true) {\n          queue.push(srcQueue[i]);\n        }\n      }\n\n      if (queue.length) {\n        for (i = 0, j = queue.length; i < j; i++) {\n          if (queue[i].scope) {\n            queue[i].method.apply(queue[i].scope, args);\n          } else {\n            queue[i].method.apply(this, args);\n          }\n\n          if (!canRetry) {\n            queue[i].fired = true;\n          }\n        }\n      }\n\n      return true;\n    };\n\n    _initUserOnload = function initUserOnload() {\n      window.setTimeout(function () {\n        if (sm2.useFlashBlock) {\n          flashBlockHandler();\n        }\n\n        processOnEvents();\n\n        if (typeof sm2.onload === 'function') {\n          sm2.onload.apply(window);\n        }\n\n        if (sm2.waitForWindowLoad) {\n          event.add(window, 'load', _initUserOnload);\n        }\n      }, 1);\n    };\n\n    detectFlash = function detectFlash() {\n      if (hasFlash !== _undefined) return hasFlash;\n      var hasPlugin = false,\n          n = navigator,\n          obj,\n          type,\n          types,\n          AX = window.ActiveXObject;\n      var nP;\n\n      try {\n        nP = n.plugins;\n      } catch (e) {\n        nP = undefined;\n      }\n\n      if (nP && nP.length) {\n        type = 'application/x-shockwave-flash';\n        types = n.mimeTypes;\n\n        if (types && types[type] && types[type].enabledPlugin && types[type].enabledPlugin.description) {\n          hasPlugin = true;\n        }\n      } else if (AX !== _undefined && !ua.match(/MSAppHost/i)) {\n        try {\n          obj = new AX('ShockwaveFlash.ShockwaveFlash');\n        } catch (e) {\n          obj = null;\n        }\n\n        hasPlugin = !!obj;\n        obj = null;\n      }\n\n      hasFlash = hasPlugin;\n      return hasPlugin;\n    };\n\n    featureCheck = function featureCheck() {\n      var flashNeeded,\n          item,\n          formats = sm2.audioFormats,\n          isSpecial = is_iDevice && !!ua.match(/os (1|2|3_0|3_1)\\s/i);\n\n      if (isSpecial) {\n        sm2.hasHTML5 = false;\n        sm2.html5Only = true;\n\n        if (sm2.oMC) {\n          sm2.oMC.style.display = 'none';\n        }\n      } else if (sm2.useHTML5Audio) {\n        if (!sm2.html5 || !sm2.html5.canPlayType) {\n          sm2.hasHTML5 = false;\n        }\n      }\n\n      if (sm2.useHTML5Audio && sm2.hasHTML5) {\n        canIgnoreFlash = true;\n\n        for (item in formats) {\n          if (formats.hasOwnProperty(item)) {\n            if (formats[item].required) {\n              if (!sm2.html5.canPlayType(formats[item].type)) {\n                canIgnoreFlash = false;\n                flashNeeded = true;\n              } else if (sm2.preferFlash && (sm2.flash[item] || sm2.flash[formats[item].type])) {\n                flashNeeded = true;\n              }\n            }\n          }\n        }\n      }\n\n      if (sm2.ignoreFlash) {\n        flashNeeded = false;\n        canIgnoreFlash = true;\n      }\n\n      sm2.html5Only = sm2.hasHTML5 && sm2.useHTML5Audio && !flashNeeded;\n      return !sm2.html5Only;\n    };\n\n    parseURL = function parseURL(url) {\n      var i,\n          j,\n          urlResult = 0,\n          result;\n\n      if (url instanceof Array) {\n        for (i = 0, j = url.length; i < j; i++) {\n          if (url[i] instanceof Object) {\n            if (sm2.canPlayMIME(url[i].type)) {\n              urlResult = i;\n              break;\n            }\n          } else if (sm2.canPlayURL(url[i])) {\n            urlResult = i;\n            break;\n          }\n        }\n\n        if (url[urlResult].url) {\n          url[urlResult] = url[urlResult].url;\n        }\n\n        result = url[urlResult];\n      } else {\n        result = url;\n      }\n\n      return result;\n    };\n\n    startTimer = function startTimer(oSound) {\n      if (!oSound._hasTimer) {\n        oSound._hasTimer = true;\n\n        if (!mobileHTML5 && sm2.html5PollingInterval) {\n          if (h5IntervalTimer === null && h5TimerCount === 0) {\n            h5IntervalTimer = setInterval(timerExecute, sm2.html5PollingInterval);\n          }\n\n          h5TimerCount++;\n        }\n      }\n    };\n\n    stopTimer = function stopTimer(oSound) {\n      if (oSound._hasTimer) {\n        oSound._hasTimer = false;\n\n        if (!mobileHTML5 && sm2.html5PollingInterval) {\n          h5TimerCount--;\n        }\n      }\n    };\n\n    timerExecute = function timerExecute() {\n      var i;\n\n      if (h5IntervalTimer !== null && !h5TimerCount) {\n        clearInterval(h5IntervalTimer);\n        h5IntervalTimer = null;\n        return;\n      }\n\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\n        if (sm2.sounds[sm2.soundIDs[i]].isHTML5 && sm2.sounds[sm2.soundIDs[i]]._hasTimer) {\n          sm2.sounds[sm2.soundIDs[i]]._onTimer();\n        }\n      }\n    };\n\n    catchError = function catchError(options) {\n      options = options !== _undefined ? options : {};\n\n      if (typeof sm2.onerror === 'function') {\n        sm2.onerror.apply(window, [{\n          type: options.type !== _undefined ? options.type : null\n        }]);\n      }\n\n      if (options.fatal !== _undefined && options.fatal) {\n        sm2.disable();\n      }\n    };\n\n    badSafariFix = function badSafariFix() {\n      if (!isBadSafari || !detectFlash()) {\n        return;\n      }\n\n      var aF = sm2.audioFormats,\n          i,\n          item;\n\n      for (item in aF) {\n        if (aF.hasOwnProperty(item)) {\n          if (item === 'mp3' || item === 'mp4') {\n            sm2.html5[item] = false;\n\n            if (aF[item] && aF[item].related) {\n              for (i = aF[item].related.length - 1; i >= 0; i--) {\n                sm2.html5[aF[item].related[i]] = false;\n              }\n            }\n          }\n        }\n      }\n    };\n\n    this._setSandboxType = function (sandboxType) {};\n\n    this._externalInterfaceOK = function (swfVersion) {\n      if (sm2.swfLoaded) {\n        return;\n      }\n\n      var e;\n      sm2.swfLoaded = true;\n      tryInitOnFocus = false;\n\n      if (isBadSafari) {\n        badSafariFix();\n      }\n\n      setTimeout(init, isIE ? 100 : 1);\n    };\n\n    createMovie = function createMovie(movieID, movieURL) {\n      if (didAppend && appendSuccess) return false;\n\n      function initMsg() {}\n\n      if (sm2.html5Only) {\n        setVersionInfo();\n        initMsg();\n        sm2.oMC = id(sm2.movieID);\n        init();\n        didAppend = true;\n        appendSuccess = true;\n        return false;\n      }\n\n      var remoteURL = movieURL || sm2.url,\n          localURL = sm2.altURL || remoteURL,\n          swfTitle = 'JS/Flash audio component (SoundManager 2)',\n          oTarget = getDocument(),\n          extraClass = getSWFCSS(),\n          isRTL = null,\n          html = doc.getElementsByTagName('html')[0],\n          oEmbed,\n          oMovie,\n          tmp,\n          movieHTML,\n          oEl,\n          s,\n          x,\n          sClass;\n      isRTL = html && html.dir && html.dir.match(/rtl/i);\n      movieID = movieID === _undefined ? sm2.id : movieID;\n\n      function param(name, value) {\n        return '<param name=\"' + name + '\" value=\"' + value + '\" />';\n      }\n\n      setVersionInfo();\n      sm2.url = normalizeMovieURL(overHTTP ? remoteURL : localURL);\n      movieURL = sm2.url;\n      sm2.wmode = !sm2.wmode && sm2.useHighPerformance ? 'transparent' : sm2.wmode;\n\n      if (sm2.wmode !== null && (ua.match(/msie 8/i) || !isIE && !sm2.useHighPerformance) && navigator.platform.match(/win32|win64/i)) {\n        messages.push(strings.spcWmode);\n        sm2.wmode = null;\n      }\n\n      oEmbed = {\n        name: movieID,\n        id: movieID,\n        src: movieURL,\n        quality: 'high',\n        allowScriptAccess: sm2.allowScriptAccess,\n        bgcolor: sm2.bgColor,\n        pluginspage: http + 'www.macromedia.com/go/getflashplayer',\n        title: swfTitle,\n        type: 'application/x-shockwave-flash',\n        wmode: sm2.wmode,\n        hasPriority: 'true'\n      };\n\n      if (sm2.debugFlash) {\n        oEmbed.FlashVars = 'debug=1';\n      }\n\n      if (!sm2.wmode) {\n        delete oEmbed.wmode;\n      }\n\n      if (isIE) {\n        oMovie = doc.createElement('div');\n        movieHTML = ['<object id=\"' + movieID + '\" data=\"' + movieURL + '\" type=\"' + oEmbed.type + '\" title=\"' + oEmbed.title + '\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\">', param('movie', movieURL), param('AllowScriptAccess', sm2.allowScriptAccess), param('quality', oEmbed.quality), sm2.wmode ? param('wmode', sm2.wmode) : '', param('bgcolor', sm2.bgColor), param('hasPriority', 'true'), sm2.debugFlash ? param('FlashVars', oEmbed.FlashVars) : '', '</object>'].join('');\n      } else {\n        oMovie = doc.createElement('embed');\n\n        for (tmp in oEmbed) {\n          if (oEmbed.hasOwnProperty(tmp)) {\n            oMovie.setAttribute(tmp, oEmbed[tmp]);\n          }\n        }\n      }\n\n      initDebug();\n      extraClass = getSWFCSS();\n      oTarget = getDocument();\n\n      if (oTarget) {\n        sm2.oMC = id(sm2.movieID) || doc.createElement('div');\n\n        if (!sm2.oMC.id) {\n          sm2.oMC.id = sm2.movieID;\n          sm2.oMC.className = swfCSS.swfDefault + ' ' + extraClass;\n          s = null;\n          oEl = null;\n\n          if (!sm2.useFlashBlock) {\n            if (sm2.useHighPerformance) {\n              s = {\n                position: 'fixed',\n                width: '8px',\n                height: '8px',\n                bottom: '0px',\n                left: '0px',\n                overflow: 'hidden'\n              };\n            } else {\n              s = {\n                position: 'absolute',\n                width: '6px',\n                height: '6px',\n                top: '-9999px',\n                left: '-9999px'\n              };\n\n              if (isRTL) {\n                s.left = Math.abs(parseInt(s.left, 10)) + 'px';\n              }\n            }\n          }\n\n          if (isWebkit) {\n            sm2.oMC.style.zIndex = 10000;\n          }\n\n          if (!sm2.debugFlash) {\n            for (x in s) {\n              if (s.hasOwnProperty(x)) {\n                sm2.oMC.style[x] = s[x];\n              }\n            }\n          }\n\n          try {\n            if (!isIE) {\n              sm2.oMC.appendChild(oMovie);\n            }\n\n            oTarget.appendChild(sm2.oMC);\n\n            if (isIE) {\n              oEl = sm2.oMC.appendChild(doc.createElement('div'));\n              oEl.className = swfCSS.swfBox;\n              oEl.innerHTML = movieHTML;\n            }\n\n            appendSuccess = true;\n          } catch (e) {\n            throw new Error(str('domError') + ' \\n' + e.toString());\n          }\n        } else {\n          sClass = sm2.oMC.className;\n          sm2.oMC.className = (sClass ? sClass + ' ' : swfCSS.swfDefault) + (extraClass ? ' ' + extraClass : '');\n          sm2.oMC.appendChild(oMovie);\n\n          if (isIE) {\n            oEl = sm2.oMC.appendChild(doc.createElement('div'));\n            oEl.className = swfCSS.swfBox;\n            oEl.innerHTML = movieHTML;\n          }\n\n          appendSuccess = true;\n        }\n      }\n\n      didAppend = true;\n      initMsg();\n      return true;\n    };\n\n    initMovie = function initMovie() {\n      if (sm2.html5Only) {\n        createMovie();\n        return false;\n      }\n\n      if (flash) return false;\n\n      if (!sm2.url) {\n        return false;\n      }\n\n      flash = sm2.getMovie(sm2.id);\n\n      if (!flash) {\n        if (!oRemoved) {\n          createMovie(sm2.id, sm2.url);\n        } else {\n          if (!isIE) {\n            sm2.oMC.appendChild(oRemoved);\n          } else {\n            sm2.oMC.innerHTML = oRemovedHTML;\n          }\n\n          oRemoved = null;\n          didAppend = true;\n        }\n\n        flash = sm2.getMovie(sm2.id);\n      }\n\n      if (typeof sm2.oninitmovie === 'function') {\n        setTimeout(sm2.oninitmovie, 1);\n      }\n\n      return true;\n    };\n\n    delayWaitForEI = function delayWaitForEI() {\n      setTimeout(waitForEI, 1000);\n    };\n\n    rebootIntoHTML5 = function rebootIntoHTML5() {\n      window.setTimeout(function () {\n        sm2.setup({\n          preferFlash: false\n        }).reboot();\n        sm2.didFlashBlock = true;\n        sm2.beginDelayedInit();\n      }, 1);\n    };\n\n    waitForEI = function waitForEI() {\n      var p,\n          loadIncomplete = false;\n\n      if (!sm2.url) {\n        return;\n      }\n\n      if (waitingForEI) {\n        return;\n      }\n\n      waitingForEI = true;\n      event.remove(window, 'load', delayWaitForEI);\n\n      if (hasFlash && tryInitOnFocus && !isFocused) {\n        return;\n      }\n\n      if (!didInit) {\n        p = sm2.getMoviePercent();\n\n        if (p > 0 && p < 100) {\n          loadIncomplete = true;\n        }\n      }\n\n      setTimeout(function () {\n        p = sm2.getMoviePercent();\n\n        if (loadIncomplete) {\n          waitingForEI = false;\n          window.setTimeout(delayWaitForEI, 1);\n          return;\n        }\n\n        if (!didInit && okToDisable) {\n          if (p === null) {\n            if (sm2.useFlashBlock || sm2.flashLoadTimeout === 0) {\n              if (sm2.useFlashBlock) {\n                flashBlockHandler();\n              }\n            } else if (!sm2.useFlashBlock && canIgnoreFlash) {\n              rebootIntoHTML5();\n            } else {\n              processOnEvents({\n                type: 'ontimeout',\n                ignoreInit: true,\n                error: {\n                  type: 'INIT_FLASHBLOCK'\n                }\n              });\n            }\n          } else if (sm2.flashLoadTimeout === 0) {} else if (!sm2.useFlashBlock && canIgnoreFlash) {\n            rebootIntoHTML5();\n          } else {\n            failSafely(true);\n          }\n        }\n      }, sm2.flashLoadTimeout);\n    };\n\n    _handleFocus = function handleFocus() {\n      function cleanup() {\n        event.remove(window, 'focus', _handleFocus);\n      }\n\n      if (isFocused || !tryInitOnFocus) {\n        cleanup();\n        return true;\n      }\n\n      okToDisable = true;\n      isFocused = true;\n      waitingForEI = false;\n      delayWaitForEI();\n      cleanup();\n      return true;\n    };\n\n    flushMessages = function flushMessages() {};\n\n    showSupport = function showSupport() {};\n\n    initComplete = function initComplete(bNoDisable) {\n      if (didInit) return false;\n\n      if (sm2.html5Only) {\n        didInit = true;\n\n        _initUserOnload();\n\n        return true;\n      }\n\n      var wasTimeout = sm2.useFlashBlock && sm2.flashLoadTimeout && !sm2.getMoviePercent(),\n          result = true,\n          error;\n\n      if (!wasTimeout) {\n        didInit = true;\n      }\n\n      error = {\n        type: !hasFlash && needsFlash ? 'NO_FLASH' : 'INIT_TIMEOUT'\n      };\n\n      if (disabled || bNoDisable) {\n        if (sm2.useFlashBlock && sm2.oMC) {\n          sm2.oMC.className = getSWFCSS() + ' ' + (sm2.getMoviePercent() === null ? swfCSS.swfTimedout : swfCSS.swfError);\n        }\n\n        processOnEvents({\n          type: 'ontimeout',\n          error: error,\n          ignoreInit: true\n        });\n        catchError(error);\n        result = false;\n      } else {}\n\n      if (!disabled) {\n        if (sm2.waitForWindowLoad && !windowLoaded) {\n          event.add(window, 'load', _initUserOnload);\n        } else {\n          _initUserOnload();\n        }\n      }\n\n      return result;\n    };\n\n    setProperties = function setProperties() {\n      var i,\n          o = sm2.setupOptions;\n\n      for (i in o) {\n        if (o.hasOwnProperty(i)) {\n          if (sm2[i] === _undefined) {\n            sm2[i] = o[i];\n          } else if (sm2[i] !== o[i]) {\n            sm2.setupOptions[i] = sm2[i];\n          }\n        }\n      }\n    };\n\n    init = function init() {\n      if (didInit) {\n        return false;\n      }\n\n      function cleanup() {\n        event.remove(window, 'load', sm2.beginDelayedInit);\n      }\n\n      if (sm2.html5Only) {\n        if (!didInit) {\n          cleanup();\n          sm2.enabled = true;\n          initComplete();\n        }\n\n        return true;\n      }\n\n      initMovie();\n\n      try {\n        flash._externalInterfaceTest(false);\n\n        setPolling(true, sm2.flashPollingInterval || (sm2.useHighPerformance ? 10 : 50));\n\n        if (!sm2.debugMode) {\n          flash._disableDebug();\n        }\n\n        sm2.enabled = true;\n\n        if (!sm2.html5Only) {\n          event.add(window, 'unload', doNothing);\n        }\n      } catch (e) {\n        catchError({\n          type: 'JS_TO_FLASH_EXCEPTION',\n          fatal: true\n        });\n        failSafely(true);\n        initComplete();\n        return false;\n      }\n\n      initComplete();\n      cleanup();\n      return true;\n    };\n\n    _domContentLoaded = function domContentLoaded() {\n      if (didDCLoaded) return false;\n      didDCLoaded = true;\n      setProperties();\n      initDebug();\n\n      if (!hasFlash && sm2.hasHTML5) {\n        sm2.setup({\n          useHTML5Audio: true,\n          preferFlash: false\n        });\n      }\n\n      testHTML5();\n\n      if (!hasFlash && needsFlash) {\n        messages.push(strings.needFlash);\n        sm2.setup({\n          flashLoadTimeout: 1\n        });\n      }\n\n      if (doc.removeEventListener) {\n        doc.removeEventListener('DOMContentLoaded', _domContentLoaded, false);\n      }\n\n      initMovie();\n      return true;\n    };\n\n    _domContentLoadedIE = function domContentLoadedIE() {\n      if (doc.readyState === 'complete') {\n        _domContentLoaded();\n\n        doc.detachEvent('onreadystatechange', _domContentLoadedIE);\n      }\n\n      return true;\n    };\n\n    _winOnLoad = function winOnLoad() {\n      windowLoaded = true;\n\n      _domContentLoaded();\n\n      event.remove(window, 'load', _winOnLoad);\n    };\n\n    detectFlash();\n    event.add(window, 'focus', _handleFocus);\n    event.add(window, 'load', delayWaitForEI);\n    event.add(window, 'load', _winOnLoad);\n\n    if (doc.addEventListener) {\n      doc.addEventListener('DOMContentLoaded', _domContentLoaded, false);\n    } else if (doc.attachEvent) {\n      doc.attachEvent('onreadystatechange', _domContentLoadedIE);\n    } else {\n      catchError({\n        type: 'NO_DOM2_EVENTS',\n        fatal: true\n      });\n    }\n  } // SM2_DEFER details: http://www.schillmania.com/projects/soundmanager2/doc/getstarted/#lazy-loading\n\n\n  if (window.SM2_DEFER === _undefined || !SM2_DEFER) {\n    soundManager = new SoundManager();\n  }\n\n  if (typeof module === 'object' && module && typeof module.exports === 'object') {\n    module.exports.SoundManager = SoundManager;\n    module.exports.soundManager = soundManager;\n  } else if (typeof define === 'function' && define.amd) {\n    define(function () {\n      function getInstance(smBuilder) {\n        if (!window.soundManager && smBuilder instanceof Function) {\n          var instance = smBuilder(SoundManager);\n\n          if (instance instanceof SoundManager) {\n            window.soundManager = instance;\n          }\n        }\n\n        return window.soundManager;\n      }\n\n      return {\n        constructor: SoundManager,\n        getInstance: getInstance\n      };\n    });\n  } // standard browser case\n  // constructor\n\n\n  window.SoundManager = SoundManager; // public API, flash callbacks etc.\n\n  window.soundManager = soundManager;\n})(window);","map":{"version":3,"sources":["/Users/csoutter/Documents/COMP 580/escape580/node_modules/soundmanager2/script/soundmanager2-nodebug.js"],"names":["SM2","window","_undefined","document","Error","soundManager","SoundManager","smURL","smID","setupOptions","url","flashVersion","debugMode","debugFlash","useConsole","consoleOnly","waitForWindowLoad","bgColor","useHighPerformance","flashPollingInterval","html5PollingInterval","flashLoadTimeout","wmode","allowScriptAccess","useFlashBlock","useHTML5Audio","forceUseGlobalHTML5Audio","ignoreMobileRestrictions","html5Test","preferFlash","noSWFCache","idPrefix","defaultOptions","autoLoad","autoPlay","from","loops","onid3","onerror","onload","whileloading","onplay","onpause","onresume","whileplaying","onposition","onstop","onfinish","multiShot","multiShotEvents","position","pan","playbackRate","stream","to","type","usePolicyFile","volume","flash9Options","onfailure","isMovieStar","usePeakData","useWaveformData","useEQData","onbufferchange","ondataerror","movieStarOptions","bufferTime","serverURL","onconnect","duration","audioFormats","mp3","required","mp4","related","ogg","opus","wav","flac","movieID","id","debugID","debugURLParam","versionNumber","version","movieURL","altURL","swfLoaded","enabled","oMC","sounds","soundIDs","muted","didFlashBlock","filePattern","filePatterns","flash8","flash9","features","buffering","peakData","waveformData","eqData","movieStar","sandbox","html5","usingFlash","flash","html5Only","ignoreFlash","SMSound","sm2","globalHTML5Audio","sm","smc","h5","ua","navigator","userAgent","wl","location","href","toString","doc","doNothing","setProperties","init","fV","on_queue","debugOpen","debugTS","didAppend","appendSuccess","didInit","disabled","windowLoaded","_wDS","wdCount","initComplete","mixin","assign","extraOptions","addOnEvent","processOnEvents","initUserOnload","delayWaitForEI","waitForEI","rebootIntoHTML5","setVersionInfo","handleFocus","strings","initMovie","domContentLoaded","winOnLoad","didDCLoaded","getDocument","createMovie","catchError","setPolling","initDebug","debugLevels","defaultFlashVersion","disableObject","failSafely","normalizeMovieURL","oRemoved","oRemovedHTML","str","flashBlockHandler","getSWFCSS","swfCSS","toggleDebug","loopFix","policyFix","complain","idCheck","waitingForEI","initPending","startTimer","stopTimer","timerExecute","h5TimerCount","h5IntervalTimer","parseURL","messages","canIgnoreFlash","needsFlash","featureCheck","html5OK","html5CanPlay","html5ErrorCodes","html5Ext","html5Unload","domContentLoadedIE","testHTML5","event","slice","Array","prototype","useGlobalHTML5Audio","lastGlobalHTML5URL","hasFlash","detectFlash","badSafariFix","html5_events","showSupport","flushMessages","wrapCallback","idCounter","didSetup","msecScale","is_iDevice","match","isAndroid","isIE","isWebkit","isSafari","isOpera","mobileHTML5","isBadSafari","hasConsole","console","log","isFocused","hasFocus","tryInitOnFocus","okToDisable","flashMIME","emptyURL","emptyWAV","overHTTP","protocol","http","netStreamMimeTypes","netStreamTypes","netStreamPattern","RegExp","join","mimePattern","useAltURL","swfBox","swfDefault","swfError","swfTimedout","swfUnblocked","sm2Debug","highPerf","flashDebug","hasHTML5","Audio","opera","canPlayType","e","setup","options","noURL","ok","push","globalHTML5","ignoreMobile","beginDelayedInit","readyState","setTimeout","supported","getMovie","movie_id","createSound","oOptions","_url","cs","cs_string","oSound","make","_setup_html5","_createSound","connected","apply","load","play","destroySound","sID","_bFromSound","oS","i","stop","_iO","unload","length","splice","destruct","onPosition","nPosition","oMethod","oScope","clearOnPosition","result","overloaded","Object","start","setPlaybackRate","rate","allowOverride","setPosition","nMsecOffset","stopAll","hasOwnProperty","pause","pauseAll","resume","resumeAll","togglePause","setPan","nPan","setVolume","nVol","j","isNaN","mute","String","muteAll","unmute","unmuteAll","toggleMute","getMemoryUse","ram","parseInt","_getMemoryUse","disable","bNoDisable","remove","canPlayMIME","sMIME","canPlayURL","sURL","canPlayLink","oLink","getSoundById","_suppressDebug","onready","sType","ontimeout","_writeDebug","sText","sTypeOrObject","_wD","_debug","reboot","resetEvents","excludeInit","k","innerHTML","parentNode","removeChild","fired","reset","getMoviePercent","PercentLoaded","s","resetProperties","add_html5_events","remove_html5_events","stop_html5_timer","start_html5_timer","attachOnPosition","onplay_called","onPositionItems","onPositionFired","detachOnPosition","applyFromTo","lastURL","lastHTML5State","urlOmitted","time","instanceOptions","isHTML5","_a","id3","loaded","playState","_called_load","_html5_canplay","src","autobuffer","preload","_load","fatal","_unload","_bFromSM","_destroySound","_s","_updatePlayState","fN","allowMulti","a","audioClone","onended","oncanplay","startOK","getAutoPlay","setAutoPlay","paused","instanceCount","_oncanplay","_start","onplayerror","_onfinish","currentTime","err","add","Math","max","min","bAll","originalPosition","_onbufferchange","_resetOnPosition","_stop","_onTimer","_setAutoPlay","normalizedRate","position1K","offset","_setPosition","toFixed","_bCallFlash","_pause","bInstanceOnly","_setPan","_bInstanceOnly","_setVolume","hasIO","method","scope","_processOnPosition","item","f","t","end","op","retainPosition","_hasTimer","bytesLoaded","bytesTotal","durationEstimate","buffered","left","right","failures","isBuffering","metadata","bForce","isNew","x","_get_html5_duration","_whileplaying","d","Infinity","_apply_loop","nLoops","loop","dURL","decodeURI","sameURL","_added_events","oEvt","oFn","bCapture","addEventListener","removeEventListener","_onload","nSuccess","loadOK","_onerror","errorCode","description","nIsBuffering","_onsuspend","onsuspend","_onfailure","msg","level","code","_onwarning","onwarning","io_onfinish","_whileloading","nBytesLoaded","nBytesTotal","nDuration","nBufferLength","floor","bufferLength","oPeakData","oWaveformDataLeft","oWaveformDataRight","oEQData","eqLeft","leftPeak","rightPeak","split","leftEQ","rightEQ","_oncaptiondata","oData","captiondata","oncaptiondata","_onmetadata","oMDProps","oMDData","onmetadata","call","_onid3","oID3Props","oID3Data","_onconnect","bSuccess","_ondataerror","sError","body","getElementsByTagName","getElementById","oMain","oAdd","o1","o2","o","callback","oParent","hasParent","bonusOptions","Function","preferFlashCheck","kind","old","attachEvent","evt","getArgs","oArgs","args","len","pop","element","shift","arguments","html5_event","abort","canplay","ee","canplaythrough","durationchange","ended","error","loadeddata","_loaded","loadedmetadata","loadstart","playing","progress","progStr","isProgress","ranges","target","total","ratechange","suspend","stalled","timeupdate","waiting","iO","oAudio","_called_unload","mime","aF","fileExt","concat","toLowerCase","indexOf","substr","lookup","support","cp","m","canPlay","isOK","sOpt","sPre","sMsg","oProp","urlParams","lastIndexOf","Date","getTime","isDebug","replace","bPolling","bHighPerformance","_setPolling","css","name","p","className","ignoreInit","status","success","srcQueue","queue","canRetry","hasPlugin","n","obj","types","AX","ActiveXObject","nP","plugins","undefined","mimeTypes","enabledPlugin","flashNeeded","formats","isSpecial","style","display","urlResult","setInterval","clearInterval","_setSandboxType","sandboxType","_externalInterfaceOK","swfVersion","initMsg","remoteURL","localURL","swfTitle","oTarget","extraClass","isRTL","html","oEmbed","oMovie","tmp","movieHTML","oEl","sClass","dir","param","value","platform","spcWmode","quality","bgcolor","pluginspage","title","hasPriority","FlashVars","createElement","setAttribute","width","height","bottom","overflow","top","abs","zIndex","appendChild","oninitmovie","loadIncomplete","cleanup","wasTimeout","_externalInterfaceTest","_disableDebug","needFlash","detachEvent","SM2_DEFER","module","exports","define","amd","getInstance","smBuilder","instance","constructor"],"mappings":"AAAA;;;;;;;;;;;;AAaC,UAASA,GAAT,CAAaC,MAAb,EAAqBC,UAArB,EAAiC;AAClC;;AACA,MAAI,CAACD,MAAD,IAAW,CAACA,MAAM,CAACE,QAAvB,EAAiC;AAC/B,UAAM,IAAIC,KAAJ,CAAU,mEAAV,CAAN;AACD;;AACD,MAAIC,YAAY,GAAG,IAAnB;;AACA,WAASC,YAAT,CAAsBC,KAAtB,EAA6BC,IAA7B,EAAmC;AACjC,SAAKC,YAAL,GAAoB;AAClBC,MAAAA,GAAG,EAAGH,KAAK,IAAI,IADG;AAElBI,MAAAA,YAAY,EAAE,CAFI;AAGlBC,MAAAA,SAAS,EAAE,IAHO;AAIlBC,MAAAA,UAAU,EAAE,KAJM;AAKlBC,MAAAA,UAAU,EAAE,IALM;AAMlBC,MAAAA,WAAW,EAAE,IANK;AAOlBC,MAAAA,iBAAiB,EAAE,KAPD;AAQlBC,MAAAA,OAAO,EAAE,SARS;AASlBC,MAAAA,kBAAkB,EAAE,KATF;AAUlBC,MAAAA,oBAAoB,EAAE,IAVJ;AAWlBC,MAAAA,oBAAoB,EAAE,IAXJ;AAYlBC,MAAAA,gBAAgB,EAAE,IAZA;AAalBC,MAAAA,KAAK,EAAE,IAbW;AAclBC,MAAAA,iBAAiB,EAAE,QAdD;AAelBC,MAAAA,aAAa,EAAE,KAfG;AAgBlBC,MAAAA,aAAa,EAAE,IAhBG;AAiBlBC,MAAAA,wBAAwB,EAAE,KAjBR;AAkBlBC,MAAAA,wBAAwB,EAAE,KAlBR;AAmBlBC,MAAAA,SAAS,EAAE,qBAnBO;AAoBlBC,MAAAA,WAAW,EAAE,KApBK;AAqBlBC,MAAAA,UAAU,EAAE,KArBM;AAsBlBC,MAAAA,QAAQ,EAAE;AAtBQ,KAApB;AAwBA,SAAKC,cAAL,GAAsB;AACpBC,MAAAA,QAAQ,EAAE,KADU;AAEpBC,MAAAA,QAAQ,EAAE,KAFU;AAGpBC,MAAAA,IAAI,EAAE,IAHc;AAIpBC,MAAAA,KAAK,EAAE,CAJa;AAKpBC,MAAAA,KAAK,EAAE,IALa;AAMpBC,MAAAA,OAAO,EAAE,IANW;AAOpBC,MAAAA,MAAM,EAAE,IAPY;AAQpBC,MAAAA,YAAY,EAAE,IARM;AASpBC,MAAAA,MAAM,EAAE,IATY;AAUpBC,MAAAA,OAAO,EAAE,IAVW;AAWpBC,MAAAA,QAAQ,EAAE,IAXU;AAYpBC,MAAAA,YAAY,EAAE,IAZM;AAapBC,MAAAA,UAAU,EAAE,IAbQ;AAcpBC,MAAAA,MAAM,EAAE,IAdY;AAepBC,MAAAA,QAAQ,EAAE,IAfU;AAgBpBC,MAAAA,SAAS,EAAE,IAhBS;AAiBpBC,MAAAA,eAAe,EAAE,KAjBG;AAkBpBC,MAAAA,QAAQ,EAAE,IAlBU;AAmBpBC,MAAAA,GAAG,EAAE,CAnBe;AAoBpBC,MAAAA,YAAY,EAAE,CApBM;AAqBpBC,MAAAA,MAAM,EAAE,IArBY;AAsBpBC,MAAAA,EAAE,EAAE,IAtBgB;AAuBpBC,MAAAA,IAAI,EAAE,IAvBc;AAwBpBC,MAAAA,aAAa,EAAE,KAxBK;AAyBpBC,MAAAA,MAAM,EAAE;AAzBY,KAAtB;AA2BA,SAAKC,aAAL,GAAqB;AACnBC,MAAAA,SAAS,EAAE,IADQ;AAEnBC,MAAAA,WAAW,EAAE,IAFM;AAGnBC,MAAAA,WAAW,EAAE,KAHM;AAInBC,MAAAA,eAAe,EAAE,KAJE;AAKnBC,MAAAA,SAAS,EAAE,KALQ;AAMnBC,MAAAA,cAAc,EAAE,IANG;AAOnBC,MAAAA,WAAW,EAAE;AAPM,KAArB;AASA,SAAKC,gBAAL,GAAwB;AACtBC,MAAAA,UAAU,EAAE,CADU;AAEtBC,MAAAA,SAAS,EAAE,IAFW;AAGtBC,MAAAA,SAAS,EAAE,IAHW;AAItBC,MAAAA,QAAQ,EAAE;AAJY,KAAxB;AAMA,SAAKC,YAAL,GAAoB;AAClBC,MAAAA,GAAG,EAAE;AACHjB,QAAAA,IAAI,EAAE,CAAC,0BAAD,EAA6B,YAA7B,EAA2C,WAA3C,EAAwD,WAAxD,EAAqE,kBAArE,CADH;AAEHkB,QAAAA,QAAQ,EAAE;AAFP,OADa;AAKlBC,MAAAA,GAAG,EAAE;AACHC,QAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,CADN;AAEHpB,QAAAA,IAAI,EAAE,CAAC,+BAAD,EAAkC,WAAlC,EAA+C,aAA/C,EAA8D,iBAA9D,EAAiF,qBAAjF,CAFH;AAGHkB,QAAAA,QAAQ,EAAE;AAHP,OALa;AAUlBG,MAAAA,GAAG,EAAE;AACHrB,QAAAA,IAAI,EAAE,CAAC,0BAAD,CADH;AAEHkB,QAAAA,QAAQ,EAAE;AAFP,OAVa;AAclBI,MAAAA,IAAI,EAAE;AACJtB,QAAAA,IAAI,EAAE,CAAC,wBAAD,EAA2B,YAA3B,CADF;AAEJkB,QAAAA,QAAQ,EAAE;AAFN,OAdY;AAkBlBK,MAAAA,GAAG,EAAE;AACHvB,QAAAA,IAAI,EAAE,CAAC,uBAAD,EAA0B,WAA1B,EAAuC,YAAvC,EAAqD,aAArD,CADH;AAEHkB,QAAAA,QAAQ,EAAE;AAFP,OAlBa;AAsBlBM,MAAAA,IAAI,EAAE;AACJxB,QAAAA,IAAI,EAAE,CAAC,YAAD,CADF;AAEJkB,QAAAA,QAAQ,EAAE;AAFN;AAtBY,KAApB;AA2BA,SAAKO,OAAL,GAAe,eAAf;AACA,SAAKC,EAAL,GAAWzE,IAAI,IAAI,UAAnB;AACA,SAAK0E,OAAL,GAAe,oBAAf;AACA,SAAKC,aAAL,GAAqB,iBAArB;AACA,SAAKC,aAAL,GAAqB,iBAArB;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,MAAL,GAAc,IAAd;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKC,GAAL,GAAW,IAAX;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,KAAL,GAAa,KAAb;AACA,SAAKC,aAAL,GAAqB,KAArB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,YAAL,GAAoB;AAClBC,MAAAA,MAAM,EAAE,gBADU;AAElBC,MAAAA,MAAM,EAAE;AAFU,KAApB;AAIA,SAAKC,QAAL,GAAgB;AACdC,MAAAA,SAAS,EAAE,KADG;AAEdC,MAAAA,QAAQ,EAAE,KAFI;AAGdC,MAAAA,YAAY,EAAE,KAHA;AAIdC,MAAAA,MAAM,EAAE,KAJM;AAKdC,MAAAA,SAAS,EAAE;AALG,KAAhB;AAOA,SAAKC,OAAL,GAAe,EAAf;AAEA,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE;AADD,KAAb;AAGA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,WAAL,GAAmB,KAAnB;;AACA,QAAIC,OAAJ;AAAA,QACAC,GAAG,GAAG,IADN;AAAA,QACYC,gBAAgB,GAAG,IAD/B;AAAA,QACqCL,KAAK,GAAG,IAD7C;AAAA,QACmDM,EAAE,GAAG,cADxD;AAAA,QACwEC,GAAG,GAAGD,EAAE,GAAG,IADnF;AAAA,QACyFE,EAAE,GAAG,SAD9F;AAAA,QACyGnC,EADzG;AAAA,QAC6GoC,EAAE,GAAGC,SAAS,CAACC,SAD5H;AAAA,QACuIC,EAAE,GAAGvH,MAAM,CAACwH,QAAP,CAAgBC,IAAhB,CAAqBC,QAArB,EAD5I;AAAA,QAC6KC,GAAG,GAAGzH,QADnL;AAAA,QAC6L0H,SAD7L;AAAA,QACwMC,aADxM;AAAA,QACuNC,IADvN;AAAA,QAC6NC,EAD7N;AAAA,QACiOC,QAAQ,GAAG,EAD5O;AAAA,QACgPC,SAAS,GAAG,IAD5P;AAAA,QACkQC,OADlQ;AAAA,QAC2QC,SAAS,GAAG,KADvR;AAAA,QAC8RC,aAAa,GAAG,KAD9S;AAAA,QACqTC,OAAO,GAAG,KAD/T;AAAA,QACsUC,QAAQ,GAAG,KADjV;AAAA,QACwVC,YAAY,GAAG,KADvW;AAAA,QAC8WC,IAD9W;AAAA,QACoXC,OAAO,GAAG,CAD9X;AAAA,QACiYC,YADjY;AAAA,QAC+YC,MAD/Y;AAAA,QACsZC,OADtZ;AAAA,QAC8ZC,YAD9Z;AAAA,QAC4aC,UAD5a;AAAA,QACwbC,eADxb;AAAA,QACycC,eADzc;AAAA,QACydC,cADzd;AAAA,QACyeC,SADze;AAAA,QACofC,eADpf;AAAA,QACqgBC,cADrgB;AAAA,QACqhBC,YADrhB;AAAA,QACkiBC,OADliB;AAAA,QAC2iBC,SAD3iB;AAAA,QACsjBC,iBADtjB;AAAA,QACwkBC,UADxkB;AAAA,QACmlBC,WADnlB;AAAA,QACgmBC,WADhmB;AAAA,QAC6mBC,WAD7mB;AAAA,QAC0nBC,UAD1nB;AAAA,QACsoBC,UADtoB;AAAA,QACkpBC,SADlpB;AAAA,QAC6pBC,WAAW,GAAG,CAAC,KAAD,EAAQ,MAAR,EAAgB,MAAhB,EAAwB,OAAxB,CAD3qB;AAAA,QAC6sBC,mBAAmB,GAAG,CADnuB;AAAA,QACsuBC,aADtuB;AAAA,QACqvBC,UADrvB;AAAA,QACiwBC,iBADjwB;AAAA,QACoxBC,QAAQ,GAAG,IAD/xB;AAAA,QACqyBC,YAAY,GAAG,IADpzB;AAAA,QAC0zBC,GAD1zB;AAAA,QAC+zBC,iBAD/zB;AAAA,QACk1BC,SADl1B;AAAA,QAC61BC,MAD71B;AAAA,QACq2BC,WADr2B;AAAA,QACk3BC,OADl3B;AAAA,QAC23BC,SAD33B;AAAA,QACs4BC,QADt4B;AAAA,QACg5BC,OADh5B;AAAA,QACy5BC,YAAY,GAAG,KADx6B;AAAA,QAC+6BC,WAAW,GAAG,KAD77B;AAAA,QACo8BC,UADp8B;AAAA,QACg9BC,SADh9B;AAAA,QAC29BC,YAD39B;AAAA,QACy+BC,YAAY,GAAG,CADx/B;AAAA,QAC2/BC,eAAe,GAAG,IAD7gC;AAAA,QACmhCC,QADnhC;AAAA,QAC6hCC,QAAQ,GAAG,EADxiC;AAAA,QAEAC,cAFA;AAAA,QAEgBC,UAAU,GAAG,IAF7B;AAAA,QAEmCC,YAFnC;AAAA,QAEiDC,OAFjD;AAAA,QAE0DC,YAF1D;AAAA,QAEwEC,eAFxE;AAAA,QAEyFC,QAFzF;AAAA,QAEmGC,WAFnG;AAAA,QAEgHC,mBAFhH;AAAA,QAEoIC,SAFpI;AAAA,QAE+IC,KAF/I;AAAA,QAEsJC,KAAK,GAAGC,KAAK,CAACC,SAAN,CAAgBF,KAF9K;AAAA,QAEqLG,mBAAmB,GAAG,KAF3M;AAAA,QAEkNC,kBAFlN;AAAA,QAEsOC,QAFtO;AAAA,QAEgPC,WAFhP;AAAA,QAE6PC,YAF7P;AAAA,QAE2QC,YAF3Q;AAAA,QAEyRC,WAFzR;AAAA,QAEsSC,aAFtS;AAAA,QAEqTC,YAFrT;AAAA,QAEmUC,SAAS,GAAG,CAF/U;AAAA,QAEkVC,QAFlV;AAAA,QAE4VC,SAAS,GAAG,IAFxW;AAAA,QAGAC,UAAU,GAAG/F,EAAE,CAACgG,KAAH,CAAS,qBAAT,CAHb;AAAA,QAG8CC,SAAS,GAAGjG,EAAE,CAACgG,KAAH,CAAS,UAAT,CAH1D;AAAA,QAGgFE,IAAI,GAAGlG,EAAE,CAACgG,KAAH,CAAS,eAAT,CAHvF;AAAA,QAIAG,QAAQ,GAAGnG,EAAE,CAACgG,KAAH,CAAS,SAAT,CAJX;AAAA,QAKAI,QAAQ,GAAIpG,EAAE,CAACgG,KAAH,CAAS,SAAT,KAAuB,CAAChG,EAAE,CAACgG,KAAH,CAAS,SAAT,CALpC;AAAA,QAMAK,OAAO,GAAIrG,EAAE,CAACgG,KAAH,CAAS,QAAT,CANX;AAAA,QAOAM,WAAW,GAAItG,EAAE,CAACgG,KAAH,CAAS,sBAAT,KAAoCD,UAApC,IAAkDE,SAPjE;AAAA,QAQAM,WAAW,GAAI,CAACpG,EAAE,CAAC6F,KAAH,CAAS,gBAAT,CAAD,IAA+B,CAAC7F,EAAE,CAAC6F,KAAH,CAAS,kBAAT,CAAhC,IAAgEI,QAAhE,IAA4E,CAACpG,EAAE,CAACgG,KAAH,CAAS,OAAT,CAA7E,IAAkGhG,EAAE,CAACgG,KAAH,CAAS,sBAAT,CARjH;AAAA,QASAQ,UAAU,GAAI5N,MAAM,CAAC6N,OAAP,KAAmB5N,UAAnB,IAAiC4N,OAAO,CAACC,GAAR,KAAgB7N,UAT/D;AAAA,QAUA8N,SAAS,GAAIpG,GAAG,CAACqG,QAAJ,KAAiB/N,UAAjB,GAA8B0H,GAAG,CAACqG,QAAJ,EAA9B,GAA+C,IAV5D;AAAA,QAWAC,cAAc,GAAIT,QAAQ,KAAK7F,GAAG,CAACqG,QAAJ,KAAiB/N,UAAjB,IAA+B,CAAC0H,GAAG,CAACqG,QAAJ,EAArC,CAX1B;AAAA,QAYAE,WAAW,GAAG,CAACD,cAZf;AAAA,QAaAE,SAAS,GAAG,wBAbZ;AAAA,QAcAC,QAAQ,GAAG,aAdX;AAAA,QAeAC,QAAQ,GAAG,0FAfX;AAAA,QAgBAC,QAAQ,GAAI3G,GAAG,CAACH,QAAJ,GAAeG,GAAG,CAACH,QAAJ,CAAa+G,QAAb,CAAsBnB,KAAtB,CAA4B,OAA5B,CAAf,GAAsD,IAhBlE;AAAA,QAiBAoB,IAAI,GAAI,CAACF,QAAD,GAAY,IAAZ,GAAmB,EAjB3B;AAAA,QAkBAG,kBAAkB,GAAG,iFAlBrB;AAAA,QAmBAC,cAAc,GAAG,CAAC,OAAD,EAAU,KAAV,EAAiB,KAAjB,EAAwB,KAAxB,EAA+B,KAA/B,EAAsC,KAAtC,EAA6C,KAA7C,EAAoD,KAApD,EAA2D,KAA3D,EAAkE,MAAlE,EAA0E,KAA1E,EAAiF,KAAjF,CAnBjB;AAAA,QAoBAC,gBAAgB,GAAG,IAAIC,MAAJ,CAAW,SAASF,cAAc,CAACG,IAAf,CAAoB,GAApB,CAAT,GAAoC,YAA/C,EAA6D,GAA7D,CApBnB;;AAqBA,SAAKC,WAAL,GAAmB,6CAAnB;AACA,SAAKC,SAAL,GAAiB,CAACT,QAAlB;AACA5D,IAAAA,MAAM,GAAG;AACPsE,MAAAA,MAAM,EAAE,gBADD;AAEPC,MAAAA,UAAU,EAAE,gBAFL;AAGPC,MAAAA,QAAQ,EAAE,WAHH;AAIPC,MAAAA,WAAW,EAAE,cAJN;AAKP5J,MAAAA,SAAS,EAAE,YALJ;AAMP6J,MAAAA,YAAY,EAAE,eANP;AAOPC,MAAAA,QAAQ,EAAE,WAPH;AAQPC,MAAAA,QAAQ,EAAE,kBARH;AASPC,MAAAA,UAAU,EAAE;AATL,KAAT;AAWAzD,IAAAA,eAAe,GAAG,CAChB,IADgB,EAEhB,mBAFgB,EAGhB,mBAHgB,EAIhB,kBAJgB,EAKhB,6BALgB,CAAlB;;AAOA,SAAK0D,QAAL,GAAiB,YAAW;AAC1B,UAAI;AACF,eAAQC,KAAK,KAAKxP,UAAV,IAAwB,CAACwN,OAAO,IAAIiC,KAAK,KAAKzP,UAArB,IAAmCyP,KAAK,CAACtK,OAAN,KAAkB,EAArD,GAA0D,IAAIqK,KAAJ,CAAU,IAAV,CAA1D,GAA4E,IAAIA,KAAJ,EAA7E,EAA0FE,WAA1F,KAA0G1P,UAA1I;AACD,OAFD,CAEE,OAAM2P,CAAN,EAAS;AACT,eAAO,KAAP;AACD;AACF,KANgB,EAAjB;;AAOA,SAAKC,KAAL,GAAa,UAASC,OAAT,EAAkB;AAC7B,UAAIC,KAAK,GAAI,CAAChJ,GAAG,CAACtG,GAAlB;;AACA,UAAIqP,OAAO,KAAK7P,UAAZ,IAA0BoI,OAA1B,IAAqCqD,UAArC,IAAmD3E,GAAG,CAACiJ,EAAJ,EAAnD,KAAgEF,OAAO,CAACpP,YAAR,KAAyBT,UAAzB,IAAuC6P,OAAO,CAACrP,GAAR,KAAgBR,UAAvD,IAAqE6P,OAAO,CAACnO,SAAR,KAAsB1B,UAA3J,CAAJ,EAA4K,CAC3K;;AACD2I,MAAAA,OAAM,CAACkH,OAAD,CAAN;;AACA,UAAI,CAACvD,mBAAL,EAA0B;AACxB,YAAImB,WAAJ,EAAiB;AACf,cAAI,CAAC3G,GAAG,CAACvG,YAAJ,CAAiBkB,wBAAlB,IAA8CqF,GAAG,CAACvG,YAAJ,CAAiBiB,wBAAnE,EAA6F;AAC3F+J,YAAAA,QAAQ,CAACyE,IAAT,CAAc3G,OAAO,CAAC4G,WAAtB;AACA3D,YAAAA,mBAAmB,GAAG,IAAtB;AACD;AACF,SALD,MAKO,IAAIxF,GAAG,CAACvG,YAAJ,CAAiBiB,wBAArB,EAA+C;AACpD+J,UAAAA,QAAQ,CAACyE,IAAT,CAAc3G,OAAO,CAAC4G,WAAtB;AACA3D,UAAAA,mBAAmB,GAAG,IAAtB;AACD;AACF;;AACD,UAAI,CAACU,QAAD,IAAaS,WAAjB,EAA8B;AAC5B,YAAI3G,GAAG,CAACvG,YAAJ,CAAiBkB,wBAArB,EAA+C;AAC7C8J,UAAAA,QAAQ,CAACyE,IAAT,CAAc3G,OAAO,CAAC6G,YAAtB;AACD,SAFD,MAEO;AACLpJ,UAAAA,GAAG,CAACvG,YAAJ,CAAiBgB,aAAjB,GAAiC,IAAjC;AACAuF,UAAAA,GAAG,CAACvG,YAAJ,CAAiBoB,WAAjB,GAA+B,KAA/B;;AACA,cAAIuL,UAAJ,EAAgB;AACdpG,YAAAA,GAAG,CAACF,WAAJ,GAAkB,IAAlB;AACD,WAFD,MAEO,IAAKwG,SAAS,IAAI,CAACjG,EAAE,CAACgG,KAAH,CAAS,gBAAT,CAAf,IAA8C,CAACC,SAAnD,EAA8D;AACnEd,YAAAA,mBAAmB,GAAG,IAAtB;AACD;AACF;AACF;;AACD,UAAIuD,OAAJ,EAAa;AACX,YAAIC,KAAK,IAAIrG,WAAT,IAAwBoG,OAAO,CAACrP,GAAR,KAAgBR,UAA5C,EAAwD;AACtD8G,UAAAA,GAAG,CAACqJ,gBAAJ;AACD;;AACD,YAAI,CAAC1G,WAAD,IAAgBoG,OAAO,CAACrP,GAAR,KAAgBR,UAAhC,IAA8C0H,GAAG,CAAC0I,UAAJ,KAAmB,UAArE,EAAiF;AAC/EC,UAAAA,UAAU,CAAC9G,iBAAD,EAAmB,CAAnB,CAAV;AACD;AACF;;AACDyD,MAAAA,QAAQ,GAAG,IAAX;AACA,aAAOlG,GAAP;AACD,KAvCD;;AAwCA,SAAKiJ,EAAL,GAAU,YAAW;AACnB,aAAQtE,UAAU,GAAIrD,OAAO,IAAI,CAACC,QAAhB,GAA6BvB,GAAG,CAACvF,aAAJ,IAAqBuF,GAAG,CAACyI,QAAxE;AACD,KAFD;;AAGA,SAAKe,SAAL,GAAiB,KAAKP,EAAtB;;AACA,SAAKQ,QAAL,GAAgB,UAASC,QAAT,EAAmB;AACjC,aAAOzL,EAAE,CAACyL,QAAD,CAAF,IAAgB9I,GAAG,CAAC8I,QAAD,CAAnB,IAAiCzQ,MAAM,CAACyQ,QAAD,CAA9C;AACD,KAFD;;AAGA,SAAKC,WAAL,GAAmB,UAASC,QAAT,EAAmBC,IAAnB,EAAyB;AAC1C,UAAIC,EAAJ;AAAA,UAAQC,SAAR;AAAA,UAAmBhB,OAAnB;AAAA,UAA4BiB,MAAM,GAAG,IAArC;;AACA,UAAI,CAAC1I,OAAD,IAAY,CAACtB,GAAG,CAACiJ,EAAJ,EAAjB,EAA2B;AACzB,eAAO,KAAP;AACD;;AACD,UAAIY,IAAI,KAAK3Q,UAAb,EAAyB;AACvB0Q,QAAAA,QAAQ,GAAG;AACT3L,UAAAA,EAAE,EAAE2L,QADK;AAETlQ,UAAAA,GAAG,EAAEmQ;AAFI,SAAX;AAID;;AACDd,MAAAA,OAAO,GAAGnH,MAAK,CAACgI,QAAD,CAAf;AACAb,MAAAA,OAAO,CAACrP,GAAR,GAAc8K,QAAQ,CAACuE,OAAO,CAACrP,GAAT,CAAtB;;AACA,UAAIqP,OAAO,CAAC9K,EAAR,KAAe/E,UAAnB,EAA+B;AAC7B6P,QAAAA,OAAO,CAAC9K,EAAR,GAAa+B,GAAG,CAACvG,YAAJ,CAAiBsB,QAAjB,GAA6BkL,SAAS,EAAnD;AACD;;AACD,UAAIjC,OAAO,CAAC+E,OAAO,CAAC9K,EAAT,EAAa,IAAb,CAAX,EAA+B;AAC7B,eAAO+B,GAAG,CAACrB,MAAJ,CAAWoK,OAAO,CAAC9K,EAAnB,CAAP;AACD;;AACD,eAASgM,IAAT,GAAgB;AACdlB,QAAAA,OAAO,GAAGlF,OAAO,CAACkF,OAAD,CAAjB;AACA/I,QAAAA,GAAG,CAACrB,MAAJ,CAAWoK,OAAO,CAAC9K,EAAnB,IAAyB,IAAI8B,OAAJ,CAAYgJ,OAAZ,CAAzB;AACA/I,QAAAA,GAAG,CAACpB,QAAJ,CAAasK,IAAb,CAAkBH,OAAO,CAAC9K,EAA1B;AACA,eAAO+B,GAAG,CAACrB,MAAJ,CAAWoK,OAAO,CAAC9K,EAAnB,CAAP;AACD;;AACD,UAAI4G,OAAO,CAACkE,OAAD,CAAX,EAAsB;AACpBiB,QAAAA,MAAM,GAAGC,IAAI,EAAb;;AACAD,QAAAA,MAAM,CAACE,YAAP,CAAoBnB,OAApB;AACD,OAHD,MAGO;AACL,YAAI/I,GAAG,CAACH,SAAR,EAAmB;AACjB,iBAAOoK,IAAI,EAAX;AACD;;AACD,YAAIjK,GAAG,CAACN,KAAJ,CAAUC,UAAV,IAAwBoJ,OAAO,CAACrP,GAAhC,IAAuCqP,OAAO,CAACrP,GAAR,CAAY2M,KAAZ,CAAkB,QAAlB,CAA3C,EAAwE;AACtE,iBAAO4D,IAAI,EAAX;AACD;;AACD,YAAIjJ,EAAE,GAAG,CAAT,EAAY;AACV,cAAI+H,OAAO,CAACnM,WAAR,KAAwB,IAA5B,EAAkC;AAChCmM,YAAAA,OAAO,CAACnM,WAAR,GAAsB,CAAC,EAAEmM,OAAO,CAAC3L,SAAR,KAAsB2L,OAAO,CAACxM,IAAR,GAAewM,OAAO,CAACxM,IAAR,CAAa8J,KAAb,CAAmBqB,kBAAnB,CAAf,GAAwD,KAA9E,KAAyFqB,OAAO,CAACrP,GAAR,IAAeqP,OAAO,CAACrP,GAAR,CAAY2M,KAAZ,CAAkBuB,gBAAlB,CAA1G,CAAvB;AACD;AACF;;AACDmB,QAAAA,OAAO,GAAGjF,SAAS,CAACiF,OAAD,EAAUe,EAAV,CAAnB;AACAE,QAAAA,MAAM,GAAGC,IAAI,EAAb;;AACA,YAAIjJ,EAAE,KAAK,CAAX,EAAc;AACZpB,UAAAA,KAAK,CAACuK,YAAN,CAAmBpB,OAAO,CAAC9K,EAA3B,EAA+B8K,OAAO,CAAC3N,KAAR,IAAiB,CAAhD,EAAmD2N,OAAO,CAACvM,aAA3D;AACD,SAFD,MAEO;AACLoD,UAAAA,KAAK,CAACuK,YAAN,CAAmBpB,OAAO,CAAC9K,EAA3B,EAA+B8K,OAAO,CAACrP,GAAvC,EAA4CqP,OAAO,CAAClM,WAApD,EAAiEkM,OAAO,CAACjM,eAAzE,EAA0FiM,OAAO,CAAChM,SAAlG,EAA6GgM,OAAO,CAACnM,WAArH,EAAmImM,OAAO,CAACnM,WAAR,GAAsBmM,OAAO,CAAC5L,UAA9B,GAA2C,KAA9K,EAAsL4L,OAAO,CAAC3N,KAAR,IAAiB,CAAvM,EAA0M2N,OAAO,CAAC3L,SAAlN,EAA6N2L,OAAO,CAACzL,QAAR,IAAoB,IAAjP,EAAuPyL,OAAO,CAAC7N,QAA/P,EAAyQ,IAAzQ,EAA+Q6N,OAAO,CAAC9N,QAAvR,EAAiS8N,OAAO,CAACvM,aAAzS;;AACA,cAAI,CAACuM,OAAO,CAAC3L,SAAb,EAAwB;AACtB4M,YAAAA,MAAM,CAACI,SAAP,GAAmB,IAAnB;;AACA,gBAAIrB,OAAO,CAAC1L,SAAZ,EAAuB;AACrB0L,cAAAA,OAAO,CAAC1L,SAAR,CAAkBgN,KAAlB,CAAwBL,MAAxB;AACD;AACF;AACF;;AACD,YAAI,CAACjB,OAAO,CAAC3L,SAAT,KAAuB2L,OAAO,CAAC9N,QAAR,IAAoB8N,OAAO,CAAC7N,QAAnD,CAAJ,EAAkE;AAChE8O,UAAAA,MAAM,CAACM,IAAP,CAAYvB,OAAZ;AACD;AACF;;AACD,UAAI,CAACA,OAAO,CAAC3L,SAAT,IAAsB2L,OAAO,CAAC7N,QAAlC,EAA4C;AAC1C8O,QAAAA,MAAM,CAACO,IAAP;AACD;;AACD,aAAOP,MAAP;AACD,KA7DD;;AA8DA,SAAKQ,YAAL,GAAoB,UAASC,GAAT,EAAcC,WAAd,EAA2B;AAC7C,UAAI,CAAC1G,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,UAAIE,EAAE,GAAG3K,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,CAAT;AAAA,UAA0BG,CAA1B;AACAD,MAAAA,EAAE,CAACE,IAAH;AACAF,MAAAA,EAAE,CAACG,GAAH,GAAS,EAAT;AACAH,MAAAA,EAAE,CAACI,MAAH;;AACA,WAAKH,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG5K,GAAG,CAACpB,QAAJ,CAAaoM,MAA7B,EAAqCJ,CAAC,EAAtC,EAA0C;AACxC,YAAI5K,GAAG,CAACpB,QAAJ,CAAagM,CAAb,MAAoBH,GAAxB,EAA6B;AAC3BzK,UAAAA,GAAG,CAACpB,QAAJ,CAAaqM,MAAb,CAAoBL,CAApB,EAAuB,CAAvB;AACA;AACD;AACF;;AACD,UAAI,CAACF,WAAL,EAAkB;AAChBC,QAAAA,EAAE,CAACO,QAAH,CAAY,IAAZ;AACD;;AACDP,MAAAA,EAAE,GAAG,IAAL;AACA,aAAO3K,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,CAAP;AACA,aAAO,IAAP;AACD,KAlBD;;AAmBA,SAAKH,IAAL,GAAY,UAASG,GAAT,EAAcb,QAAd,EAAwB;AAClC,UAAI,CAAC5F,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBH,IAAhB,CAAqBV,QAArB,CAAP;AACD,KAHD;;AAIA,SAAKmB,MAAL,GAAc,UAASN,GAAT,EAAc;AAC1B,UAAI,CAACzG,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBM,MAAhB,EAAP;AACD,KAHD;;AAIA,SAAKI,UAAL,GAAkB,UAASV,GAAT,EAAcW,SAAd,EAAyBC,OAAzB,EAAkCC,MAAlC,EAA0C;AAC1D,UAAI,CAACtH,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgB5O,UAAhB,CAA2BuP,SAA3B,EAAsCC,OAAtC,EAA+CC,MAA/C,CAAP;AACD,KAHD;;AAIA,SAAKzP,UAAL,GAAkB,KAAKsP,UAAvB;;AACA,SAAKI,eAAL,GAAuB,UAASd,GAAT,EAAcW,SAAd,EAAyBC,OAAzB,EAAkC;AACvD,UAAI,CAACrH,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBc,eAAhB,CAAgCH,SAAhC,EAA2CC,OAA3C,CAAP;AACD,KAHD;;AAIA,SAAKd,IAAL,GAAY,UAASE,GAAT,EAAcb,QAAd,EAAwB;AAClC,UAAI4B,MAAM,GAAG,IAAb;AAAA,UACIC,UAAU,GAAI7B,QAAQ,IAAI,EAAEA,QAAQ,YAAY8B,MAAtB,CAD9B;;AAEA,UAAI,CAACpK,OAAD,IAAY,CAACtB,GAAG,CAACiJ,EAAJ,EAAjB,EAA2B;AACzB,eAAO,KAAP;AACD;;AACD,UAAI,CAACjF,OAAO,CAACyG,GAAD,EAAMgB,UAAN,CAAZ,EAA+B;AAC7B,YAAI,CAACA,UAAL,EAAiB,OAAO,KAAP;;AACjB,YAAIA,UAAJ,EAAgB;AACd7B,UAAAA,QAAQ,GAAG;AACTlQ,YAAAA,GAAG,EAAEkQ;AADI,WAAX;AAGD;;AACD,YAAIA,QAAQ,IAAIA,QAAQ,CAAClQ,GAAzB,EAA8B;AAC5BkQ,UAAAA,QAAQ,CAAC3L,EAAT,GAAcwM,GAAd;AACAe,UAAAA,MAAM,GAAGxL,GAAG,CAAC2J,WAAJ,CAAgBC,QAAhB,EAA0BW,IAA1B,EAAT;AACD;AACF,OAXD,MAWO,IAAIkB,UAAJ,EAAgB;AACrB7B,QAAAA,QAAQ,GAAG;AACTlQ,UAAAA,GAAG,EAAEkQ;AADI,SAAX;AAGD;;AACD,UAAI4B,MAAM,KAAK,IAAf,EAAqB;AACnBA,QAAAA,MAAM,GAAGxL,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBF,IAAhB,CAAqBX,QAArB,CAAT;AACD;;AACD,aAAO4B,MAAP;AACD,KA1BD;;AA2BA,SAAKG,KAAL,GAAa,KAAKpB,IAAlB;;AACA,SAAKqB,eAAL,GAAuB,UAASnB,GAAT,EAAcoB,IAAd,EAAoBC,aAApB,EAAmC;AACxD,UAAI,CAAC9H,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBmB,eAAhB,CAAgCC,IAAhC,EAAsCC,aAAtC,CAAP;AACD,KAHD;;AAIA,SAAKC,WAAL,GAAmB,UAAStB,GAAT,EAAcuB,WAAd,EAA2B;AAC5C,UAAI,CAAChI,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBsB,WAAhB,CAA4BC,WAA5B,CAAP;AACD,KAHD;;AAIA,SAAKnB,IAAL,GAAY,UAASJ,GAAT,EAAc;AACxB,UAAI,CAACzG,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBI,IAAhB,EAAP;AACD,KAHD;;AAIA,SAAKoB,OAAL,GAAe,YAAW;AACxB,UAAIjC,MAAJ;;AACA,WAAKA,MAAL,IAAehK,GAAG,CAACrB,MAAnB,EAA2B;AACzB,YAAIqB,GAAG,CAACrB,MAAJ,CAAWuN,cAAX,CAA0BlC,MAA1B,CAAJ,EAAuC;AACrChK,UAAAA,GAAG,CAACrB,MAAJ,CAAWqL,MAAX,EAAmBa,IAAnB;AACD;AACF;AACF,KAPD;;AAQA,SAAKsB,KAAL,GAAa,UAAS1B,GAAT,EAAc;AACzB,UAAI,CAACzG,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgB0B,KAAhB,EAAP;AACD,KAHD;;AAIA,SAAKC,QAAL,GAAgB,YAAW;AACzB,UAAIxB,CAAJ;;AACA,WAAKA,CAAC,GAAG5K,GAAG,CAACpB,QAAJ,CAAaoM,MAAb,GAAsB,CAA/B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7C5K,QAAAA,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4BuB,KAA5B;AACD;AACF,KALD;;AAMA,SAAKE,MAAL,GAAc,UAAS5B,GAAT,EAAc;AAC1B,UAAI,CAACzG,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgB4B,MAAhB,EAAP;AACD,KAHD;;AAIA,SAAKC,SAAL,GAAiB,YAAW;AAC1B,UAAI1B,CAAJ;;AACA,WAAKA,CAAC,GAAG5K,GAAG,CAACpB,QAAJ,CAAaoM,MAAb,GAAsB,CAA/B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7C5K,QAAAA,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4ByB,MAA5B;AACD;AACF,KALD;;AAMA,SAAKE,WAAL,GAAmB,UAAS9B,GAAT,EAAc;AAC/B,UAAI,CAACzG,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgB8B,WAAhB,EAAP;AACD,KAHD;;AAIA,SAAKC,MAAL,GAAc,UAAS/B,GAAT,EAAcgC,IAAd,EAAoB;AAChC,UAAI,CAACzI,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgB+B,MAAhB,CAAuBC,IAAvB,CAAP;AACD,KAHD;;AAIA,SAAKC,SAAL,GAAiB,UAASjC,GAAT,EAAckC,IAAd,EAAoB;AACnC,UAAI/B,CAAJ,EAAOgC,CAAP;;AACA,UAAInC,GAAG,KAAKvR,UAAR,IAAsB,CAAC2T,KAAK,CAACpC,GAAD,CAA5B,IAAqCkC,IAAI,KAAKzT,UAAlD,EAA8D;AAC5D,aAAK0R,CAAC,GAAG,CAAJ,EAAOgC,CAAC,GAAG5M,GAAG,CAACpB,QAAJ,CAAaoM,MAA7B,EAAqCJ,CAAC,GAAGgC,CAAzC,EAA4ChC,CAAC,EAA7C,EAAiD;AAC/C5K,UAAAA,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4B8B,SAA5B,CAAsCjC,GAAtC;AACD;;AACD,eAAO,KAAP;AACD;;AACD,UAAI,CAACzG,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBiC,SAAhB,CAA0BC,IAA1B,CAAP;AACD,KAVD;;AAWA,SAAKG,IAAL,GAAY,UAASrC,GAAT,EAAc;AACxB,UAAIG,CAAC,GAAG,CAAR;;AACA,UAAIH,GAAG,YAAYsC,MAAnB,EAA2B;AACzBtC,QAAAA,GAAG,GAAG,IAAN;AACD;;AACD,UAAI,CAACA,GAAL,EAAU;AACR,aAAKG,CAAC,GAAG5K,GAAG,CAACpB,QAAJ,CAAaoM,MAAb,GAAsB,CAA/B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7C5K,UAAAA,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4BkC,IAA5B;AACD;;AACD9M,QAAAA,GAAG,CAACnB,KAAJ,GAAY,IAAZ;AACD,OALD,MAKO;AACL,YAAI,CAACmF,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,eAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBqC,IAAhB,EAAP;AACD;;AACD,aAAO,IAAP;AACD,KAfD;;AAgBA,SAAKE,OAAL,GAAe,YAAW;AACxBhN,MAAAA,GAAG,CAAC8M,IAAJ;AACD,KAFD;;AAGA,SAAKG,MAAL,GAAc,UAASxC,GAAT,EAAc;AAC1B,UAAIG,CAAJ;;AACA,UAAIH,GAAG,YAAYsC,MAAnB,EAA2B;AACzBtC,QAAAA,GAAG,GAAG,IAAN;AACD;;AACD,UAAI,CAACA,GAAL,EAAU;AACR,aAAKG,CAAC,GAAG5K,GAAG,CAACpB,QAAJ,CAAaoM,MAAb,GAAsB,CAA/B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7C5K,UAAAA,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4BqC,MAA5B;AACD;;AACDjN,QAAAA,GAAG,CAACnB,KAAJ,GAAY,KAAZ;AACD,OALD,MAKO;AACL,YAAI,CAACmF,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,eAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgBwC,MAAhB,EAAP;AACD;;AACD,aAAO,IAAP;AACD,KAfD;;AAgBA,SAAKC,SAAL,GAAiB,YAAW;AAC1BlN,MAAAA,GAAG,CAACiN,MAAJ;AACD,KAFD;;AAGA,SAAKE,UAAL,GAAkB,UAAS1C,GAAT,EAAc;AAC9B,UAAI,CAACzG,OAAO,CAACyG,GAAD,CAAZ,EAAmB,OAAO,KAAP;AACnB,aAAOzK,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,EAAgB0C,UAAhB,EAAP;AACD,KAHD;;AAIA,SAAKC,YAAL,GAAoB,YAAW;AAC7B,UAAIC,GAAG,GAAG,CAAV;;AACA,UAAIzN,KAAK,IAAIoB,EAAE,KAAK,CAApB,EAAuB;AACrBqM,QAAAA,GAAG,GAAGC,QAAQ,CAAC1N,KAAK,CAAC2N,aAAN,EAAD,EAAwB,EAAxB,CAAd;AACD;;AACD,aAAOF,GAAP;AACD,KAND;;AAOA,SAAKG,OAAL,GAAe,UAASC,UAAT,EAAqB;AAClC,UAAI7C,CAAJ;;AACA,UAAI6C,UAAU,KAAKvU,UAAnB,EAA+B;AAC7BuU,QAAAA,UAAU,GAAG,KAAb;AACD;;AACD,UAAIlM,QAAJ,EAAc,OAAO,KAAP;AACdA,MAAAA,QAAQ,GAAG,IAAX;;AACA,WAAKqJ,CAAC,GAAG5K,GAAG,CAACpB,QAAJ,CAAaoM,MAAb,GAAsB,CAA/B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7CzH,QAAAA,aAAa,CAACnD,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,CAAD,CAAb;AACD;;AACDzH,MAAAA,aAAa,CAACnD,GAAD,CAAb;AACA2B,MAAAA,YAAY,CAAC8L,UAAD,CAAZ;AACArI,MAAAA,KAAK,CAACsI,MAAN,CAAazU,MAAb,EAAqB,MAArB,EAA6BgJ,eAA7B;AACA,aAAO,IAAP;AACD,KAdD;;AAeA,SAAK0L,WAAL,GAAmB,UAASC,KAAT,EAAgB;AACjC,UAAIpC,MAAJ;;AACA,UAAIxL,GAAG,CAACyI,QAAR,EAAkB;AAChB+C,QAAAA,MAAM,GAAG1G,YAAY,CAAC;AACpBvI,UAAAA,IAAI,EAAEqR;AADc,SAAD,CAArB;AAGD;;AACD,UAAI,CAACpC,MAAD,IAAW7G,UAAf,EAA2B;AACzB6G,QAAAA,MAAM,GAAIoC,KAAK,IAAI5N,GAAG,CAACiJ,EAAJ,EAAT,GAAoB,CAAC,EAAE,CAACjI,EAAE,GAAG,CAAL,GAAS4M,KAAK,CAACvH,KAAN,CAAYqB,kBAAZ,CAAT,GAA2C,IAA5C,KAAqDkG,KAAK,CAACvH,KAAN,CAAYrG,GAAG,CAAC+H,WAAhB,CAAvD,CAArB,GAA4G,IAAtH;AACD;;AACD,aAAOyD,MAAP;AACD,KAXD;;AAYA,SAAKqC,UAAL,GAAkB,UAASC,IAAT,EAAe;AAC/B,UAAItC,MAAJ;;AACA,UAAIxL,GAAG,CAACyI,QAAR,EAAkB;AAChB+C,QAAAA,MAAM,GAAG1G,YAAY,CAAC;AACpBpL,UAAAA,GAAG,EAAEoU;AADe,SAAD,CAArB;AAGD;;AACD,UAAI,CAACtC,MAAD,IAAW7G,UAAf,EAA2B;AACzB6G,QAAAA,MAAM,GAAIsC,IAAI,IAAI9N,GAAG,CAACiJ,EAAJ,EAAR,GAAmB,CAAC,CAAE6E,IAAI,CAACzH,KAAL,CAAWrG,GAAG,CAACjB,WAAf,CAAtB,GAAqD,IAA/D;AACD;;AACD,aAAOyM,MAAP;AACD,KAXD;;AAYA,SAAKuC,WAAL,GAAmB,UAASC,KAAT,EAAgB;AACjC,UAAIA,KAAK,CAACzR,IAAN,KAAerD,UAAf,IAA6B8U,KAAK,CAACzR,IAAnC,IAA2CyD,GAAG,CAAC2N,WAAJ,CAAgBK,KAAK,CAACzR,IAAtB,CAA/C,EAA4E,OAAO,IAAP;AAC5E,aAAOyD,GAAG,CAAC6N,UAAJ,CAAeG,KAAK,CAACtN,IAArB,CAAP;AACD,KAHD;;AAIA,SAAKuN,YAAL,GAAoB,UAASxD,GAAT,EAAcyD,cAAd,EAA8B;AAChD,UAAI,CAACzD,GAAL,EAAU,OAAO,IAAP;AACV,UAAIe,MAAM,GAAGxL,GAAG,CAACrB,MAAJ,CAAW8L,GAAX,CAAb;AACA,aAAOe,MAAP;AACD,KAJD;;AAKA,SAAK2C,OAAL,GAAe,UAAS9C,OAAT,EAAkBC,MAAlB,EAA0B;AACvC,UAAI8C,KAAK,GAAG,SAAZ;AAAA,UACI5C,MAAM,GAAG,KADb;;AAEA,UAAI,OAAOH,OAAP,KAAmB,UAAvB,EAAmC;AACjC,YAAI,CAACC,MAAL,EAAa;AACXA,UAAAA,MAAM,GAAGrS,MAAT;AACD;;AACD8I,QAAAA,UAAU,CAACqM,KAAD,EAAQ/C,OAAR,EAAiBC,MAAjB,CAAV;AACAtJ,QAAAA,eAAe;AACfwJ,QAAAA,MAAM,GAAG,IAAT;AACD,OAPD,MAOO;AACL,cAAMhI,GAAG,CAAC,cAAD,EAAiB4K,KAAjB,CAAT;AACD;;AACD,aAAO5C,MAAP;AACD,KAdD;;AAeA,SAAK6C,SAAL,GAAiB,UAAShD,OAAT,EAAkBC,MAAlB,EAA0B;AACzC,UAAI8C,KAAK,GAAG,WAAZ;AAAA,UACI5C,MAAM,GAAG,KADb;;AAEA,UAAI,OAAOH,OAAP,KAAmB,UAAvB,EAAmC;AACjC,YAAI,CAACC,MAAL,EAAa;AACXA,UAAAA,MAAM,GAAGrS,MAAT;AACD;;AACD8I,QAAAA,UAAU,CAACqM,KAAD,EAAQ/C,OAAR,EAAiBC,MAAjB,CAAV;AACAtJ,QAAAA,eAAe,CAAC;AAAEzF,UAAAA,IAAI,EAAE6R;AAAR,SAAD,CAAf;AACA5C,QAAAA,MAAM,GAAG,IAAT;AACD,OAPD,MAOO;AACL,cAAMhI,GAAG,CAAC,cAAD,EAAiB4K,KAAjB,CAAT;AACD;;AACD,aAAO5C,MAAP;AACD,KAdD;;AAeA,SAAK8C,WAAL,GAAmB,UAASC,KAAT,EAAgBC,aAAhB,EAA+B;AAChD,aAAO,IAAP;AACD,KAFD;;AAGA,SAAKC,GAAL,GAAW,KAAKH,WAAhB;;AACA,SAAKI,MAAL,GAAc,YAAW,CACxB,CADD;;AAEA,SAAKC,MAAL,GAAc,UAASC,WAAT,EAAsBC,WAAtB,EAAmC;AAC/C,UAAIjE,CAAJ,EAAOgC,CAAP,EAAUkC,CAAV;;AACA,WAAKlE,CAAC,GAAG5K,GAAG,CAACpB,QAAJ,CAAaoM,MAAb,GAAsB,CAA/B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7C5K,QAAAA,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4BM,QAA5B;AACD;;AACD,UAAItL,KAAJ,EAAW;AACT,YAAI;AACF,cAAI2G,IAAJ,EAAU;AACRhD,YAAAA,YAAY,GAAG3D,KAAK,CAACmP,SAArB;AACD;;AACDzL,UAAAA,QAAQ,GAAG1D,KAAK,CAACoP,UAAN,CAAiBC,WAAjB,CAA6BrP,KAA7B,CAAX;AACD,SALD,CAKE,OAAMiJ,CAAN,EAAS,CACV;AACF;;AACDtF,MAAAA,YAAY,GAAGD,QAAQ,GAAGqB,UAAU,GAAG/E,KAAK,GAAG,IAA/C;AACAI,MAAAA,GAAG,CAACvB,OAAJ,GAAckE,WAAW,GAAGrB,OAAO,GAAG2C,YAAY,GAAGC,WAAW,GAAG9C,SAAS,GAAGC,aAAa,GAAGE,QAAQ,GAAGiE,mBAAmB,GAAGxF,GAAG,CAACxB,SAAJ,GAAgB,KAAhJ;AACAwB,MAAAA,GAAG,CAACpB,QAAJ,GAAe,EAAf;AACAoB,MAAAA,GAAG,CAACrB,MAAJ,GAAa,EAAb;AACAsH,MAAAA,SAAS,GAAG,CAAZ;AACAC,MAAAA,QAAQ,GAAG,KAAX;;AACA,UAAI,CAAC0I,WAAL,EAAkB;AAChB,aAAKhE,CAAL,IAAU3J,QAAV,EAAoB;AAClB,cAAIA,QAAQ,CAACiL,cAAT,CAAwBtB,CAAxB,CAAJ,EAAgC;AAC9B,iBAAKgC,CAAC,GAAG,CAAJ,EAAOkC,CAAC,GAAG7N,QAAQ,CAAC2J,CAAD,CAAR,CAAYI,MAA5B,EAAoC4B,CAAC,GAAGkC,CAAxC,EAA2ClC,CAAC,EAA5C,EAAgD;AAC9C3L,cAAAA,QAAQ,CAAC2J,CAAD,CAAR,CAAYgC,CAAZ,EAAesC,KAAf,GAAuB,KAAvB;AACD;AACF;AACF;AACF,OARD,MAQO;AACLjO,QAAAA,QAAQ,GAAG,EAAX;AACD;;AACDjB,MAAAA,GAAG,CAACN,KAAJ,GAAY;AACVC,QAAAA,UAAU,EAAE;AADF,OAAZ;AAGAK,MAAAA,GAAG,CAACJ,KAAJ,GAAY,EAAZ;AACAI,MAAAA,GAAG,CAACH,SAAJ,GAAgB,KAAhB;AACAG,MAAAA,GAAG,CAACF,WAAJ,GAAkB,KAAlB;AACA7G,MAAAA,MAAM,CAACsQ,UAAP,CAAkB,YAAW;AAC3B,YAAI,CAACsF,WAAL,EAAkB;AAChB7O,UAAAA,GAAG,CAACqJ,gBAAJ;AACD;AACF,OAJD,EAIG,EAJH;AAKA,aAAOrJ,GAAP;AACD,KA3CD;;AA4CA,SAAKmP,KAAL,GAAa,YAAW;AACtB,aAAOnP,GAAG,CAAC2O,MAAJ,CAAW,IAAX,EAAiB,IAAjB,CAAP;AACD,KAFD;;AAGA,SAAKS,eAAL,GAAuB,YAAW;AAChC,aAAQxP,KAAK,IAAI,mBAAmBA,KAA5B,GAAoCA,KAAK,CAACyP,aAAN,EAApC,GAA4D,IAApE;AACD,KAFD;;AAGA,SAAKhG,gBAAL,GAAwB,YAAW;AACjC7H,MAAAA,YAAY,GAAG,IAAf;;AACAiB,MAAAA,iBAAgB;;AAChB8G,MAAAA,UAAU,CAAC,YAAW;AACpB,YAAIrF,WAAJ,EAAiB,OAAO,KAAP;AACjBrB,QAAAA,WAAW;AACXL,QAAAA,SAAS;AACT0B,QAAAA,WAAW,GAAG,IAAd;AACA,eAAO,IAAP;AACD,OANS,EAMP,EANO,CAAV;AAOAhC,MAAAA,cAAc;AACf,KAXD;;AAYA,SAAKgJ,QAAL,GAAgB,YAAW;AACzBlL,MAAAA,GAAG,CAACwN,OAAJ,CAAY,IAAZ;AACD,KAFD;;AAGAzN,IAAAA,OAAO,GAAG,iBAAS6J,QAAT,EAAmB;AAC3B,UAAI0F,CAAC,GAAG,IAAR;AAAA,UAAcC,eAAd;AAAA,UAA+BC,gBAA/B;AAAA,UAAiDC,mBAAjD;AAAA,UAAsEC,gBAAtE;AAAA,UAAwFC,iBAAxF;AAAA,UAA2GC,gBAA3G;AAAA,UAA6HC,aAAa,GAAG,KAA7I;AAAA,UAAoJC,eAAe,GAAG,EAAtK;AAAA,UAA0KC,eAAe,GAAG,CAA5L;AAAA,UAA+LC,gBAA/L;AAAA,UAAiNC,WAAjN;AAAA,UAA8NC,OAAO,GAAG,IAAxO;AAAA,UAA8OC,cAA9O;AAAA,UAA8PC,UAA9P;AACAD,MAAAA,cAAc,GAAG;AACf7S,QAAAA,QAAQ,EAAE,IADK;AAEf+S,QAAAA,IAAI,EAAE;AAFS,OAAjB;AAIA,WAAKpS,EAAL,GAAU2L,QAAQ,CAAC3L,EAAnB;AACA,WAAKwM,GAAL,GAAW,KAAKxM,EAAhB;AACA,WAAKvE,GAAL,GAAWkQ,QAAQ,CAAClQ,GAApB;AACA,WAAKqP,OAAL,GAAenH,MAAK,CAACgI,QAAD,CAApB;AACA,WAAK0G,eAAL,GAAuB,KAAKvH,OAA5B;AACA,WAAK+B,GAAL,GAAW,KAAKwF,eAAhB;AACA,WAAKnU,GAAL,GAAW,KAAK4M,OAAL,CAAa5M,GAAxB;AACA,WAAKM,MAAL,GAAc,KAAKsM,OAAL,CAAatM,MAA3B;AACA,WAAK8T,OAAL,GAAe,KAAf;AACA,WAAKC,EAAL,GAAU,IAAV;AACAJ,MAAAA,UAAU,GAAI,CAAC,KAAK1W,GAApB;AACA,WAAK+W,GAAL,GAAW,EAAX;;AACA,WAAK/B,MAAL,GAAc,YAAW,CACxB,CADD;;AAEA,WAAKpE,IAAL,GAAY,UAASvB,OAAT,EAAkB;AAC5B,YAAIiB,MAAM,GAAG,IAAb;AAAA,YAAmBsG,eAAnB;;AACA,YAAIvH,OAAO,KAAK7P,UAAhB,EAA4B;AAC1BoW,UAAAA,CAAC,CAACxE,GAAF,GAAQlJ,MAAK,CAACmH,OAAD,EAAUuG,CAAC,CAACvG,OAAZ,CAAb;AACD,SAFD,MAEO;AACLA,UAAAA,OAAO,GAAGuG,CAAC,CAACvG,OAAZ;AACAuG,UAAAA,CAAC,CAACxE,GAAF,GAAQ/B,OAAR;;AACA,cAAImH,OAAO,IAAIA,OAAO,KAAKZ,CAAC,CAAC5V,GAA7B,EAAkC;AAChC4V,YAAAA,CAAC,CAACxE,GAAF,CAAMpR,GAAN,GAAY4V,CAAC,CAAC5V,GAAd;AACA4V,YAAAA,CAAC,CAAC5V,GAAF,GAAQ,IAAR;AACD;AACF;;AACD,YAAI,CAAC4V,CAAC,CAACxE,GAAF,CAAMpR,GAAX,EAAgB;AACd4V,UAAAA,CAAC,CAACxE,GAAF,CAAMpR,GAAN,GAAY4V,CAAC,CAAC5V,GAAd;AACD;;AACD4V,QAAAA,CAAC,CAACxE,GAAF,CAAMpR,GAAN,GAAY8K,QAAQ,CAAC8K,CAAC,CAACxE,GAAF,CAAMpR,GAAP,CAApB;AACA4V,QAAAA,CAAC,CAACgB,eAAF,GAAoBhB,CAAC,CAACxE,GAAtB;AACAwF,QAAAA,eAAe,GAAGhB,CAAC,CAACxE,GAApB;;AACA,YAAI,CAACwF,eAAe,CAAC5W,GAAjB,IAAwB,CAAC4V,CAAC,CAAC5V,GAA/B,EAAoC;AAClC,iBAAO4V,CAAP;AACD;;AACD,YAAIgB,eAAe,CAAC5W,GAAhB,KAAwB4V,CAAC,CAAC5V,GAA1B,IAAiC4V,CAAC,CAAChG,UAAF,KAAiB,CAAlD,IAAuDgG,CAAC,CAAChG,UAAF,KAAiB,CAA5E,EAA+E;AAC7E,cAAIgG,CAAC,CAAChG,UAAF,KAAiB,CAAjB,IAAsBgH,eAAe,CAAC/U,MAA1C,EAAkD;AAChDyK,YAAAA,YAAY,CAACsJ,CAAD,EAAI,YAAW;AACzBgB,cAAAA,eAAe,CAAC/U,MAAhB,CAAuB8O,KAAvB,CAA6BiF,CAA7B,EAAgC,CAAE,CAAC,CAACA,CAAC,CAAChS,QAAN,CAAhC;AACD,aAFW,CAAZ;AAGD;;AACD,iBAAOgS,CAAP;AACD;;AACDA,QAAAA,CAAC,CAACoB,MAAF,GAAW,KAAX;AACApB,QAAAA,CAAC,CAAChG,UAAF,GAAe,CAAf;AACAgG,QAAAA,CAAC,CAACqB,SAAF,GAAc,CAAd;AACArB,QAAAA,CAAC,CAACmB,GAAF,GAAQ,EAAR;;AACA,YAAI5L,OAAO,CAACyL,eAAD,CAAX,EAA8B;AAC5BtG,UAAAA,MAAM,GAAGsF,CAAC,CAACpF,YAAF,CAAeoG,eAAf,CAAT;;AACA,cAAI,CAACtG,MAAM,CAAC4G,YAAZ,EAA0B;AACxBtB,YAAAA,CAAC,CAACuB,cAAF,GAAmB,KAAnB;;AACA,gBAAIvB,CAAC,CAAC5V,GAAF,KAAU4W,eAAe,CAAC5W,GAA9B,EAAmC;AACjC4V,cAAAA,CAAC,CAACkB,EAAF,CAAKM,GAAL,GAAWR,eAAe,CAAC5W,GAA3B;AACA4V,cAAAA,CAAC,CAACvD,WAAF,CAAc,CAAd;AACD;;AACDuD,YAAAA,CAAC,CAACkB,EAAF,CAAKO,UAAL,GAAkB,MAAlB;AACAzB,YAAAA,CAAC,CAACkB,EAAF,CAAKQ,OAAL,GAAe,MAAf;AACA1B,YAAAA,CAAC,CAACkB,EAAF,CAAKI,YAAL,GAAoB,IAApB;AACD,WATD,MASO,CACN;AACF,SAbD,MAaO;AACL,cAAI5Q,GAAG,CAACH,SAAR,EAAmB;AACjB,mBAAOyP,CAAP;AACD;;AACD,cAAIA,CAAC,CAACxE,GAAF,CAAMpR,GAAN,IAAa4V,CAAC,CAACxE,GAAF,CAAMpR,GAAN,CAAU2M,KAAV,CAAgB,QAAhB,CAAjB,EAA4C;AAC1C,mBAAOiJ,CAAP;AACD;;AACD,cAAI;AACFA,YAAAA,CAAC,CAACiB,OAAF,GAAY,KAAZ;AACAjB,YAAAA,CAAC,CAACxE,GAAF,GAAQhH,SAAS,CAACD,OAAO,CAACyM,eAAD,CAAR,CAAjB;;AACA,gBAAIhB,CAAC,CAACxE,GAAF,CAAM5P,QAAN,KAAmBoU,CAAC,CAACxE,GAAF,CAAM5O,QAAN,IAAkBoT,CAAC,CAACxE,GAAF,CAAM3P,IAA3C,CAAJ,EAAsD;AACpDmU,cAAAA,CAAC,CAACxE,GAAF,CAAM5P,QAAN,GAAiB,KAAjB;AACD;;AACDoV,YAAAA,eAAe,GAAGhB,CAAC,CAACxE,GAApB;;AACA,gBAAI9J,EAAE,KAAK,CAAX,EAAc;AACZpB,cAAAA,KAAK,CAACqR,KAAN,CAAY3B,CAAC,CAACrR,EAAd,EAAkBqS,eAAe,CAAC5W,GAAlC,EAAuC4W,eAAe,CAACjU,MAAvD,EAA+DiU,eAAe,CAACpV,QAA/E,EAAyFoV,eAAe,CAAC9T,aAAzG;AACD,aAFD,MAEO;AACLoD,cAAAA,KAAK,CAACqR,KAAN,CAAY3B,CAAC,CAACrR,EAAd,EAAkBqS,eAAe,CAAC5W,GAAlC,EAAuC,CAAC,CAAE4W,eAAe,CAACjU,MAA1D,EAAmE,CAAC,CAAEiU,eAAe,CAACpV,QAAtF,EAAiGoV,eAAe,CAAClV,KAAhB,IAAyB,CAA1H,EAA6H,CAAC,CAAEkV,eAAe,CAACrV,QAAhJ,EAA2JqV,eAAe,CAAC9T,aAA3K;AACD;AACF,WAZD,CAYE,OAAMqM,CAAN,EAAS;AACT/F,YAAAA,UAAU,CAAC;AACTvG,cAAAA,IAAI,EAAE,2BADG;AAET2U,cAAAA,KAAK,EAAE;AAFE,aAAD,CAAV;AAID;AACF;;AACD5B,QAAAA,CAAC,CAAC5V,GAAF,GAAQ4W,eAAe,CAAC5W,GAAxB;AACA,eAAO4V,CAAP;AACD,OA1ED;;AA2EA,WAAKvE,MAAL,GAAc,YAAW;AACvB,YAAIuE,CAAC,CAAChG,UAAF,KAAiB,CAArB,EAAwB;AACtB,cAAI,CAACgG,CAAC,CAACiB,OAAP,EAAgB;AACd,gBAAIvP,EAAE,KAAK,CAAX,EAAc;AACZpB,cAAAA,KAAK,CAACuR,OAAN,CAAc7B,CAAC,CAACrR,EAAhB,EAAoBoJ,QAApB;AACD,aAFD,MAEO;AACLzH,cAAAA,KAAK,CAACuR,OAAN,CAAc7B,CAAC,CAACrR,EAAhB;AACD;AACF,WAND,MAMO;AACLyR,YAAAA,gBAAgB;;AAChB,gBAAIJ,CAAC,CAACkB,EAAN,EAAU;AACRlB,cAAAA,CAAC,CAACkB,EAAF,CAAKrE,KAAL;;AACA+D,cAAAA,OAAO,GAAGjL,WAAW,CAACqK,CAAC,CAACkB,EAAH,CAArB;AACD;AACF;;AACDjB,UAAAA,eAAe;AAChB;;AACD,eAAOD,CAAP;AACD,OAlBD;;AAmBA,WAAKpE,QAAL,GAAgB,UAASkG,QAAT,EAAmB;AACjC,YAAI,CAAC9B,CAAC,CAACiB,OAAP,EAAgB;AACdjB,UAAAA,CAAC,CAACxE,GAAF,CAAMnO,SAAN,GAAkB,IAAlB;;AACAiD,UAAAA,KAAK,CAACyR,aAAN,CAAoB/B,CAAC,CAACrR,EAAtB;AACD,SAHD,MAGO;AACLyR,UAAAA,gBAAgB;;AAChB,cAAIJ,CAAC,CAACkB,EAAN,EAAU;AACRlB,YAAAA,CAAC,CAACkB,EAAF,CAAKrE,KAAL;;AACAlH,YAAAA,WAAW,CAACqK,CAAC,CAACkB,EAAH,CAAX;;AACA,gBAAI,CAAChL,mBAAL,EAA0B;AACxBiK,cAAAA,mBAAmB;AACpB;;AACDH,YAAAA,CAAC,CAACkB,EAAF,CAAKc,EAAL,GAAU,IAAV;AACAhC,YAAAA,CAAC,CAACkB,EAAF,GAAO,IAAP;AACD;AACF;;AACD,YAAI,CAACY,QAAL,EAAe;AACbpR,UAAAA,GAAG,CAACwK,YAAJ,CAAiB8E,CAAC,CAACrR,EAAnB,EAAuB,IAAvB;AACD;AACF,OAnBD;;AAoBA,WAAKsM,IAAL,GAAY,UAASxB,OAAT,EAAkBwI,gBAAlB,EAAoC;AAC9C,YAAIC,EAAJ;AAAA,YAAQC,UAAR;AAAA,YAAoBC,CAApB;AAAA,YAAuBvD,OAAvB;AAAA,YACIwD,UADJ;AAAA,YACgBC,QADhB;AAAA,YACyBC,UADzB;AAAA,YAEIC,OAAO,GAAG,IAFd;;AAGAP,QAAAA,gBAAgB,GAAIA,gBAAgB,KAAKrY,UAArB,GAAkC,IAAlC,GAAyCqY,gBAA7D;;AACA,YAAI,CAACxI,OAAL,EAAc;AACZA,UAAAA,OAAO,GAAG,EAAV;AACD;;AACD,YAAIuG,CAAC,CAAC5V,GAAN,EAAW;AACT4V,UAAAA,CAAC,CAACxE,GAAF,CAAMpR,GAAN,GAAY4V,CAAC,CAAC5V,GAAd;AACD;;AACD4V,QAAAA,CAAC,CAACxE,GAAF,GAAQlJ,MAAK,CAAC0N,CAAC,CAACxE,GAAH,EAAQwE,CAAC,CAACvG,OAAV,CAAb;AACAuG,QAAAA,CAAC,CAACxE,GAAF,GAAQlJ,MAAK,CAACmH,OAAD,EAAUuG,CAAC,CAACxE,GAAZ,CAAb;AACAwE,QAAAA,CAAC,CAACxE,GAAF,CAAMpR,GAAN,GAAY8K,QAAQ,CAAC8K,CAAC,CAACxE,GAAF,CAAMpR,GAAP,CAApB;AACA4V,QAAAA,CAAC,CAACgB,eAAF,GAAoBhB,CAAC,CAACxE,GAAtB;;AACA,YAAI,CAACwE,CAAC,CAACiB,OAAH,IAAcjB,CAAC,CAACxE,GAAF,CAAM1N,SAApB,IAAiC,CAACkS,CAAC,CAAClF,SAAxC,EAAmD;AACjD,cAAI,CAACkF,CAAC,CAACyC,WAAF,EAAL,EAAsB;AACpBzC,YAAAA,CAAC,CAAC0C,WAAF,CAAc,IAAd;AACD;;AACD,iBAAO1C,CAAP;AACD;;AACD,YAAIzK,OAAO,CAACyK,CAAC,CAACxE,GAAH,CAAX,EAAoB;AAClBwE,UAAAA,CAAC,CAACpF,YAAF,CAAeoF,CAAC,CAACxE,GAAjB;;AACA6E,UAAAA,iBAAiB;AAClB;;AACD,YAAIL,CAAC,CAACqB,SAAF,KAAgB,CAAhB,IAAqB,CAACrB,CAAC,CAAC2C,MAA5B,EAAoC;AAClCR,UAAAA,UAAU,GAAGnC,CAAC,CAACxE,GAAF,CAAM9O,SAAnB;;AACA,cAAI,CAACyV,UAAL,EAAiB;AACf,gBAAInC,CAAC,CAACiB,OAAN,EAAe;AACbjB,cAAAA,CAAC,CAACvD,WAAF,CAAcuD,CAAC,CAACxE,GAAF,CAAM5O,QAApB;AACD;;AACD,mBAAOoT,CAAP;AACD;AACF;;AACD,YAAIvG,OAAO,CAACrP,GAAR,IAAeqP,OAAO,CAACrP,GAAR,KAAgB4V,CAAC,CAAC5V,GAArC,EAA0C;AACxC,cAAI,CAAC4V,CAAC,CAAChG,UAAH,IAAiB,CAACgG,CAAC,CAACiB,OAApB,IAA+BvP,EAAE,KAAK,CAAtC,IAA2CoP,UAA/C,EAA2D;AACzDA,YAAAA,UAAU,GAAG,KAAb;AACD,WAFD,MAEO;AACLd,YAAAA,CAAC,CAAChF,IAAF,CAAOgF,CAAC,CAACxE,GAAT;AACD;AACF;;AACD,YAAI,CAACwE,CAAC,CAACoB,MAAP,EAAe;AACb,cAAIpB,CAAC,CAAChG,UAAF,KAAiB,CAArB,EAAwB;AACtB,gBAAI,CAACgG,CAAC,CAACiB,OAAH,IAAc,CAACvQ,GAAG,CAACH,SAAvB,EAAkC;AAChCyP,cAAAA,CAAC,CAACxE,GAAF,CAAM5P,QAAN,GAAiB,IAAjB;AACAoU,cAAAA,CAAC,CAAChF,IAAF,CAAOgF,CAAC,CAACxE,GAAT;AACD,aAHD,MAGO,IAAIwE,CAAC,CAACiB,OAAN,EAAe;AACpBjB,cAAAA,CAAC,CAAChF,IAAF,CAAOgF,CAAC,CAACxE,GAAT;AACD,aAFM,MAEA;AACL,qBAAOwE,CAAP;AACD;;AACDA,YAAAA,CAAC,CAACgB,eAAF,GAAoBhB,CAAC,CAACxE,GAAtB;AACD,WAVD,MAUO,IAAIwE,CAAC,CAAChG,UAAF,KAAiB,CAArB,EAAwB;AAC7B,mBAAOgG,CAAP;AACD,WAFM,MAEA,CACN;AACF,SAfD,MAeO,CACN;;AACD,YAAI,CAACA,CAAC,CAACiB,OAAH,IAAcvP,EAAE,KAAK,CAArB,IAA0BsO,CAAC,CAACpT,QAAF,GAAa,CAAvC,IAA4CoT,CAAC,CAACpT,QAAF,KAAeoT,CAAC,CAAChS,QAAjE,EAA2E;AACzEyL,UAAAA,OAAO,CAAC7M,QAAR,GAAmB,CAAnB;AACD;;AACD,YAAIoT,CAAC,CAAC2C,MAAF,IAAY3C,CAAC,CAACpT,QAAF,IAAc,CAA1B,KAAgC,CAACoT,CAAC,CAACxE,GAAF,CAAM1N,SAAP,IAAoBkS,CAAC,CAACpT,QAAF,GAAa,CAAjE,CAAJ,EAAyE;AACvEoT,UAAAA,CAAC,CAACjD,MAAF;AACD,SAFD,MAEO;AACLiD,UAAAA,CAAC,CAACxE,GAAF,GAAQlJ,MAAK,CAACmH,OAAD,EAAUuG,CAAC,CAACxE,GAAZ,CAAb;;AACA,cAAI,CAAE,CAACwE,CAAC,CAACiB,OAAH,IAAcjB,CAAC,CAACxE,GAAF,CAAM5O,QAAN,KAAmB,IAAjC,IAAyCoT,CAAC,CAACxE,GAAF,CAAM5O,QAAN,GAAiB,CAA3D,IAAkEoT,CAAC,CAACxE,GAAF,CAAM3P,IAAN,KAAe,IAAf,IAAuBmU,CAAC,CAACxE,GAAF,CAAM3P,IAAN,GAAa,CAAtG,IAA4GmU,CAAC,CAACxE,GAAF,CAAMxO,EAAN,KAAa,IAA1H,KAAmIgT,CAAC,CAAC4C,aAAF,KAAoB,CAAvJ,IAA4J5C,CAAC,CAACqB,SAAF,KAAgB,CAA5K,IAAiL,CAACrB,CAAC,CAACxE,GAAF,CAAM1N,SAA5L,EAAuM;AACrM+Q,YAAAA,OAAO,GAAG,mBAAW;AACnBmB,cAAAA,CAAC,CAACxE,GAAF,GAAQlJ,MAAK,CAACmH,OAAD,EAAUuG,CAAC,CAACxE,GAAZ,CAAb;AACAwE,cAAAA,CAAC,CAAC/E,IAAF,CAAO+E,CAAC,CAACxE,GAAT;AACD,aAHD;;AAIA,gBAAIwE,CAAC,CAACiB,OAAF,IAAa,CAACjB,CAAC,CAACuB,cAApB,EAAoC;AAClCvB,cAAAA,CAAC,CAAChF,IAAF,CAAO;AACL6H,gBAAAA,UAAU,EAAEhE;AADP,eAAP;AAGD,aAJD,MAIO,IAAI,CAACmB,CAAC,CAACiB,OAAH,IAAc,CAACjB,CAAC,CAACoB,MAAjB,KAA4B,CAACpB,CAAC,CAAChG,UAAH,IAAiBgG,CAAC,CAAChG,UAAF,KAAiB,CAA9D,CAAJ,EAAsE;AAC3EgG,cAAAA,CAAC,CAAChF,IAAF,CAAO;AACL/O,gBAAAA,MAAM,EAAE4S;AADH,eAAP;AAGD;;AACDmB,YAAAA,CAAC,CAACxE,GAAF,GAAQmF,WAAW,EAAnB;AACD;;AACD,cAAI,CAACX,CAAC,CAAC4C,aAAH,IAAoB5C,CAAC,CAACxE,GAAF,CAAM7O,eAA1B,IAA8CqT,CAAC,CAACiB,OAAF,IAAajB,CAAC,CAACxE,GAAF,CAAM9O,SAAnB,IAAgC,CAACwJ,mBAA/E,IAAwG,CAAC8J,CAAC,CAACiB,OAAH,IAAcvP,EAAE,GAAG,CAAnB,IAAwB,CAACsO,CAAC,CAACyC,WAAF,EAArI,EAAuJ;AACrJzC,YAAAA,CAAC,CAAC4C,aAAF;AACD;;AACD,cAAI5C,CAAC,CAACxE,GAAF,CAAMjP,UAAN,IAAoByT,CAAC,CAACqB,SAAF,KAAgB,CAAxC,EAA2C;AACzCf,YAAAA,gBAAgB,CAACN,CAAD,CAAhB;AACD;;AACDA,UAAAA,CAAC,CAACqB,SAAF,GAAc,CAAd;AACArB,UAAAA,CAAC,CAAC2C,MAAF,GAAW,KAAX;AACA3C,UAAAA,CAAC,CAACpT,QAAF,GAAcoT,CAAC,CAACxE,GAAF,CAAM5O,QAAN,KAAmBhD,UAAnB,IAAiC,CAAC2T,KAAK,CAACyC,CAAC,CAACxE,GAAF,CAAM5O,QAAP,CAAvC,GAA0DoT,CAAC,CAACxE,GAAF,CAAM5O,QAAhE,GAA2E,CAAzF;;AACA,cAAI,CAACoT,CAAC,CAACiB,OAAP,EAAgB;AACdjB,YAAAA,CAAC,CAACxE,GAAF,GAAQhH,SAAS,CAACD,OAAO,CAACyL,CAAC,CAACxE,GAAH,CAAR,CAAjB;AACD;;AACD,cAAIwE,CAAC,CAACxE,GAAF,CAAMrP,MAAN,IAAgB8V,gBAApB,EAAsC;AACpCjC,YAAAA,CAAC,CAACxE,GAAF,CAAMrP,MAAN,CAAa4O,KAAb,CAAmBiF,CAAnB;;AACAO,YAAAA,aAAa,GAAG,IAAhB;AACD;;AACDP,UAAAA,CAAC,CAAC5C,SAAF,CAAY4C,CAAC,CAACxE,GAAF,CAAMrO,MAAlB,EAA0B,IAA1B;AACA6S,UAAAA,CAAC,CAAC9C,MAAF,CAAS8C,CAAC,CAACxE,GAAF,CAAM3O,GAAf,EAAoB,IAApB;;AACA,cAAImT,CAAC,CAACxE,GAAF,CAAM1O,YAAN,KAAuB,CAA3B,EAA8B;AAC5BkT,YAAAA,CAAC,CAAC1D,eAAF,CAAkB0D,CAAC,CAACxE,GAAF,CAAM1O,YAAxB;AACD;;AACD,cAAI,CAACkT,CAAC,CAACiB,OAAP,EAAgB;AACduB,YAAAA,OAAO,GAAGlS,KAAK,CAACwS,MAAN,CAAa9C,CAAC,CAACrR,EAAf,EAAmBqR,CAAC,CAACxE,GAAF,CAAM1P,KAAN,IAAe,CAAlC,EAAsC4F,EAAE,KAAK,CAAP,GAAWsO,CAAC,CAACpT,QAAb,GAAwBoT,CAAC,CAACpT,QAAF,GAAaiK,SAA3E,EAAuFmJ,CAAC,CAACxE,GAAF,CAAM9O,SAAN,IAAmB,KAA1G,CAAV;;AACA,gBAAIgF,EAAE,KAAK,CAAP,IAAY,CAAC8Q,OAAjB,EAA0B;AACxB,kBAAIxC,CAAC,CAACxE,GAAF,CAAMuH,WAAV,EAAuB;AACrB/C,gBAAAA,CAAC,CAACxE,GAAF,CAAMuH,WAAN,CAAkBhI,KAAlB,CAAwBiF,CAAxB;AACD;AACF;AACF,WAPD,MAOO,IAAIA,CAAC,CAAC4C,aAAF,GAAkB,CAAtB,EAAyB;AAC5BvC,YAAAA,iBAAiB;AACjB+B,YAAAA,CAAC,GAAGpC,CAAC,CAACpF,YAAF,EAAJ;AACAoF,YAAAA,CAAC,CAACvD,WAAF,CAAcuD,CAAC,CAACxE,GAAF,CAAM5O,QAApB;AACAwV,YAAAA,CAAC,CAACnH,IAAF;AACD,WALI,MAKE;AACLoH,YAAAA,UAAU,GAAG,IAAIjJ,KAAJ,CAAU4G,CAAC,CAACxE,GAAF,CAAMpR,GAAhB,CAAb;;AACAkY,YAAAA,QAAO,GAAG,mBAAW;AACnBxM,cAAAA,KAAK,CAACsI,MAAN,CAAaiE,UAAb,EAAyB,OAAzB,EAAkCC,QAAlC;;AACAtC,cAAAA,CAAC,CAACgD,SAAF,CAAYhD,CAAZ;;AACArK,cAAAA,WAAW,CAAC0M,UAAD,CAAX;AACAA,cAAAA,UAAU,GAAG,IAAb;AACD,aALD;;AAMAE,YAAAA,UAAS,GAAG,qBAAW;AACrBzM,cAAAA,KAAK,CAACsI,MAAN,CAAaiE,UAAb,EAAyB,SAAzB,EAAoCE,UAApC;;AACA,kBAAI;AACFF,gBAAAA,UAAU,CAACY,WAAX,GAAyBjD,CAAC,CAACxE,GAAF,CAAM5O,QAAN,GAAiBiK,SAA1C;AACD,eAFD,CAEE,OAAMqM,GAAN,EAAW,CACZ;;AACDb,cAAAA,UAAU,CAACpH,IAAX;AACD,aAPD;;AAQAnF,YAAAA,KAAK,CAACqN,GAAN,CAAUd,UAAV,EAAsB,OAAtB,EAA+BC,QAA/B;;AACA,gBAAItC,CAAC,CAACxE,GAAF,CAAMrO,MAAN,KAAiBvD,UAArB,EAAiC;AAC/ByY,cAAAA,UAAU,CAAClV,MAAX,GAAoBiW,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYtD,CAAC,CAACxE,GAAF,CAAMrO,MAAN,GAAe,GAA3B,CAAZ,CAApB;AACD;;AACD,gBAAI6S,CAAC,CAACzQ,KAAN,EAAa;AACX8S,cAAAA,UAAU,CAAC9S,KAAX,GAAmB,IAAnB;AACD;;AACD,gBAAIyQ,CAAC,CAACxE,GAAF,CAAM5O,QAAV,EAAoB;AAClBkJ,cAAAA,KAAK,CAACqN,GAAN,CAAUd,UAAV,EAAsB,SAAtB,EAAiCE,UAAjC;AACD,aAFD,MAEO;AACLF,cAAAA,UAAU,CAACpH,IAAX;AACD;AACF;AACJ;;AACD,eAAO+E,CAAP;AACD,OAjJD;;AAkJA,WAAK3D,KAAL,GAAa,KAAKpB,IAAlB;;AACA,WAAKM,IAAL,GAAY,UAASgI,IAAT,EAAe;AACzB,YAAIvC,eAAe,GAAGhB,CAAC,CAACxE,GAAxB;AAAA,YACIgI,gBADJ;;AAEA,YAAIxD,CAAC,CAACqB,SAAF,KAAgB,CAApB,EAAuB;AACrBrB,UAAAA,CAAC,CAACyD,eAAF,CAAkB,CAAlB;;AACAzD,UAAAA,CAAC,CAAC0D,gBAAF,CAAmB,CAAnB;;AACA1D,UAAAA,CAAC,CAAC2C,MAAF,GAAW,KAAX;;AACA,cAAI,CAAC3C,CAAC,CAACiB,OAAP,EAAgB;AACdjB,YAAAA,CAAC,CAACqB,SAAF,GAAc,CAAd;AACD;;AACDX,UAAAA,gBAAgB;;AAChB,cAAIM,eAAe,CAAChU,EAApB,EAAwB;AACtBgT,YAAAA,CAAC,CAAC/D,eAAF,CAAkB+E,eAAe,CAAChU,EAAlC;AACD;;AACD,cAAI,CAACgT,CAAC,CAACiB,OAAP,EAAgB;AACd3Q,YAAAA,KAAK,CAACqT,KAAN,CAAY3D,CAAC,CAACrR,EAAd,EAAkB4U,IAAlB;;AACA,gBAAIvC,eAAe,CAAClT,SAApB,EAA+B;AAC7BkS,cAAAA,CAAC,CAACvE,MAAF;AACD;AACF,WALD,MAKO,IAAIuE,CAAC,CAACkB,EAAN,EAAU;AACbsC,YAAAA,gBAAgB,GAAGxD,CAAC,CAACpT,QAArB;AACAoT,YAAAA,CAAC,CAACvD,WAAF,CAAc,CAAd;AACAuD,YAAAA,CAAC,CAACpT,QAAF,GAAa4W,gBAAb;;AACAxD,YAAAA,CAAC,CAACkB,EAAF,CAAKrE,KAAL;;AACAmD,YAAAA,CAAC,CAACqB,SAAF,GAAc,CAAd;;AACArB,YAAAA,CAAC,CAAC4D,QAAF;;AACAxD,YAAAA,gBAAgB;AACjB;;AACHJ,UAAAA,CAAC,CAAC4C,aAAF,GAAkB,CAAlB;AACA5C,UAAAA,CAAC,CAACxE,GAAF,GAAQ,EAAR;;AACA,cAAIwF,eAAe,CAACxU,MAApB,EAA4B;AAC1BwU,YAAAA,eAAe,CAACxU,MAAhB,CAAuBuO,KAAvB,CAA6BiF,CAA7B;AACD;AACF;;AACD,eAAOA,CAAP;AACD,OAnCD;;AAoCA,WAAK0C,WAAL,GAAmB,UAAS9W,QAAT,EAAmB;AACpCoU,QAAAA,CAAC,CAACxE,GAAF,CAAM5P,QAAN,GAAiBA,QAAjB;;AACA,YAAI,CAACoU,CAAC,CAACiB,OAAP,EAAgB;AACd3Q,UAAAA,KAAK,CAACuT,YAAN,CAAmB7D,CAAC,CAACrR,EAArB,EAAyB/C,QAAzB;;AACA,cAAIA,QAAJ,EAAc;AACZ,gBAAI,CAACoU,CAAC,CAAC4C,aAAH,IAAoB5C,CAAC,CAAChG,UAAF,KAAiB,CAAzC,EAA4C;AAC1CgG,cAAAA,CAAC,CAAC4C,aAAF;AACD;AACF;AACF;AACF,OAVD;;AAWA,WAAKH,WAAL,GAAmB,YAAW;AAC5B,eAAOzC,CAAC,CAACxE,GAAF,CAAM5P,QAAb;AACD,OAFD;;AAGA,WAAK0Q,eAAL,GAAuB,UAASxP,YAAT,EAAuB;AAC5C,YAAIgX,cAAc,GAAGV,IAAI,CAACC,GAAL,CAAS,GAAT,EAAcD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYxW,YAAZ,CAAd,CAArB;;AACA,YAAIkT,CAAC,CAACiB,OAAN,EAAe;AACb,cAAI;AACFjB,YAAAA,CAAC,CAACxE,GAAF,CAAM1O,YAAN,GAAqBgX,cAArB;AACA9D,YAAAA,CAAC,CAACkB,EAAF,CAAKpU,YAAL,GAAoBgX,cAApB;AACD,WAHD,CAGE,OAAMvK,CAAN,EAAS,CACV;AACF;;AACD,eAAOyG,CAAP;AACD,OAVD;;AAWA,WAAKvD,WAAL,GAAmB,UAASC,WAAT,EAAsB;AACvC,YAAIA,WAAW,KAAK9S,UAApB,EAAgC;AAC9B8S,UAAAA,WAAW,GAAG,CAAd;AACD;;AACD,YAAI9P,QAAJ;AAAA,YAAcmX,UAAd;AAAA,YACIC,MAAM,GAAIhE,CAAC,CAACiB,OAAF,GAAYmC,IAAI,CAACC,GAAL,CAAS3G,WAAT,EAAsB,CAAtB,CAAZ,GAAuC0G,IAAI,CAACE,GAAL,CAAStD,CAAC,CAAChS,QAAF,IAAcgS,CAAC,CAACxE,GAAF,CAAMxN,QAA7B,EAAuCoV,IAAI,CAACC,GAAL,CAAS3G,WAAT,EAAsB,CAAtB,CAAvC,CADrD;AAEAsD,QAAAA,CAAC,CAACpT,QAAF,GAAaoX,MAAb;AACAD,QAAAA,UAAU,GAAG/D,CAAC,CAACpT,QAAF,GAAaiK,SAA1B;;AACAmJ,QAAAA,CAAC,CAAC0D,gBAAF,CAAmB1D,CAAC,CAACpT,QAArB;;AACAoT,QAAAA,CAAC,CAACxE,GAAF,CAAM5O,QAAN,GAAiBoX,MAAjB;;AACA,YAAI,CAAChE,CAAC,CAACiB,OAAP,EAAgB;AACdrU,UAAAA,QAAQ,GAAI8E,EAAE,KAAK,CAAP,GAAWsO,CAAC,CAACpT,QAAb,GAAwBmX,UAApC;;AACA,cAAI/D,CAAC,CAAChG,UAAF,IAAgBgG,CAAC,CAAChG,UAAF,KAAiB,CAArC,EAAwC;AACtC1J,YAAAA,KAAK,CAAC2T,YAAN,CAAmBjE,CAAC,CAACrR,EAArB,EAAyB/B,QAAzB,EAAoCoT,CAAC,CAAC2C,MAAF,IAAY,CAAC3C,CAAC,CAACqB,SAAnD,EAA+DrB,CAAC,CAACxE,GAAF,CAAM9O,SAArE;AACD;AACF,SALD,MAKO,IAAIsT,CAAC,CAACkB,EAAN,EAAU;AACf,cAAIlB,CAAC,CAACuB,cAAN,EAAsB;AACpB,gBAAIvB,CAAC,CAACkB,EAAF,CAAK+B,WAAL,CAAiBiB,OAAjB,CAAyB,CAAzB,MAAgCH,UAAU,CAACG,OAAX,CAAmB,CAAnB,CAApC,EAA2D;AACzD,kBAAI;AACFlE,gBAAAA,CAAC,CAACkB,EAAF,CAAK+B,WAAL,GAAmBc,UAAnB;;AACA,oBAAI/D,CAAC,CAACqB,SAAF,KAAgB,CAAhB,IAAqBrB,CAAC,CAAC2C,MAA3B,EAAmC;AACjC3C,kBAAAA,CAAC,CAACkB,EAAF,CAAKrE,KAAL;AACD;AACF,eALD,CAKE,OAAMtD,CAAN,EAAS,CACV;AACF;AACF,WAVD,MAUO,IAAIwK,UAAJ,EAAgB;AACrB,mBAAO/D,CAAP;AACD;;AACD,cAAIA,CAAC,CAAC2C,MAAN,EAAc;AACZ3C,YAAAA,CAAC,CAAC4D,QAAF,CAAW,IAAX;AACD;AACF;;AACD,eAAO5D,CAAP;AACD,OAlCD;;AAmCA,WAAKnD,KAAL,GAAa,UAASsH,WAAT,EAAsB;AACjC,YAAInE,CAAC,CAAC2C,MAAF,IAAa3C,CAAC,CAACqB,SAAF,KAAgB,CAAhB,IAAqBrB,CAAC,CAAChG,UAAF,KAAiB,CAAvD,EAA2D,OAAOgG,CAAP;AAC3DA,QAAAA,CAAC,CAAC2C,MAAF,GAAW,IAAX;;AACA,YAAI,CAAC3C,CAAC,CAACiB,OAAP,EAAgB;AACd,cAAIkD,WAAW,IAAIA,WAAW,KAAKva,UAAnC,EAA+C;AAC7C0G,YAAAA,KAAK,CAAC8T,MAAN,CAAapE,CAAC,CAACrR,EAAf,EAAmBqR,CAAC,CAACxE,GAAF,CAAM9O,SAAzB;AACD;AACF,SAJD,MAIO;AACLsT,UAAAA,CAAC,CAACpF,YAAF,GAAiBiC,KAAjB;;AACAuD,UAAAA,gBAAgB;AACjB;;AACD,YAAIJ,CAAC,CAACxE,GAAF,CAAMpP,OAAV,EAAmB;AACjB4T,UAAAA,CAAC,CAACxE,GAAF,CAAMpP,OAAN,CAAc2O,KAAd,CAAoBiF,CAApB;AACD;;AACD,eAAOA,CAAP;AACD,OAfD;;AAgBA,WAAKjD,MAAL,GAAc,YAAW;AACvB,YAAIiE,eAAe,GAAGhB,CAAC,CAACxE,GAAxB;AACA,YAAI,CAACwE,CAAC,CAAC2C,MAAP,EAAe,OAAO3C,CAAP;AACfA,QAAAA,CAAC,CAAC2C,MAAF,GAAW,KAAX;AACA3C,QAAAA,CAAC,CAACqB,SAAF,GAAc,CAAd;;AACA,YAAI,CAACrB,CAAC,CAACiB,OAAP,EAAgB;AACd,cAAID,eAAe,CAAC1T,WAAhB,IAA+B,CAAC0T,eAAe,CAAClT,SAApD,EAA+D;AAC7DkS,YAAAA,CAAC,CAACvD,WAAF,CAAcuD,CAAC,CAACpT,QAAhB;AACD;;AACD0D,UAAAA,KAAK,CAAC8T,MAAN,CAAapE,CAAC,CAACrR,EAAf,EAAmBqS,eAAe,CAACtU,SAAnC;AACD,SALD,MAKO;AACLsT,UAAAA,CAAC,CAACpF,YAAF,GAAiBK,IAAjB;;AACAoF,UAAAA,iBAAiB;AAClB;;AACD,YAAI,CAACE,aAAD,IAAkBS,eAAe,CAAC7U,MAAtC,EAA8C;AAC5C6U,UAAAA,eAAe,CAAC7U,MAAhB,CAAuB4O,KAAvB,CAA6BiF,CAA7B;AACAO,UAAAA,aAAa,GAAG,IAAhB;AACD,SAHD,MAGO,IAAIS,eAAe,CAAC3U,QAApB,EAA8B;AACnC2U,UAAAA,eAAe,CAAC3U,QAAhB,CAAyB0O,KAAzB,CAA+BiF,CAA/B;AACD;;AACD,eAAOA,CAAP;AACD,OArBD;;AAsBA,WAAK/C,WAAL,GAAmB,YAAW;AAC5B,YAAI+C,CAAC,CAACqB,SAAF,KAAgB,CAApB,EAAuB;AACrBrB,UAAAA,CAAC,CAAC/E,IAAF,CAAO;AACLrO,YAAAA,QAAQ,EAAG8E,EAAE,KAAK,CAAP,IAAY,CAACsO,CAAC,CAACiB,OAAf,GAAyBjB,CAAC,CAACpT,QAA3B,GAAsCoT,CAAC,CAACpT,QAAF,GAAaiK;AADzD,WAAP;AAGA,iBAAOmJ,CAAP;AACD;;AACD,YAAIA,CAAC,CAAC2C,MAAN,EAAc;AACZ3C,UAAAA,CAAC,CAACjD,MAAF;AACD,SAFD,MAEO;AACLiD,UAAAA,CAAC,CAACnD,KAAF;AACD;;AACD,eAAOmD,CAAP;AACD,OAbD;;AAcA,WAAK9C,MAAL,GAAc,UAASC,IAAT,EAAekH,aAAf,EAA8B;AAC1C,YAAIlH,IAAI,KAAKvT,UAAb,EAAyB;AACvBuT,UAAAA,IAAI,GAAG,CAAP;AACD;;AACD,YAAIkH,aAAa,KAAKza,UAAtB,EAAkC;AAChCya,UAAAA,aAAa,GAAG,KAAhB;AACD;;AACD,YAAI,CAACrE,CAAC,CAACiB,OAAP,EAAgB;AACd3Q,UAAAA,KAAK,CAACgU,OAAN,CAActE,CAAC,CAACrR,EAAhB,EAAoBwO,IAApB;AACD;;AACD6C,QAAAA,CAAC,CAACxE,GAAF,CAAM3O,GAAN,GAAYsQ,IAAZ;;AACA,YAAI,CAACkH,aAAL,EAAoB;AAClBrE,UAAAA,CAAC,CAACnT,GAAF,GAAQsQ,IAAR;AACA6C,UAAAA,CAAC,CAACvG,OAAF,CAAU5M,GAAV,GAAgBsQ,IAAhB;AACD;;AACD,eAAO6C,CAAP;AACD,OAhBD;;AAiBA,WAAK5C,SAAL,GAAiB,UAASC,IAAT,EAAekH,cAAf,EAA+B;AAC9C,YAAIlH,IAAI,KAAKzT,UAAb,EAAyB;AACvByT,UAAAA,IAAI,GAAG,GAAP;AACD;;AACD,YAAIkH,cAAc,KAAK3a,UAAvB,EAAmC;AACjC2a,UAAAA,cAAc,GAAG,KAAjB;AACD;;AACD,YAAI,CAACvE,CAAC,CAACiB,OAAP,EAAgB;AACd3Q,UAAAA,KAAK,CAACkU,UAAN,CAAiBxE,CAAC,CAACrR,EAAnB,EAAwB+B,GAAG,CAACnB,KAAJ,IAAa,CAACyQ,CAAC,CAACzQ,KAAjB,IAA2ByQ,CAAC,CAACzQ,KAA7B,GAAqC,CAArC,GAAyC8N,IAAhE;AACD,SAFD,MAEO,IAAI2C,CAAC,CAACkB,EAAN,EAAU;AACf,cAAIxQ,GAAG,CAACnB,KAAJ,IAAa,CAACyQ,CAAC,CAACzQ,KAApB,EAA2B;AACzByQ,YAAAA,CAAC,CAACzQ,KAAF,GAAU,IAAV;AACAyQ,YAAAA,CAAC,CAACkB,EAAF,CAAK3R,KAAL,GAAa,IAAb;AACD;;AACDyQ,UAAAA,CAAC,CAACkB,EAAF,CAAK/T,MAAL,GAAciW,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYjG,IAAI,GAAG,GAAnB,CAAZ,CAAd;AACD;;AACD2C,QAAAA,CAAC,CAACxE,GAAF,CAAMrO,MAAN,GAAekQ,IAAf;;AACA,YAAI,CAACkH,cAAL,EAAqB;AACnBvE,UAAAA,CAAC,CAAC7S,MAAF,GAAWkQ,IAAX;AACA2C,UAAAA,CAAC,CAACvG,OAAF,CAAUtM,MAAV,GAAmBkQ,IAAnB;AACD;;AACD,eAAO2C,CAAP;AACD,OAtBD;;AAuBA,WAAKxC,IAAL,GAAY,YAAW;AACrBwC,QAAAA,CAAC,CAACzQ,KAAF,GAAU,IAAV;;AACA,YAAI,CAACyQ,CAAC,CAACiB,OAAP,EAAgB;AACd3Q,UAAAA,KAAK,CAACkU,UAAN,CAAiBxE,CAAC,CAACrR,EAAnB,EAAuB,CAAvB;AACD,SAFD,MAEO,IAAIqR,CAAC,CAACkB,EAAN,EAAU;AACflB,UAAAA,CAAC,CAACkB,EAAF,CAAK3R,KAAL,GAAa,IAAb;AACD;;AACD,eAAOyQ,CAAP;AACD,OARD;;AASA,WAAKrC,MAAL,GAAc,YAAW;AACvBqC,QAAAA,CAAC,CAACzQ,KAAF,GAAU,KAAV;AACA,YAAIkV,KAAK,GAAIzE,CAAC,CAACxE,GAAF,CAAMrO,MAAN,KAAiBvD,UAA9B;;AACA,YAAI,CAACoW,CAAC,CAACiB,OAAP,EAAgB;AACd3Q,UAAAA,KAAK,CAACkU,UAAN,CAAiBxE,CAAC,CAACrR,EAAnB,EAAuB8V,KAAK,GAAGzE,CAAC,CAACxE,GAAF,CAAMrO,MAAT,GAAkB6S,CAAC,CAACvG,OAAF,CAAUtM,MAAxD;AACD,SAFD,MAEO,IAAI6S,CAAC,CAACkB,EAAN,EAAU;AACflB,UAAAA,CAAC,CAACkB,EAAF,CAAK3R,KAAL,GAAa,KAAb;AACD;;AACD,eAAOyQ,CAAP;AACD,OATD;;AAUA,WAAKnC,UAAL,GAAkB,YAAW;AAC3B,eAAQmC,CAAC,CAACzQ,KAAF,GAAUyQ,CAAC,CAACrC,MAAF,EAAV,GAAuBqC,CAAC,CAACxC,IAAF,EAA/B;AACD,OAFD;;AAGA,WAAK3B,UAAL,GAAkB,UAASC,SAAT,EAAoBC,OAApB,EAA6BC,MAA7B,EAAqC;AACrDwE,QAAAA,eAAe,CAAC5G,IAAhB,CAAqB;AACnBhN,UAAAA,QAAQ,EAAEoR,QAAQ,CAAClC,SAAD,EAAY,EAAZ,CADC;AAEnB4I,UAAAA,MAAM,EAAE3I,OAFW;AAGnB4I,UAAAA,KAAK,EAAG3I,MAAM,KAAKpS,UAAX,GAAwBoS,MAAxB,GAAiCgE,CAHtB;AAInBJ,UAAAA,KAAK,EAAE;AAJY,SAArB;AAMA,eAAOI,CAAP;AACD,OARD;;AASA,WAAKzT,UAAL,GAAkB,KAAKsP,UAAvB;;AACA,WAAKI,eAAL,GAAuB,UAASH,SAAT,EAAoBC,OAApB,EAA6B;AAClD,YAAIT,CAAJ;AACAQ,QAAAA,SAAS,GAAGkC,QAAQ,CAAClC,SAAD,EAAY,EAAZ,CAApB;;AACA,YAAIyB,KAAK,CAACzB,SAAD,CAAT,EAAsB;AACpB;AACD;;AACD,aAAKR,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGkF,eAAe,CAAC9E,MAAhC,EAAwCJ,CAAC,EAAzC,EAA6C;AAC3C,cAAIQ,SAAS,KAAK0E,eAAe,CAAClF,CAAD,CAAf,CAAmB1O,QAArC,EAA+C;AAC7C,gBAAI,CAACmP,OAAD,IAAaA,OAAO,KAAKyE,eAAe,CAAClF,CAAD,CAAf,CAAmBoJ,MAAhD,EAAyD;AACvD,kBAAIlE,eAAe,CAAClF,CAAD,CAAf,CAAmBsE,KAAvB,EAA8B;AAC5Ba,gBAAAA,eAAe;AAChB;;AACDD,cAAAA,eAAe,CAAC7E,MAAhB,CAAuBL,CAAvB,EAA0B,CAA1B;AACD;AACF;AACF;AACF,OAhBD;;AAiBA,WAAKsJ,kBAAL,GAA0B,YAAW;AACnC,YAAItJ,CAAJ;AAAA,YAAOuJ,IAAP;AAAA,YAAavH,CAAC,GAAGkD,eAAe,CAAC9E,MAAjC;AACA,YAAI,CAAC4B,CAAD,IAAM,CAAC0C,CAAC,CAACqB,SAAT,IAAsBZ,eAAe,IAAInD,CAA7C,EAAgD,OAAO,KAAP;;AAChD,aAAKhC,CAAC,GAAGgC,CAAC,GAAG,CAAb,EAAgBhC,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3BuJ,UAAAA,IAAI,GAAGrE,eAAe,CAAClF,CAAD,CAAtB;;AACA,cAAI,CAACuJ,IAAI,CAACjF,KAAN,IAAeI,CAAC,CAACpT,QAAF,IAAciY,IAAI,CAACjY,QAAtC,EAAgD;AAC9CiY,YAAAA,IAAI,CAACjF,KAAL,GAAa,IAAb;AACAa,YAAAA,eAAe;AACfoE,YAAAA,IAAI,CAACH,MAAL,CAAY3J,KAAZ,CAAkB8J,IAAI,CAACF,KAAvB,EAA8B,CAACE,IAAI,CAACjY,QAAN,CAA9B;AACA0Q,YAAAA,CAAC,GAAGkD,eAAe,CAAC9E,MAApB;AACD;AACF;;AACD,eAAO,IAAP;AACD,OAbD;;AAcA,WAAKgI,gBAAL,GAAwB,UAAS5H,SAAT,EAAoB;AAC1C,YAAIR,CAAJ;AAAA,YAAOuJ,IAAP;AAAA,YAAavH,CAAC,GAAGkD,eAAe,CAAC9E,MAAjC;AACA,YAAI,CAAC4B,CAAL,EAAQ,OAAO,KAAP;;AACR,aAAKhC,CAAC,GAAGgC,CAAC,GAAG,CAAb,EAAgBhC,CAAC,IAAI,CAArB,EAAwBA,CAAC,EAAzB,EAA6B;AAC3BuJ,UAAAA,IAAI,GAAGrE,eAAe,CAAClF,CAAD,CAAtB;;AACA,cAAIuJ,IAAI,CAACjF,KAAL,IAAc9D,SAAS,IAAI+I,IAAI,CAACjY,QAApC,EAA8C;AAC5CiY,YAAAA,IAAI,CAACjF,KAAL,GAAa,KAAb;AACAa,YAAAA,eAAe;AAChB;AACF;;AACD,eAAO,IAAP;AACD,OAXD;;AAYAE,MAAAA,WAAW,GAAG,uBAAW;AACvB,YAAIK,eAAe,GAAGhB,CAAC,CAACxE,GAAxB;AAAA,YACIsJ,CAAC,GAAG9D,eAAe,CAACnV,IADxB;AAAA,YAEIkZ,CAAC,GAAG/D,eAAe,CAAChU,EAFxB;AAAA,YAGIqP,KAHJ;AAAA,YAGW2I,IAHX;;AAIAA,QAAAA,IAAG,GAAG,eAAW;AACfhF,UAAAA,CAAC,CAAC/D,eAAF,CAAkB8I,CAAlB,EAAqBC,IAArB;AACAhF,UAAAA,CAAC,CAACzE,IAAF;AACD,SAHD;;AAIAc,QAAAA,KAAK,GAAG,iBAAW;AACjB,cAAI0I,CAAC,KAAK,IAAN,IAAc,CAACxH,KAAK,CAACwH,CAAD,CAAxB,EAA6B;AAC3B/E,YAAAA,CAAC,CAACnE,UAAF,CAAakJ,CAAb,EAAgBC,IAAhB;AACD;AACF,SAJD;;AAKA,YAAIF,CAAC,KAAK,IAAN,IAAc,CAACvH,KAAK,CAACuH,CAAD,CAAxB,EAA6B;AAC3B9D,UAAAA,eAAe,CAACpU,QAAhB,GAA2BkY,CAA3B;AACA9D,UAAAA,eAAe,CAACtU,SAAhB,GAA4B,KAA5B;AACA2P,UAAAA,KAAK;AACN;;AACD,eAAO2E,eAAP;AACD,OApBD;;AAqBAV,MAAAA,gBAAgB,GAAG,4BAAW;AAC5B,YAAIuE,IAAJ;AAAA,YACII,EAAE,GAAGjF,CAAC,CAACxE,GAAF,CAAMjP,UADf;;AAEA,YAAI0Y,EAAJ,EAAQ;AACN,eAAKJ,IAAL,IAAaI,EAAb,EAAiB;AACf,gBAAIA,EAAE,CAACrI,cAAH,CAAkBiI,IAAlB,CAAJ,EAA6B;AAC3B7E,cAAAA,CAAC,CAACnE,UAAF,CAAamC,QAAQ,CAAC6G,IAAD,EAAO,EAAP,CAArB,EAAiCI,EAAE,CAACJ,IAAD,CAAnC;AACD;AACF;AACF;AACF,OAVD;;AAWAnE,MAAAA,gBAAgB,GAAG,4BAAW;AAC5B,YAAImE,IAAJ;AAAA,YACII,EAAE,GAAGjF,CAAC,CAACxE,GAAF,CAAMjP,UADf;;AAEA,YAAI0Y,EAAJ,EAAQ;AACN,eAAKJ,IAAL,IAAaI,EAAb,EAAiB;AACf,gBAAIA,EAAE,CAACrI,cAAH,CAAkBiI,IAAlB,CAAJ,EAA6B;AAC3B7E,cAAAA,CAAC,CAAC/D,eAAF,CAAkB+B,QAAQ,CAAC6G,IAAD,EAAO,EAAP,CAA1B;AACD;AACF;AACF;AACF,OAVD;;AAWAxE,MAAAA,iBAAiB,GAAG,6BAAW;AAC7B,YAAIL,CAAC,CAACiB,OAAN,EAAe;AACbpM,UAAAA,UAAU,CAACmL,CAAD,CAAV;AACD;AACF,OAJD;;AAKAI,MAAAA,gBAAgB,GAAG,4BAAW;AAC5B,YAAIJ,CAAC,CAACiB,OAAN,EAAe;AACbnM,UAAAA,SAAS,CAACkL,CAAD,CAAT;AACD;AACF,OAJD;;AAKAC,MAAAA,eAAe,GAAG,yBAASiF,cAAT,EAAyB;AACzC,YAAI,CAACA,cAAL,EAAqB;AACnB1E,UAAAA,eAAe,GAAG,EAAlB;AACAC,UAAAA,eAAe,GAAG,CAAlB;AACD;;AACDF,QAAAA,aAAa,GAAG,KAAhB;AACAP,QAAAA,CAAC,CAACmF,SAAF,GAAc,IAAd;AACAnF,QAAAA,CAAC,CAACkB,EAAF,GAAO,IAAP;AACAlB,QAAAA,CAAC,CAACuB,cAAF,GAAmB,KAAnB;AACAvB,QAAAA,CAAC,CAACoF,WAAF,GAAgB,IAAhB;AACApF,QAAAA,CAAC,CAACqF,UAAF,GAAe,IAAf;AACArF,QAAAA,CAAC,CAAChS,QAAF,GAAcgS,CAAC,CAACxE,GAAF,IAASwE,CAAC,CAACxE,GAAF,CAAMxN,QAAf,GAA0BgS,CAAC,CAACxE,GAAF,CAAMxN,QAAhC,GAA2C,IAAzD;AACAgS,QAAAA,CAAC,CAACsF,gBAAF,GAAqB,IAArB;AACAtF,QAAAA,CAAC,CAACuF,QAAF,GAAa,EAAb;AACAvF,QAAAA,CAAC,CAAC/P,MAAF,GAAW,EAAX;AACA+P,QAAAA,CAAC,CAAC/P,MAAF,CAASuV,IAAT,GAAgB,EAAhB;AACAxF,QAAAA,CAAC,CAAC/P,MAAF,CAASwV,KAAT,GAAiB,EAAjB;AACAzF,QAAAA,CAAC,CAAC0F,QAAF,GAAa,CAAb;AACA1F,QAAAA,CAAC,CAAC2F,WAAF,GAAgB,KAAhB;AACA3F,QAAAA,CAAC,CAACgB,eAAF,GAAoB,EAApB;AACAhB,QAAAA,CAAC,CAAC4C,aAAF,GAAkB,CAAlB;AACA5C,QAAAA,CAAC,CAACoB,MAAF,GAAW,KAAX;AACApB,QAAAA,CAAC,CAAC4F,QAAF,GAAa,EAAb;AACA5F,QAAAA,CAAC,CAAChG,UAAF,GAAe,CAAf;AACAgG,QAAAA,CAAC,CAACzQ,KAAF,GAAU,KAAV;AACAyQ,QAAAA,CAAC,CAAC2C,MAAF,GAAW,KAAX;AACA3C,QAAAA,CAAC,CAACjQ,QAAF,GAAa;AACXyV,UAAAA,IAAI,EAAE,CADK;AAEXC,UAAAA,KAAK,EAAE;AAFI,SAAb;AAIAzF,QAAAA,CAAC,CAAChQ,YAAF,GAAiB;AACfwV,UAAAA,IAAI,EAAE,EADS;AAEfC,UAAAA,KAAK,EAAE;AAFQ,SAAjB;AAIAzF,QAAAA,CAAC,CAACqB,SAAF,GAAc,CAAd;AACArB,QAAAA,CAAC,CAACpT,QAAF,GAAa,IAAb;AACAoT,QAAAA,CAAC,CAACmB,GAAF,GAAQ,EAAR;AACD,OArCD;;AAsCAlB,MAAAA,eAAe;;AACf,WAAK2D,QAAL,GAAgB,UAASiC,MAAT,EAAiB;AAC/B,YAAI7X,QAAJ;AAAA,YAAc8X,KAAK,GAAG,KAAtB;AAAA,YAA6B/E,IAA7B;AAAA,YAAmCgF,CAAC,GAAG,EAAvC;;AACA,YAAI/F,CAAC,CAACmF,SAAF,IAAeU,MAAnB,EAA2B;AACzB,cAAI7F,CAAC,CAACkB,EAAF,KAAS2E,MAAM,IAAK,CAAC7F,CAAC,CAACqB,SAAF,GAAc,CAAd,IAAmBrB,CAAC,CAAChG,UAAF,KAAiB,CAArC,KAA2C,CAACgG,CAAC,CAAC2C,MAAlE,CAAJ,EAAgF;AAC9E3U,YAAAA,QAAQ,GAAGgS,CAAC,CAACgG,mBAAF,EAAX;;AACA,gBAAIhY,QAAQ,KAAK6S,cAAc,CAAC7S,QAAhC,EAA0C;AACxC6S,cAAAA,cAAc,CAAC7S,QAAf,GAA0BA,QAA1B;AACAgS,cAAAA,CAAC,CAAChS,QAAF,GAAaA,QAAb;AACA8X,cAAAA,KAAK,GAAG,IAAR;AACD;;AACD9F,YAAAA,CAAC,CAACsF,gBAAF,GAAqBtF,CAAC,CAAChS,QAAvB;AACA+S,YAAAA,IAAI,GAAIf,CAAC,CAACkB,EAAF,CAAK+B,WAAL,GAAmBpM,SAAnB,IAAgC,CAAxC;;AACA,gBAAIkK,IAAI,KAAKF,cAAc,CAACE,IAA5B,EAAkC;AAChCF,cAAAA,cAAc,CAACE,IAAf,GAAsBA,IAAtB;AACA+E,cAAAA,KAAK,GAAG,IAAR;AACD;;AACD,gBAAIA,KAAK,IAAID,MAAb,EAAqB;AACnB7F,cAAAA,CAAC,CAACiG,aAAF,CAAgBlF,IAAhB,EAAsBgF,CAAtB,EAAyBA,CAAzB,EAA4BA,CAA5B,EAA+BA,CAA/B;AACD;AACF;AACF;;AACD,eAAOD,KAAP;AACD,OAtBD;;AAuBA,WAAKE,mBAAL,GAA2B,YAAW;AACpC,YAAIhF,eAAe,GAAGhB,CAAC,CAACxE,GAAxB;AAAA,YACI0K,CAAC,GAAIlG,CAAC,CAACkB,EAAF,IAAQlB,CAAC,CAACkB,EAAF,CAAKlT,QAAb,GAAwBgS,CAAC,CAACkB,EAAF,CAAKlT,QAAL,GAAgB6I,SAAxC,GAAqDmK,eAAe,IAAIA,eAAe,CAAChT,QAAnC,GAA8CgT,eAAe,CAAChT,QAA9D,GAAyE,IADvI;AAAA,YAEIkO,MAAM,GAAIgK,CAAC,IAAI,CAAC3I,KAAK,CAAC2I,CAAD,CAAX,IAAkBA,CAAC,KAAKC,QAAxB,GAAmCD,CAAnC,GAAuC,IAFrD;AAGA,eAAOhK,MAAP;AACD,OALD;;AAMA,WAAKkK,WAAL,GAAmB,UAAShE,CAAT,EAAYiE,MAAZ,EAAoB;AACrCjE,QAAAA,CAAC,CAACkE,IAAF,GAAUD,MAAM,GAAG,CAAT,GAAa,MAAb,GAAsB,EAAhC;AACD,OAFD;;AAGA,WAAKzL,YAAL,GAAoB,UAASnB,OAAT,EAAkB;AACpC,YAAIuH,eAAe,GAAG1O,MAAK,CAAC0N,CAAC,CAACxE,GAAH,EAAQ/B,OAAR,CAA3B;AAAA,YACI2I,CAAC,GAAGlM,mBAAmB,GAAGvF,gBAAH,GAAsBqP,CAAC,CAACkB,EADnD;AAAA,YAEIqF,IAAI,GAAGC,SAAS,CAACxF,eAAe,CAAC5W,GAAjB,CAFpB;AAAA,YAGIqc,OAHJ;;AAIA,YAAIvQ,mBAAJ,EAAyB;AACvB,cAAIqQ,IAAI,KAAKC,SAAS,CAACrQ,kBAAD,CAAtB,EAA4C;AAC1CsQ,YAAAA,OAAO,GAAG,IAAV;AACD;AACF,SAJD,MAIO,IAAIF,IAAI,KAAKC,SAAS,CAAC5F,OAAD,CAAtB,EAAiC;AACtC6F,UAAAA,OAAO,GAAG,IAAV;AACD;;AACD,YAAIrE,CAAJ,EAAO;AACL,cAAIA,CAAC,CAACJ,EAAN,EAAU;AACR,gBAAI9L,mBAAJ,EAAyB;AACvB,kBAAIkM,CAAC,CAACJ,EAAF,IAAQI,CAAC,CAACJ,EAAF,CAAKX,SAAb,IAA0B,CAACoF,OAA/B,EAAwC;AACtCrE,gBAAAA,CAAC,CAACJ,EAAF,CAAKzG,IAAL;AACD;AACF,aAJD,MAIO,IAAI,CAACrF,mBAAD,IAAwBqQ,IAAI,KAAKC,SAAS,CAAC5F,OAAD,CAA9C,EAAyD;AAC9DZ,cAAAA,CAAC,CAACoG,WAAF,CAAchE,CAAd,EAAiBpB,eAAe,CAAClV,KAAjC;;AACA,qBAAOsW,CAAP;AACD;AACF;;AACD,cAAI,CAACqE,OAAL,EAAc;AACZ,gBAAI7F,OAAJ,EAAa;AACXX,cAAAA,eAAe,CAAC,KAAD,CAAf;AACD;;AACDmC,YAAAA,CAAC,CAACZ,GAAF,GAAQR,eAAe,CAAC5W,GAAxB;AACA4V,YAAAA,CAAC,CAAC5V,GAAF,GAAQ4W,eAAe,CAAC5W,GAAxB;AACAwW,YAAAA,OAAO,GAAGI,eAAe,CAAC5W,GAA1B;AACA+L,YAAAA,kBAAkB,GAAG6K,eAAe,CAAC5W,GAArC;AACAgY,YAAAA,CAAC,CAACd,YAAF,GAAiB,KAAjB;AACD;AACF,SArBD,MAqBO;AACL,cAAIN,eAAe,CAACrV,QAAhB,IAA4BqV,eAAe,CAACpV,QAAhD,EAA0D;AACxDoU,YAAAA,CAAC,CAACkB,EAAF,GAAO,IAAI9H,KAAJ,CAAU4H,eAAe,CAAC5W,GAA1B,CAAP;;AACA4V,YAAAA,CAAC,CAACkB,EAAF,CAAKlG,IAAL;AACD,WAHD,MAGO;AACLgF,YAAAA,CAAC,CAACkB,EAAF,GAAQ9J,OAAO,IAAIiC,KAAK,CAACtK,OAAN,KAAkB,EAA7B,GAAkC,IAAIqK,KAAJ,CAAU,IAAV,CAAlC,GAAoD,IAAIA,KAAJ,EAA5D;AACD;;AACDgJ,UAAAA,CAAC,GAAGpC,CAAC,CAACkB,EAAN;AACAkB,UAAAA,CAAC,CAACd,YAAF,GAAiB,KAAjB;;AACA,cAAIpL,mBAAJ,EAAyB;AACvBvF,YAAAA,gBAAgB,GAAGyR,CAAnB;AACD;AACF;;AACDpC,QAAAA,CAAC,CAACiB,OAAF,GAAY,IAAZ;AACAjB,QAAAA,CAAC,CAACkB,EAAF,GAAOkB,CAAP;AACAA,QAAAA,CAAC,CAACJ,EAAF,GAAOhC,CAAP;AACAE,QAAAA,gBAAgB;;AAChBF,QAAAA,CAAC,CAACoG,WAAF,CAAchE,CAAd,EAAiBpB,eAAe,CAAClV,KAAjC;;AACA,YAAIkV,eAAe,CAACrV,QAAhB,IAA4BqV,eAAe,CAACpV,QAAhD,EAA0D;AACxDoU,UAAAA,CAAC,CAAChF,IAAF;AACD,SAFD,MAEO;AACLoH,UAAAA,CAAC,CAACX,UAAF,GAAe,KAAf;AACAW,UAAAA,CAAC,CAACV,OAAF,GAAY,MAAZ;AACD;;AACD,eAAOU,CAAP;AACD,OA1DD;;AA2DAlC,MAAAA,gBAAgB,GAAG,4BAAW;AAC5B,YAAIF,CAAC,CAACkB,EAAF,CAAKwF,aAAT,EAAwB,OAAO,KAAP;AACxB,YAAI5B,CAAJ;;AACA,iBAAS3B,GAAT,CAAawD,IAAb,EAAmBC,GAAnB,EAAwBC,QAAxB,EAAkC;AAChC,iBAAO7G,CAAC,CAACkB,EAAF,GAAOlB,CAAC,CAACkB,EAAF,CAAK4F,gBAAL,CAAsBH,IAAtB,EAA4BC,GAA5B,EAAiCC,QAAQ,IAAI,KAA7C,CAAP,GAA6D,IAApE;AACD;;AACD7G,QAAAA,CAAC,CAACkB,EAAF,CAAKwF,aAAL,GAAqB,IAArB;;AACA,aAAK5B,CAAL,IAAUvO,YAAV,EAAwB;AACtB,cAAIA,YAAY,CAACqG,cAAb,CAA4BkI,CAA5B,CAAJ,EAAoC;AAClC3B,YAAAA,GAAG,CAAC2B,CAAD,EAAIvO,YAAY,CAACuO,CAAD,CAAhB,CAAH;AACD;AACF;;AACD,eAAO,IAAP;AACD,OAbD;;AAcA3E,MAAAA,mBAAmB,GAAG,+BAAW;AAC/B,YAAI2E,CAAJ;;AACA,iBAAS1G,MAAT,CAAgBuI,IAAhB,EAAsBC,GAAtB,EAA2BC,QAA3B,EAAqC;AACnC,iBAAQ7G,CAAC,CAACkB,EAAF,GAAOlB,CAAC,CAACkB,EAAF,CAAK6F,mBAAL,CAAyBJ,IAAzB,EAA+BC,GAA/B,EAAoCC,QAAQ,IAAI,KAAhD,CAAP,GAAgE,IAAxE;AACD;;AACD7G,QAAAA,CAAC,CAACkB,EAAF,CAAKwF,aAAL,GAAqB,KAArB;;AACA,aAAK5B,CAAL,IAAUvO,YAAV,EAAwB;AACtB,cAAIA,YAAY,CAACqG,cAAb,CAA4BkI,CAA5B,CAAJ,EAAoC;AAClC1G,YAAAA,MAAM,CAAC0G,CAAD,EAAIvO,YAAY,CAACuO,CAAD,CAAhB,CAAN;AACD;AACF;AACF,OAXD;;AAYA,WAAKkC,OAAL,GAAe,UAASC,QAAT,EAAmB;AAChC,YAAI/E,EAAJ;AAAA,YACIgF,MAAM,GAAG,CAAC,CAACD,QAAF,IAAe,CAACjH,CAAC,CAACiB,OAAH,IAAcvP,EAAE,KAAK,CAArB,IAA0BsO,CAAC,CAAChS,QADxD;AAEAgS,QAAAA,CAAC,CAACoB,MAAF,GAAW8F,MAAX;AACAlH,QAAAA,CAAC,CAAChG,UAAF,GAAgBkN,MAAM,GAAG,CAAH,GAAO,CAA7B;;AACAlH,QAAAA,CAAC,CAACyD,eAAF,CAAkB,CAAlB;;AACA,YAAI,CAACyD,MAAD,IAAW,CAAClH,CAAC,CAACiB,OAAlB,EAA2B;AACzBjB,UAAAA,CAAC,CAACmH,QAAF;AACD;;AACD,YAAInH,CAAC,CAACxE,GAAF,CAAMvP,MAAV,EAAkB;AAChByK,UAAAA,YAAY,CAACsJ,CAAD,EAAI,YAAW;AACzBA,YAAAA,CAAC,CAACxE,GAAF,CAAMvP,MAAN,CAAa8O,KAAb,CAAmBiF,CAAnB,EAAsB,CAACkH,MAAD,CAAtB;AACD,WAFW,CAAZ;AAGD;;AACD,eAAO,IAAP;AACD,OAfD;;AAgBA,WAAKC,QAAL,GAAgB,UAASC,SAAT,EAAoBC,WAApB,EAAiC;AAC/C,YAAIrH,CAAC,CAACxE,GAAF,CAAMxP,OAAV,EAAmB;AACjB0K,UAAAA,YAAY,CAACsJ,CAAD,EAAI,YAAW;AACzBA,YAAAA,CAAC,CAACxE,GAAF,CAAMxP,OAAN,CAAc+O,KAAd,CAAoBiF,CAApB,EAAuB,CAACoH,SAAD,EAAYC,WAAZ,CAAvB;AACD,WAFW,CAAZ;AAGD;AACF,OAND;;AAOA,WAAK5D,eAAL,GAAuB,UAAS6D,YAAT,EAAuB;AAC5C,YAAItH,CAAC,CAACqB,SAAF,KAAgB,CAApB,EAAuB,OAAO,KAAP;AACvB,YAAKiG,YAAY,IAAItH,CAAC,CAAC2F,WAAnB,IAAoC,CAAC2B,YAAD,IAAiB,CAACtH,CAAC,CAAC2F,WAA5D,EAA0E,OAAO,KAAP;AAC1E3F,QAAAA,CAAC,CAAC2F,WAAF,GAAiB2B,YAAY,KAAK,CAAlC;;AACA,YAAItH,CAAC,CAACxE,GAAF,CAAM9N,cAAV,EAA0B;AACxBsS,UAAAA,CAAC,CAACxE,GAAF,CAAM9N,cAAN,CAAqBqN,KAArB,CAA2BiF,CAA3B,EAA8B,CAACsH,YAAD,CAA9B;AACD;;AACD,eAAO,IAAP;AACD,OARD;;AASA,WAAKC,UAAL,GAAkB,YAAW;AAC3B,YAAIvH,CAAC,CAACxE,GAAF,CAAMgM,SAAV,EAAqB;AACnBxH,UAAAA,CAAC,CAACxE,GAAF,CAAMgM,SAAN,CAAgBzM,KAAhB,CAAsBiF,CAAtB;AACD;;AACD,eAAO,IAAP;AACD,OALD;;AAMA,WAAKyH,UAAL,GAAkB,UAASC,GAAT,EAAcC,KAAd,EAAqBC,IAArB,EAA2B;AAC3C5H,QAAAA,CAAC,CAAC0F,QAAF;;AACA,YAAI1F,CAAC,CAACxE,GAAF,CAAMnO,SAAN,IAAmB2S,CAAC,CAAC0F,QAAF,KAAe,CAAtC,EAAyC;AACvC1F,UAAAA,CAAC,CAACxE,GAAF,CAAMnO,SAAN,CAAgBqa,GAAhB,EAAqBC,KAArB,EAA4BC,IAA5B;AACD,SAFD,MAEO,CACN;AACF,OAND;;AAOA,WAAKC,UAAL,GAAkB,UAASH,GAAT,EAAcC,KAAd,EAAqBC,IAArB,EAA2B;AAC3C,YAAI5H,CAAC,CAACxE,GAAF,CAAMsM,SAAV,EAAqB;AACnB9H,UAAAA,CAAC,CAACxE,GAAF,CAAMsM,SAAN,CAAgBJ,GAAhB,EAAqBC,KAArB,EAA4BC,IAA5B;AACD;AACF,OAJD;;AAKA,WAAK5E,SAAL,GAAiB,YAAW;AAC1B,YAAI+E,WAAW,GAAG/H,CAAC,CAACxE,GAAF,CAAM/O,QAAxB;;AACAuT,QAAAA,CAAC,CAACyD,eAAF,CAAkB,CAAlB;;AACAzD,QAAAA,CAAC,CAAC0D,gBAAF,CAAmB,CAAnB;;AACA,YAAI1D,CAAC,CAAC4C,aAAN,EAAqB;AACnB5C,UAAAA,CAAC,CAAC4C,aAAF;;AACA,cAAI,CAAC5C,CAAC,CAAC4C,aAAP,EAAsB;AACpBlC,YAAAA,gBAAgB;AAChBV,YAAAA,CAAC,CAACqB,SAAF,GAAc,CAAd;AACArB,YAAAA,CAAC,CAAC2C,MAAF,GAAW,KAAX;AACA3C,YAAAA,CAAC,CAAC4C,aAAF,GAAkB,CAAlB;AACA5C,YAAAA,CAAC,CAACgB,eAAF,GAAoB,EAApB;AACAhB,YAAAA,CAAC,CAACxE,GAAF,GAAQ,EAAR;AACA4E,YAAAA,gBAAgB;;AAChB,gBAAIJ,CAAC,CAACiB,OAAN,EAAe;AACbjB,cAAAA,CAAC,CAACpT,QAAF,GAAa,CAAb;AACD;AACF;;AACD,cAAI,CAACoT,CAAC,CAAC4C,aAAH,IAAoB5C,CAAC,CAACxE,GAAF,CAAM7O,eAA9B,EAA+C;AAC7C,gBAAIob,WAAJ,EAAiB;AACfrR,cAAAA,YAAY,CAACsJ,CAAD,EAAI,YAAW;AACzB+H,gBAAAA,WAAW,CAAChN,KAAZ,CAAkBiF,CAAlB;AACD,eAFW,CAAZ;AAGD;AACF;AACF;AACF,OA1BD;;AA2BA,WAAKgI,aAAL,GAAqB,UAASC,YAAT,EAAuBC,WAAvB,EAAoCC,SAApC,EAA+CC,aAA/C,EAA8D;AACjF,YAAIpH,eAAe,GAAGhB,CAAC,CAACxE,GAAxB;AACAwE,QAAAA,CAAC,CAACoF,WAAF,GAAgB6C,YAAhB;AACAjI,QAAAA,CAAC,CAACqF,UAAF,GAAe6C,WAAf;AACAlI,QAAAA,CAAC,CAAChS,QAAF,GAAaoV,IAAI,CAACiF,KAAL,CAAWF,SAAX,CAAb;AACAnI,QAAAA,CAAC,CAACsI,YAAF,GAAiBF,aAAjB;;AACA,YAAI,CAACpI,CAAC,CAACiB,OAAH,IAAc,CAACD,eAAe,CAAC1T,WAAnC,EAAgD;AAC9C,cAAI0T,eAAe,CAAChT,QAApB,EAA8B;AAC5BgS,YAAAA,CAAC,CAACsF,gBAAF,GAAsBtF,CAAC,CAAChS,QAAF,GAAagT,eAAe,CAAChT,QAA9B,GAA0CgS,CAAC,CAAChS,QAA5C,GAAuDgT,eAAe,CAAChT,QAA5F;AACD,WAFD,MAEO;AACLgS,YAAAA,CAAC,CAACsF,gBAAF,GAAqBtH,QAAQ,CAAEgC,CAAC,CAACqF,UAAF,GAAerF,CAAC,CAACoF,WAAlB,GAAiCpF,CAAC,CAAChS,QAApC,EAA8C,EAA9C,CAA7B;AACD;AACF,SAND,MAMO;AACLgS,UAAAA,CAAC,CAACsF,gBAAF,GAAqBtF,CAAC,CAAChS,QAAvB;AACD;;AACD,YAAI,CAACgS,CAAC,CAACiB,OAAP,EAAgB;AACdjB,UAAAA,CAAC,CAACuF,QAAF,GAAa,CAAC;AACZlJ,YAAAA,KAAK,EAAE,CADK;AAEZ2I,YAAAA,GAAG,EAAEhF,CAAC,CAAChS;AAFK,WAAD,CAAb;AAID;;AACD,YAAI,CAACgS,CAAC,CAAChG,UAAF,KAAiB,CAAjB,IAAsBgG,CAAC,CAACiB,OAAzB,KAAqCD,eAAe,CAAC9U,YAAzD,EAAuE;AACrE8U,UAAAA,eAAe,CAAC9U,YAAhB,CAA6B6O,KAA7B,CAAmCiF,CAAnC;AACD;AACF,OAxBD;;AAyBA,WAAKiG,aAAL,GAAqB,UAASnK,SAAT,EAAoByM,SAApB,EAA+BC,iBAA/B,EAAkDC,kBAAlD,EAAsEC,OAAtE,EAA+E;AAClG,YAAI1H,eAAe,GAAGhB,CAAC,CAACxE,GAAxB;AAAA,YACImN,MADJ;AAEA,YAAIpL,KAAK,CAACzB,SAAD,CAAL,IAAoBA,SAAS,KAAK,IAAtC,EAA4C,OAAO,KAAP;AAC5CkE,QAAAA,CAAC,CAACpT,QAAF,GAAawW,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYvH,SAAZ,CAAb;;AACAkE,QAAAA,CAAC,CAAC4E,kBAAF;;AACA,YAAI,CAAC5E,CAAC,CAACiB,OAAH,IAAcvP,EAAE,GAAG,CAAvB,EAA0B;AACxB,cAAIsP,eAAe,CAACzT,WAAhB,IAA+Bgb,SAAS,KAAK3e,UAA7C,IAA2D2e,SAA/D,EAA0E;AACxEvI,YAAAA,CAAC,CAACjQ,QAAF,GAAa;AACXyV,cAAAA,IAAI,EAAE+C,SAAS,CAACK,QADL;AAEXnD,cAAAA,KAAK,EAAE8C,SAAS,CAACM;AAFN,aAAb;AAID;;AACD,cAAI7H,eAAe,CAACxT,eAAhB,IAAmCgb,iBAAiB,KAAK5e,UAAzD,IAAuE4e,iBAA3E,EAA8F;AAC5FxI,YAAAA,CAAC,CAAChQ,YAAF,GAAiB;AACfwV,cAAAA,IAAI,EAAEgD,iBAAiB,CAACM,KAAlB,CAAwB,GAAxB,CADS;AAEfrD,cAAAA,KAAK,EAAEgD,kBAAkB,CAACK,KAAnB,CAAyB,GAAzB;AAFQ,aAAjB;AAID;;AACD,cAAI9H,eAAe,CAACvT,SAApB,EAA+B;AAC7B,gBAAIib,OAAO,KAAK9e,UAAZ,IAA0B8e,OAA1B,IAAqCA,OAAO,CAACK,MAAjD,EAAyD;AACvDJ,cAAAA,MAAM,GAAGD,OAAO,CAACK,MAAR,CAAeD,KAAf,CAAqB,GAArB,CAAT;AACA9I,cAAAA,CAAC,CAAC/P,MAAF,GAAW0Y,MAAX;AACA3I,cAAAA,CAAC,CAAC/P,MAAF,CAASuV,IAAT,GAAgBmD,MAAhB;;AACA,kBAAID,OAAO,CAACM,OAAR,KAAoBpf,UAApB,IAAkC8e,OAAO,CAACM,OAA9C,EAAuD;AACrDhJ,gBAAAA,CAAC,CAAC/P,MAAF,CAASwV,KAAT,GAAiBiD,OAAO,CAACM,OAAR,CAAgBF,KAAhB,CAAsB,GAAtB,CAAjB;AACD;AACF;AACF;AACF;;AACD,YAAI9I,CAAC,CAACqB,SAAF,KAAgB,CAApB,EAAuB;AACrB,cAAI,CAACrB,CAAC,CAACiB,OAAH,IAAcvP,EAAE,KAAK,CAArB,IAA0B,CAACsO,CAAC,CAACpT,QAA7B,IAAyCoT,CAAC,CAAC2F,WAA/C,EAA4D;AAC1D3F,YAAAA,CAAC,CAACyD,eAAF,CAAkB,CAAlB;AACD;;AACD,cAAIzC,eAAe,CAAC1U,YAApB,EAAkC;AAChC0U,YAAAA,eAAe,CAAC1U,YAAhB,CAA6ByO,KAA7B,CAAmCiF,CAAnC;AACD;AACF;;AACD,eAAO,IAAP;AACD,OAvCD;;AAwCA,WAAKiJ,cAAL,GAAsB,UAASC,KAAT,EAAgB;AACpClJ,QAAAA,CAAC,CAACmJ,WAAF,GAAgBD,KAAhB;;AACA,YAAIlJ,CAAC,CAACxE,GAAF,CAAM4N,aAAV,EAAyB;AACvBpJ,UAAAA,CAAC,CAACxE,GAAF,CAAM4N,aAAN,CAAoBrO,KAApB,CAA0BiF,CAA1B,EAA6B,CAACkJ,KAAD,CAA7B;AACD;AACF,OALD;;AAMA,WAAKG,WAAL,GAAmB,UAASC,QAAT,EAAmBC,OAAnB,EAA4B;AAC7C,YAAIL,KAAK,GAAG,EAAZ;AAAA,YAAgB5N,CAAhB;AAAA,YAAmBgC,CAAnB;;AACA,aAAKhC,CAAC,GAAG,CAAJ,EAAOgC,CAAC,GAAGgM,QAAQ,CAAC5N,MAAzB,EAAiCJ,CAAC,GAAGgC,CAArC,EAAwChC,CAAC,EAAzC,EAA6C;AAC3C4N,UAAAA,KAAK,CAACI,QAAQ,CAAChO,CAAD,CAAT,CAAL,GAAqBiO,OAAO,CAACjO,CAAD,CAA5B;AACD;;AACD0E,QAAAA,CAAC,CAAC4F,QAAF,GAAasD,KAAb;;AACA,YAAIlJ,CAAC,CAACxE,GAAF,CAAMgO,UAAV,EAAsB;AACpBxJ,UAAAA,CAAC,CAACxE,GAAF,CAAMgO,UAAN,CAAiBC,IAAjB,CAAsBzJ,CAAtB,EAAyBA,CAAC,CAAC4F,QAA3B;AACD;AACF,OATD;;AAUA,WAAK8D,MAAL,GAAc,UAASC,SAAT,EAAoBC,QAApB,EAA8B;AAC1C,YAAIV,KAAK,GAAG,EAAZ;AAAA,YAAgB5N,CAAhB;AAAA,YAAmBgC,CAAnB;;AACA,aAAKhC,CAAC,GAAG,CAAJ,EAAOgC,CAAC,GAAGqM,SAAS,CAACjO,MAA1B,EAAkCJ,CAAC,GAAGgC,CAAtC,EAAyChC,CAAC,EAA1C,EAA8C;AAC5C4N,UAAAA,KAAK,CAACS,SAAS,CAACrO,CAAD,CAAV,CAAL,GAAsBsO,QAAQ,CAACtO,CAAD,CAA9B;AACD;;AACD0E,QAAAA,CAAC,CAACmB,GAAF,GAAQ7O,MAAK,CAAC0N,CAAC,CAACmB,GAAH,EAAQ+H,KAAR,CAAb;;AACA,YAAIlJ,CAAC,CAACxE,GAAF,CAAMzP,KAAV,EAAiB;AACfiU,UAAAA,CAAC,CAACxE,GAAF,CAAMzP,KAAN,CAAYgP,KAAZ,CAAkBiF,CAAlB;AACD;AACF,OATD;;AAUA,WAAK6J,UAAL,GAAkB,UAASC,QAAT,EAAmB;AACnCA,QAAAA,QAAQ,GAAIA,QAAQ,KAAK,CAAzB;AACA9J,QAAAA,CAAC,CAAClF,SAAF,GAAcgP,QAAd;;AACA,YAAIA,QAAJ,EAAc;AACZ9J,UAAAA,CAAC,CAAC0F,QAAF,GAAa,CAAb;;AACA,cAAIhR,OAAO,CAACsL,CAAC,CAACrR,EAAH,CAAX,EAAmB;AACjB,gBAAIqR,CAAC,CAACyC,WAAF,EAAJ,EAAqB;AACnBzC,cAAAA,CAAC,CAAC/E,IAAF,CAAOrR,UAAP,EAAmBoW,CAAC,CAACyC,WAAF,EAAnB;AACD,aAFD,MAEO,IAAIzC,CAAC,CAACxE,GAAF,CAAM7P,QAAV,EAAoB;AACzBqU,cAAAA,CAAC,CAAChF,IAAF;AACD;AACF;;AACD,cAAIgF,CAAC,CAACxE,GAAF,CAAMzN,SAAV,EAAqB;AACnBiS,YAAAA,CAAC,CAACxE,GAAF,CAAMzN,SAAN,CAAgBgN,KAAhB,CAAsBiF,CAAtB,EAAyB,CAAC8J,QAAD,CAAzB;AACD;AACF;AACF,OAhBD;;AAiBA,WAAKC,YAAL,GAAoB,UAASC,MAAT,EAAiB;AACnC,YAAIhK,CAAC,CAACqB,SAAF,GAAc,CAAlB,EAAqB;AACnB,cAAIrB,CAAC,CAACxE,GAAF,CAAM7N,WAAV,EAAuB;AACrBqS,YAAAA,CAAC,CAACxE,GAAF,CAAM7N,WAAN,CAAkBoN,KAAlB,CAAwBiF,CAAxB;AACD;AACF;AACF,OAND;AAOD,KAj7BD;;AAk7BA1M,IAAAA,WAAW,GAAG,uBAAW;AACvB,aAAQhC,GAAG,CAAC2Y,IAAJ,IAAY3Y,GAAG,CAAC4Y,oBAAJ,CAAyB,KAAzB,EAAgC,CAAhC,CAApB;AACD,KAFD;;AAGAvb,IAAAA,EAAE,GAAG,YAASwM,GAAT,EAAc;AACjB,aAAO7J,GAAG,CAAC6Y,cAAJ,CAAmBhP,GAAnB,CAAP;AACD,KAFD;;AAGA7I,IAAAA,MAAK,GAAG,eAAS8X,KAAT,EAAgBC,IAAhB,EAAsB;AAC5B,UAAIC,EAAE,GAAIF,KAAK,IAAI,EAAnB;AAAA,UAAwBG,EAAxB;AAAA,UAA4BC,CAA5B;AACAD,MAAAA,EAAE,GAAIF,IAAI,KAAKzgB,UAAT,GAAsB8G,GAAG,CAAChF,cAA1B,GAA2C2e,IAAjD;;AACA,WAAKG,CAAL,IAAUD,EAAV,EAAc;AACZ,YAAIA,EAAE,CAAC3N,cAAH,CAAkB4N,CAAlB,KAAwBF,EAAE,CAACE,CAAD,CAAF,KAAU5gB,UAAtC,EAAkD;AAChD,cAAI,OAAO2gB,EAAE,CAACC,CAAD,CAAT,KAAiB,QAAjB,IAA6BD,EAAE,CAACC,CAAD,CAAF,KAAU,IAA3C,EAAiD;AAC/CF,YAAAA,EAAE,CAACE,CAAD,CAAF,GAAQD,EAAE,CAACC,CAAD,CAAV;AACD,WAFD,MAEO;AACLF,YAAAA,EAAE,CAACE,CAAD,CAAF,GAAQlY,MAAK,CAACgY,EAAE,CAACE,CAAD,CAAH,EAAQD,EAAE,CAACC,CAAD,CAAV,CAAb;AACD;AACF;AACF;;AACD,aAAOF,EAAP;AACD,KAbD;;AAcA5T,IAAAA,YAAY,GAAG,sBAASgE,MAAT,EAAiB+P,QAAjB,EAA2B;AACxC,UAAI,CAAC/P,MAAM,CAACuG,OAAR,IAAmBvP,EAAE,KAAK,CAA9B,EAAiC;AAC/B/H,QAAAA,MAAM,CAACsQ,UAAP,CAAkBwQ,QAAlB,EAA4B,CAA5B;AACD,OAFD,MAEO;AACLA,QAAAA,QAAQ;AACT;AACF,KAND;;AAOAjY,IAAAA,YAAY,GAAG;AACbqM,MAAAA,OAAO,EAAE,CADI;AAEbE,MAAAA,SAAS,EAAE,CAFE;AAGbrT,MAAAA,cAAc,EAAE,CAHH;AAIb0B,MAAAA,aAAa,EAAE,CAJF;AAKbQ,MAAAA,gBAAgB,EAAE;AALL,KAAf;;AAOA2E,IAAAA,OAAM,GAAG,gBAASiY,CAAT,EAAYE,OAAZ,EAAqB;AAC5B,UAAIpP,CAAJ;AAAA,UACIY,MAAM,GAAG,IADb;AAAA,UAEIyO,SAAS,GAAID,OAAO,KAAK9gB,UAF7B;AAAA,UAGIO,YAAY,GAAGuG,GAAG,CAACvG,YAHvB;AAAA,UAIIygB,YAAY,GAAGpY,YAJnB;;AAKA,WAAK8I,CAAL,IAAUkP,CAAV,EAAa;AACX,YAAIA,CAAC,CAAC5N,cAAF,CAAiBtB,CAAjB,CAAJ,EAAyB;AACvB,cAAI,OAAOkP,CAAC,CAAClP,CAAD,CAAR,KAAgB,QAAhB,IAA4BkP,CAAC,CAAClP,CAAD,CAAD,KAAS,IAArC,IAA6CkP,CAAC,CAAClP,CAAD,CAAD,YAAgBtF,KAA7D,IAAsEwU,CAAC,CAAClP,CAAD,CAAD,YAAgB/C,MAA1F,EAAkG;AAChG,gBAAIoS,SAAS,IAAIC,YAAY,CAACF,OAAD,CAAZ,KAA0B9gB,UAA3C,EAAuD;AACrD8G,cAAAA,GAAG,CAACga,OAAD,CAAH,CAAapP,CAAb,IAAkBkP,CAAC,CAAClP,CAAD,CAAnB;AACD,aAFD,MAEO,IAAInR,YAAY,CAACmR,CAAD,CAAZ,KAAoB1R,UAAxB,EAAoC;AACzC8G,cAAAA,GAAG,CAACvG,YAAJ,CAAiBmR,CAAjB,IAAsBkP,CAAC,CAAClP,CAAD,CAAvB;AACA5K,cAAAA,GAAG,CAAC4K,CAAD,CAAH,GAASkP,CAAC,CAAClP,CAAD,CAAV;AACD,aAHM,MAGA,IAAIsP,YAAY,CAACtP,CAAD,CAAZ,KAAoB1R,UAAxB,EAAoC;AACzCsS,cAAAA,MAAM,GAAG,KAAT;AACD,aAFM,MAEA,IAAIxL,GAAG,CAAC4K,CAAD,CAAH,YAAkBuP,QAAtB,EAAgC;AACrCna,cAAAA,GAAG,CAAC4K,CAAD,CAAH,CAAOP,KAAP,CAAarK,GAAb,EAAmB8Z,CAAC,CAAClP,CAAD,CAAD,YAAgBtF,KAAhB,GAAwBwU,CAAC,CAAClP,CAAD,CAAzB,GAA+B,CAACkP,CAAC,CAAClP,CAAD,CAAF,CAAlD;AACD,aAFM,MAEA;AACL5K,cAAAA,GAAG,CAAC4K,CAAD,CAAH,GAASkP,CAAC,CAAClP,CAAD,CAAV;AACD;AACF,WAbD,MAaO,IAAIsP,YAAY,CAACtP,CAAD,CAAZ,KAAoB1R,UAAxB,EAAoC;AACzCsS,YAAAA,MAAM,GAAG,KAAT;AACD,WAFM,MAEA;AACL,mBAAO3J,OAAM,CAACiY,CAAC,CAAClP,CAAD,CAAF,EAAOA,CAAP,CAAb;AACD;AACF;AACF;;AACD,aAAOY,MAAP;AACD,KA7BD;;AA8BA,aAAS4O,gBAAT,CAA0BC,IAA1B,EAAgC;AAC9B,aAAQra,GAAG,CAACnF,WAAJ,IAAmB6K,QAAnB,IAA+B,CAAC1F,GAAG,CAACF,WAApC,IAAoDE,GAAG,CAACJ,KAAJ,CAAUya,IAAV,MAAoBnhB,UAApB,IAAkC8G,GAAG,CAACJ,KAAJ,CAAUya,IAAV,CAA9F;AACD;;AACDjV,IAAAA,KAAK,GAAI,YAAW;AAClB,UAAIkV,GAAG,GAAIrhB,MAAM,CAACshB,WAAlB;AAAA,UACAC,GAAG,GAAG;AACJ/H,QAAAA,GAAG,EAAG6H,GAAG,GAAG,aAAH,GAAmB,kBADxB;AAEJ5M,QAAAA,MAAM,EAAG4M,GAAG,GAAG,aAAH,GAAmB;AAF3B,OADN;;AAKA,eAASG,OAAT,CAAiBC,KAAjB,EAAwB;AACtB,YAAIC,IAAI,GAAGtV,KAAK,CAAC0T,IAAN,CAAW2B,KAAX,CAAX;AAAA,YACIE,GAAG,GAAGD,IAAI,CAAC3P,MADf;;AAEA,YAAIsP,GAAJ,EAAS;AACPK,UAAAA,IAAI,CAAC,CAAD,CAAJ,GAAU,OAAOA,IAAI,CAAC,CAAD,CAArB;;AACA,cAAIC,GAAG,GAAG,CAAV,EAAa;AACXD,YAAAA,IAAI,CAACE,GAAL;AACD;AACF,SALD,MAKO,IAAID,GAAG,KAAK,CAAZ,EAAe;AACpBD,UAAAA,IAAI,CAACzR,IAAL,CAAU,KAAV;AACD;;AACD,eAAOyR,IAAP;AACD;;AACD,eAAStQ,KAAT,CAAesQ,IAAf,EAAqBvM,KAArB,EAA4B;AAC1B,YAAI0M,OAAO,GAAGH,IAAI,CAACI,KAAL,EAAd;AAAA,YACI/G,MAAM,GAAG,CAACwG,GAAG,CAACpM,KAAD,CAAJ,CADb;;AAEA,YAAIkM,GAAJ,EAAS;AACPQ,UAAAA,OAAO,CAAC9G,MAAD,CAAP,CAAgB2G,IAAI,CAAC,CAAD,CAApB,EAAyBA,IAAI,CAAC,CAAD,CAA7B;AACD,SAFD,MAEO;AACLG,UAAAA,OAAO,CAAC9G,MAAD,CAAP,CAAgB3J,KAAhB,CAAsByQ,OAAtB,EAA+BH,IAA/B;AACD;AACF;;AACD,eAASlI,GAAT,GAAe;AACbpI,QAAAA,KAAK,CAACoQ,OAAO,CAACO,SAAD,CAAR,EAAqB,KAArB,CAAL;AACD;;AACD,eAAStN,MAAT,GAAkB;AAChBrD,QAAAA,KAAK,CAACoQ,OAAO,CAACO,SAAD,CAAR,EAAqB,QAArB,CAAL;AACD;;AACD,aAAO;AACLvI,QAAAA,GAAG,EAAEA,GADA;AAEL/E,QAAAA,MAAM,EAAEA;AAFH,OAAP;AAID,KAtCQ,EAAT;;AAuCA,aAASuN,WAAT,CAAqB/E,GAArB,EAA0B;AACxB,aAAO,UAASrN,CAAT,EAAY;AACjB,YAAIyG,CAAC,GAAG,KAAKgC,EAAb;AAAA,YACI9F,MADJ;;AAEA,YAAI,CAAC8D,CAAD,IAAM,CAACA,CAAC,CAACkB,EAAb,EAAiB;AACfhF,UAAAA,MAAM,GAAG,IAAT;AACD,SAFD,MAEO;AACLA,UAAAA,MAAM,GAAG0K,GAAG,CAAC6C,IAAJ,CAAS,IAAT,EAAelQ,CAAf,CAAT;AACD;;AACD,eAAO2C,MAAP;AACD,OATD;AAUD;;AACD3F,IAAAA,YAAY,GAAG;AACbqV,MAAAA,KAAK,EAAED,WAAW,CAAC,YAAW,CAC7B,CADiB,CADL;AAGbE,MAAAA,OAAO,EAAEF,WAAW,CAAC,YAAW;AAC9B,YAAI3L,CAAC,GAAG,KAAKgC,EAAb;AAAA,YACI+B,UADJ;;AAEA,YAAI/D,CAAC,CAACuB,cAAN,EAAsB;AACpB;AACD;;AACDvB,QAAAA,CAAC,CAACuB,cAAF,GAAmB,IAAnB;;AACAvB,QAAAA,CAAC,CAACyD,eAAF,CAAkB,CAAlB;;AACAM,QAAAA,UAAU,GAAI/D,CAAC,CAACxE,GAAF,CAAM5O,QAAN,KAAmBhD,UAAnB,IAAiC,CAAC2T,KAAK,CAACyC,CAAC,CAACxE,GAAF,CAAM5O,QAAP,CAAvC,GAA0DoT,CAAC,CAACxE,GAAF,CAAM5O,QAAN,GAAiBiK,SAA3E,GAAuF,IAArG;;AACA,YAAI,KAAKoM,WAAL,KAAqBc,UAAzB,EAAqC;AACnC,cAAI;AACF,iBAAKd,WAAL,GAAmBc,UAAnB;AACD,WAFD,CAEE,OAAM+H,EAAN,EAAU,CACX;AACF;;AACD,YAAI9L,CAAC,CAACxE,GAAF,CAAMqH,UAAV,EAAsB;AACpB7C,UAAAA,CAAC,CAACxE,GAAF,CAAMqH,UAAN;AACD;AACF,OAlBmB,CAHP;AAsBbkJ,MAAAA,cAAc,EAAEJ,WAAW,CAAC,YAAW;AACrC,YAAI3L,CAAC,GAAG,KAAKgC,EAAb;;AACA,YAAI,CAAChC,CAAC,CAACoB,MAAP,EAAe;AACbpB,UAAAA,CAAC,CAACyD,eAAF,CAAkB,CAAlB;;AACAzD,UAAAA,CAAC,CAACgI,aAAF,CAAgBhI,CAAC,CAACoF,WAAlB,EAA+BpF,CAAC,CAACqF,UAAjC,EAA6CrF,CAAC,CAACgG,mBAAF,EAA7C;;AACAhG,UAAAA,CAAC,CAACgH,OAAF,CAAU,IAAV;AACD;AACF,OAP0B,CAtBd;AA8BbgF,MAAAA,cAAc,EAAEL,WAAW,CAAC,YAAW;AACrC,YAAI3L,CAAC,GAAG,KAAKgC,EAAb;AAAA,YACIhU,QADJ;AAEAA,QAAAA,QAAQ,GAAGgS,CAAC,CAACgG,mBAAF,EAAX;;AACA,YAAI,CAACzI,KAAK,CAACvP,QAAD,CAAN,IAAoBA,QAAQ,KAAKgS,CAAC,CAAChS,QAAvC,EAAiD;AAC/CgS,UAAAA,CAAC,CAACsF,gBAAF,GAAqBtF,CAAC,CAAChS,QAAF,GAAaA,QAAlC;AACD;AACF,OAP0B,CA9Bd;AAsCbie,MAAAA,KAAK,EAAEN,WAAW,CAAC,YAAW;AAC5B,YAAI3L,CAAC,GAAG,KAAKgC,EAAb;;AACAhC,QAAAA,CAAC,CAACgD,SAAF;AACD,OAHiB,CAtCL;AA0CbkJ,MAAAA,KAAK,EAAEP,WAAW,CAAC,YAAW;AAC5B,YAAItE,WAAW,GAAI5R,eAAe,CAAC,KAAKyW,KAAL,CAAWtE,IAAZ,CAAf,IAAoC,IAAvD;;AACA,aAAK5F,EAAL,CAAQgF,OAAR,CAAgB,KAAhB;;AACA,aAAKhF,EAAL,CAAQmF,QAAR,CAAiB,KAAK+E,KAAL,CAAWtE,IAA5B,EAAkCP,WAAlC;AACD,OAJiB,CA1CL;AA+Cb8E,MAAAA,UAAU,EAAER,WAAW,CAAC,YAAW;AACjC,YAAI3L,CAAC,GAAG,KAAKgC,EAAb;;AACA,YAAI,CAAChC,CAAC,CAACoM,OAAH,IAAc,CAACjV,QAAnB,EAA6B;AAC3B6I,UAAAA,CAAC,CAAChS,QAAF,GAAagS,CAAC,CAACgG,mBAAF,EAAb;AACD;AACF,OALsB,CA/CV;AAqDbqG,MAAAA,cAAc,EAAEV,WAAW,CAAC,YAAW,CACtC,CAD0B,CArDd;AAuDbW,MAAAA,SAAS,EAAEX,WAAW,CAAC,YAAW;AAChC,aAAK3J,EAAL,CAAQyB,eAAR,CAAwB,CAAxB;AACD,OAFqB,CAvDT;AA0DbxI,MAAAA,IAAI,EAAE0Q,WAAW,CAAC,YAAW;AAC3B,aAAK3J,EAAL,CAAQyB,eAAR,CAAwB,CAAxB;AACD,OAFgB,CA1DJ;AA6Db8I,MAAAA,OAAO,EAAEZ,WAAW,CAAC,YAAW;AAC9B,aAAK3J,EAAL,CAAQyB,eAAR,CAAwB,CAAxB;AACD,OAFmB,CA7DP;AAgEb+I,MAAAA,QAAQ,EAAEb,WAAW,CAAC,UAASpS,CAAT,EAAY;AAChC,YAAIyG,CAAC,GAAG,KAAKgC,EAAb;AAAA,YACI1G,CADJ;AAAA,YACOgC,CADP;AAAA,YACUmP,OADV;AAAA,YACmBlH,QAAQ,GAAG,CAD9B;AAAA,YAEImH,UAAU,GAAInT,CAAC,CAACtM,IAAF,KAAW,UAF7B;AAAA,YAGI0f,MAAM,GAAGpT,CAAC,CAACqT,MAAF,CAASrH,QAHtB;AAAA,YAIInE,MAAM,GAAI7H,CAAC,CAAC6H,MAAF,IAAY,CAJ1B;AAAA,YAKIyL,KAAK,GAAItT,CAAC,CAACsT,KAAF,IAAW,CALxB;AAMA7M,QAAAA,CAAC,CAACuF,QAAF,GAAa,EAAb;;AACA,YAAIoH,MAAM,IAAIA,MAAM,CAACjR,MAArB,EAA6B;AAC3B,eAAKJ,CAAC,GAAG,CAAJ,EAAOgC,CAAC,GAAGqP,MAAM,CAACjR,MAAvB,EAA+BJ,CAAC,GAAGgC,CAAnC,EAAsChC,CAAC,EAAvC,EAA2C;AACzC0E,YAAAA,CAAC,CAACuF,QAAF,CAAW3L,IAAX,CAAgB;AACdyC,cAAAA,KAAK,EAAEsQ,MAAM,CAACtQ,KAAP,CAAaf,CAAb,IAAkBzE,SADX;AAEdmO,cAAAA,GAAG,EAAE2H,MAAM,CAAC3H,GAAP,CAAW1J,CAAX,IAAgBzE;AAFP,aAAhB;AAID;;AACD0O,UAAAA,QAAQ,GAAG,CAACoH,MAAM,CAAC3H,GAAP,CAAW,CAAX,IAAgB2H,MAAM,CAACtQ,KAAP,CAAa,CAAb,CAAjB,IAAoCxF,SAA/C;AACAuK,UAAAA,MAAM,GAAGgC,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYiC,QAAQ,IAAIhM,CAAC,CAACqT,MAAF,CAAS5e,QAAT,GAAoB6I,SAAxB,CAApB,CAAT;AACD;;AACD,YAAI,CAAC0G,KAAK,CAAC6D,MAAD,CAAV,EAAoB;AAClBpB,UAAAA,CAAC,CAACgI,aAAF,CAAgB5G,MAAhB,EAAwByL,KAAxB,EAA+B7M,CAAC,CAACgG,mBAAF,EAA/B;;AACA,cAAI5E,MAAM,IAAIyL,KAAV,IAAmBzL,MAAM,KAAKyL,KAAlC,EAAyC;AACvCtW,YAAAA,YAAY,CAACwV,cAAb,CAA4BtC,IAA5B,CAAiC,IAAjC,EAAuClQ,CAAvC;AACD;AACF;AACF,OAxBoB,CAhER;AAyFbuT,MAAAA,UAAU,EAAEnB,WAAW,CAAC,YAAW,CAClC,CADsB,CAzFV;AA2FboB,MAAAA,OAAO,EAAEpB,WAAW,CAAC,UAASpS,CAAT,EAAY;AAC/B,YAAIyG,CAAC,GAAG,KAAKgC,EAAb;AACAzL,QAAAA,YAAY,CAACiW,QAAb,CAAsB/C,IAAtB,CAA2B,IAA3B,EAAiClQ,CAAjC;;AACAyG,QAAAA,CAAC,CAACuH,UAAF;AACD,OAJmB,CA3FP;AAgGbyF,MAAAA,OAAO,EAAErB,WAAW,CAAC,YAAW,CAC/B,CADmB,CAhGP;AAkGbsB,MAAAA,UAAU,EAAEtB,WAAW,CAAC,YAAW;AACjC,aAAK3J,EAAL,CAAQ4B,QAAR;AACD,OAFsB,CAlGV;AAqGbsJ,MAAAA,OAAO,EAAEvB,WAAW,CAAC,YAAW;AAC9B,YAAI3L,CAAC,GAAG,KAAKgC,EAAb;;AACAhC,QAAAA,CAAC,CAACyD,eAAF,CAAkB,CAAlB;AACD,OAHmB;AArGP,KAAf;;AA0GAlO,IAAAA,OAAO,GAAG,iBAAS4X,EAAT,EAAa;AACrB,UAAIjR,MAAJ;;AACA,UAAI,CAACiR,EAAD,IAAQ,CAACA,EAAE,CAAClgB,IAAJ,IAAY,CAACkgB,EAAE,CAAC/iB,GAAhB,IAAuB,CAAC+iB,EAAE,CAACrf,SAAvC,EAAmD;AACjDoO,QAAAA,MAAM,GAAG,KAAT;AACD,OAFD,MAEO,IAAIiR,EAAE,CAACrf,SAAH,IAAiBqf,EAAE,CAAClgB,IAAH,IAAW6d,gBAAgB,CAACqC,EAAE,CAAClgB,IAAJ,CAAhD,EAA4D;AACjEiP,QAAAA,MAAM,GAAG,KAAT;AACD,OAFM,MAEA;AACLA,QAAAA,MAAM,GAAKiR,EAAE,CAAClgB,IAAH,GAAUuI,YAAY,CAAC;AAAEvI,UAAAA,IAAI,EAAEkgB,EAAE,CAAClgB;AAAX,SAAD,CAAtB,GAA4CuI,YAAY,CAAC;AAAEpL,UAAAA,GAAG,EAAE+iB,EAAE,CAAC/iB;AAAV,SAAD,CAAZ,IAAiCsG,GAAG,CAACH,SAArC,IAAkD4c,EAAE,CAAC/iB,GAAH,CAAO2M,KAAP,CAAa,QAAb,CAAzG;AACD;;AACD,aAAOmF,MAAP;AACD,KAVD;;AAWAvG,IAAAA,WAAW,GAAG,qBAASyX,MAAT,EAAiB;AAC7B,UAAIhjB,GAAJ;;AACA,UAAIgjB,MAAJ,EAAY;AACVhjB,QAAAA,GAAG,GAAI+M,QAAQ,GAAGY,QAAH,GAAerH,GAAG,CAACN,KAAJ,CAAUkJ,WAAV,CAAsB,WAAtB,IAAqCtB,QAArC,GAAgDD,QAA9E;AACAqV,QAAAA,MAAM,CAAC5L,GAAP,GAAapX,GAAb;;AACA,YAAIgjB,MAAM,CAACC,cAAP,KAA0BzjB,UAA9B,EAA0C;AACxCwjB,UAAAA,MAAM,CAAC9L,YAAP,GAAsB,KAAtB;AACD;AACF;;AACD,UAAIpL,mBAAJ,EAAyB;AACvBC,QAAAA,kBAAkB,GAAG,IAArB;AACD;;AACD,aAAO/L,GAAP;AACD,KAbD;;AAcAoL,IAAAA,YAAY,GAAG,sBAASgV,CAAT,EAAY;AACzB,UAAI,CAAC9Z,GAAG,CAACvF,aAAL,IAAsB,CAACuF,GAAG,CAACyI,QAA/B,EAAyC,OAAO,KAAP;AACzC,UAAI/O,GAAG,GAAIogB,CAAC,CAACpgB,GAAF,IAAS,IAApB;AAAA,UACIkjB,IAAI,GAAI9C,CAAC,CAACvd,IAAF,IAAU,IADtB;AAAA,UAEIsgB,EAAE,GAAG7c,GAAG,CAACzC,YAFb;AAAA,UAGIiO,MAHJ;AAAA,UAII8H,MAJJ;AAAA,UAKIwJ,OALJ;AAAA,UAMI3I,IANJ;AAOA,UAAIyI,IAAI,IAAI5c,GAAG,CAACN,KAAJ,CAAUkd,IAAV,MAAoB1jB,UAAhC,EAA4C,OAAQ8G,GAAG,CAACN,KAAJ,CAAUkd,IAAV,KAAmB,CAACxC,gBAAgB,CAACwC,IAAD,CAA5C;;AAC5C,UAAI,CAAC5X,QAAL,EAAe;AACbA,QAAAA,QAAQ,GAAG,EAAX;;AACA,aAAKmP,IAAL,IAAa0I,EAAb,EAAiB;AACf,cAAIA,EAAE,CAAC3Q,cAAH,CAAkBiI,IAAlB,CAAJ,EAA6B;AAC3BnP,YAAAA,QAAQ,CAACkE,IAAT,CAAciL,IAAd;;AACA,gBAAI0I,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAb,EAAsB;AACpBqH,cAAAA,QAAQ,GAAGA,QAAQ,CAAC+X,MAAT,CAAgBF,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAzB,CAAX;AACD;AACF;AACF;;AACDqH,QAAAA,QAAQ,GAAG,IAAI6C,MAAJ,CAAW,SAAS7C,QAAQ,CAAC8C,IAAT,CAAc,GAAd,CAAT,GAA8B,YAAzC,EAAuD,GAAvD,CAAX;AACD;;AACDgV,MAAAA,OAAO,GAAIpjB,GAAG,GAAGA,GAAG,CAACsjB,WAAJ,GAAkB3W,KAAlB,CAAwBrB,QAAxB,CAAH,GAAuC,IAArD;;AACA,UAAI,CAAC8X,OAAD,IAAY,CAACA,OAAO,CAAC9R,MAAzB,EAAiC;AAC/B,YAAI,CAAC4R,IAAL,EAAW;AACTpR,UAAAA,MAAM,GAAG,KAAT;AACD,SAFD,MAEO;AACL8H,UAAAA,MAAM,GAAGsJ,IAAI,CAACK,OAAL,CAAa,GAAb,CAAT;AACAH,UAAAA,OAAO,GAAG,CAACxJ,MAAM,KAAK,CAAC,CAAZ,GAAgBsJ,IAAI,CAACM,MAAL,CAAY,CAAZ,EAAe5J,MAAf,CAAhB,GAAyCsJ,IAA1C,EAAgDM,MAAhD,CAAuD,CAAvD,CAAV;AACD;AACF,OAPD,MAOO;AACLJ,QAAAA,OAAO,GAAGA,OAAO,CAAC,CAAD,CAAjB;AACD;;AACD,UAAIA,OAAO,IAAI9c,GAAG,CAACN,KAAJ,CAAUod,OAAV,MAAuB5jB,UAAtC,EAAkD;AAChDsS,QAAAA,MAAM,GAAIxL,GAAG,CAACN,KAAJ,CAAUod,OAAV,KAAsB,CAAC1C,gBAAgB,CAAC0C,OAAD,CAAjD;AACD,OAFD,MAEO;AACLF,QAAAA,IAAI,GAAG,WAAWE,OAAlB;AACAtR,QAAAA,MAAM,GAAGxL,GAAG,CAACN,KAAJ,CAAUkJ,WAAV,CAAsB;AAAErM,UAAAA,IAAI,EAAEqgB;AAAR,SAAtB,CAAT;AACA5c,QAAAA,GAAG,CAACN,KAAJ,CAAUod,OAAV,IAAqBtR,MAArB;AACAA,QAAAA,MAAM,GAAIA,MAAM,IAAIxL,GAAG,CAACN,KAAJ,CAAUkd,IAAV,CAAV,IAA6B,CAACxC,gBAAgB,CAACwC,IAAD,CAAxD;AACD;;AACD,aAAOpR,MAAP;AACD,KA1CD;;AA2CArG,IAAAA,SAAS,GAAG,qBAAW;AACrB,UAAI,CAACnF,GAAG,CAACvF,aAAL,IAAsB,CAACuF,GAAG,CAACyI,QAA/B,EAAyC;AACvCzI,QAAAA,GAAG,CAACN,KAAJ,CAAUC,UAAV,GAAuB,IAAvB;AACAgF,QAAAA,UAAU,GAAG,IAAb;AACA,eAAO,KAAP;AACD;;AACD,UAAI+M,CAAC,GAAIhJ,KAAK,KAAKxP,UAAV,GAAwBwN,OAAO,IAAIiC,KAAK,CAACtK,OAAN,KAAkB,EAA7B,GAAkC,IAAIqK,KAAJ,CAAU,IAAV,CAAlC,GAAoD,IAAIA,KAAJ,EAA5E,GAA2F,IAApG;AAAA,UACIyL,IADJ;AAAA,UACUgJ,MADV;AAAA,UACkBC,OAAO,GAAG,EAD5B;AAAA,UACgCP,EADhC;AAAA,UACoCjS,CADpC;;AAEA,eAASyS,EAAT,CAAYC,CAAZ,EAAe;AACb,YAAIC,OAAJ;AAAA,YAAa3Q,CAAb;AAAA,YACIpB,MAAM,GAAG,KADb;AAAA,YAEIgS,IAAI,GAAG,KAFX;AAGA,YAAI,CAAC9L,CAAD,IAAM,OAAOA,CAAC,CAAC9I,WAAT,KAAyB,UAAnC,EAA+C,OAAO4C,MAAP;;AAC/C,YAAI8R,CAAC,YAAYhY,KAAjB,EAAwB;AACtB,eAAKsF,CAAC,GAAG,CAAJ,EAAOgC,CAAC,GAAG0Q,CAAC,CAACtS,MAAlB,EAA0BJ,CAAC,GAAGgC,CAA9B,EAAiChC,CAAC,EAAlC,EAAsC;AACpC,gBAAI5K,GAAG,CAACN,KAAJ,CAAU4d,CAAC,CAAC1S,CAAD,CAAX,KAAmB8G,CAAC,CAAC9I,WAAF,CAAc0U,CAAC,CAAC1S,CAAD,CAAf,EAAoBvE,KAApB,CAA0BrG,GAAG,CAACpF,SAA9B,CAAvB,EAAiE;AAC/D4iB,cAAAA,IAAI,GAAG,IAAP;AACAxd,cAAAA,GAAG,CAACN,KAAJ,CAAU4d,CAAC,CAAC1S,CAAD,CAAX,IAAkB,IAAlB;AACA5K,cAAAA,GAAG,CAACJ,KAAJ,CAAU0d,CAAC,CAAC1S,CAAD,CAAX,IAAkB,CAAC,CAAE0S,CAAC,CAAC1S,CAAD,CAAD,CAAKvE,KAAL,CAAWe,SAAX,CAArB;AACD;AACF;;AACDoE,UAAAA,MAAM,GAAGgS,IAAT;AACD,SATD,MASO;AACLD,UAAAA,OAAO,GAAI7L,CAAC,IAAI,OAAOA,CAAC,CAAC9I,WAAT,KAAyB,UAA9B,GAA2C8I,CAAC,CAAC9I,WAAF,CAAc0U,CAAd,CAA3C,GAA8D,KAAzE;AACA9R,UAAAA,MAAM,GAAG,CAAC,EAAE+R,OAAO,IAAKA,OAAO,CAAClX,KAAR,CAAcrG,GAAG,CAACpF,SAAlB,CAAd,CAAV;AACD;;AACD,eAAO4Q,MAAP;AACD;;AACDqR,MAAAA,EAAE,GAAG7c,GAAG,CAACzC,YAAT;;AACA,WAAK4W,IAAL,IAAa0I,EAAb,EAAiB;AACf,YAAIA,EAAE,CAAC3Q,cAAH,CAAkBiI,IAAlB,CAAJ,EAA6B;AAC3BgJ,UAAAA,MAAM,GAAG,WAAWhJ,IAApB;AACAiJ,UAAAA,OAAO,CAACjJ,IAAD,CAAP,GAAgBkJ,EAAE,CAACR,EAAE,CAAC1I,IAAD,CAAF,CAAS5X,IAAV,CAAlB;AACA6gB,UAAAA,OAAO,CAACD,MAAD,CAAP,GAAkBC,OAAO,CAACjJ,IAAD,CAAzB;;AACA,cAAIA,IAAI,CAAC9N,KAAL,CAAWe,SAAX,CAAJ,EAA2B;AACzBpH,YAAAA,GAAG,CAACJ,KAAJ,CAAUuU,IAAV,IAAkB,IAAlB;AACAnU,YAAAA,GAAG,CAACJ,KAAJ,CAAUud,MAAV,IAAoB,IAApB;AACD,WAHD,MAGO;AACLnd,YAAAA,GAAG,CAACJ,KAAJ,CAAUuU,IAAV,IAAkB,KAAlB;AACAnU,YAAAA,GAAG,CAACJ,KAAJ,CAAUud,MAAV,IAAoB,KAApB;AACD;;AACD,cAAIN,EAAE,CAAC1I,IAAD,CAAF,IAAY0I,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAzB,EAAkC;AAChC,iBAAKiN,CAAC,GAAGiS,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAT,CAAiBqN,MAAjB,GAA0B,CAAnC,EAAsCJ,CAAC,IAAI,CAA3C,EAA8CA,CAAC,EAA/C,EAAmD;AACjDwS,cAAAA,OAAO,CAAC,WAAWP,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAT,CAAiBiN,CAAjB,CAAZ,CAAP,GAA0CwS,OAAO,CAACjJ,IAAD,CAAjD;AACAnU,cAAAA,GAAG,CAACN,KAAJ,CAAUmd,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAT,CAAiBiN,CAAjB,CAAV,IAAiCwS,OAAO,CAACjJ,IAAD,CAAxC;AACAnU,cAAAA,GAAG,CAACJ,KAAJ,CAAUid,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAT,CAAiBiN,CAAjB,CAAV,IAAiCwS,OAAO,CAACjJ,IAAD,CAAxC;AACD;AACF;AACF;AACF;;AACDiJ,MAAAA,OAAO,CAACxU,WAAR,GAAuB8I,CAAC,GAAG2L,EAAH,GAAQ,IAAhC;AACArd,MAAAA,GAAG,CAACN,KAAJ,GAAYkC,MAAK,CAAC5B,GAAG,CAACN,KAAL,EAAY0d,OAAZ,CAAjB;AACApd,MAAAA,GAAG,CAACN,KAAJ,CAAUC,UAAV,GAAuBiF,YAAY,EAAnC;AACAD,MAAAA,UAAU,GAAG3E,GAAG,CAACN,KAAJ,CAAUC,UAAvB;AACA,aAAO,IAAP;AACD,KAvDD;;AAwDA4C,IAAAA,OAAO,GAAG,EAAV;;AAEAiB,IAAAA,GAAG,GAAG,eAAW,CAChB,CADD;;AAEAK,IAAAA,OAAO,GAAG,iBAAS4Z,IAAT,EAAe;AACvB,UAAIzc,EAAE,KAAK,CAAP,IAAYyc,IAAI,CAACriB,KAAL,GAAa,CAAzB,IAA8BqiB,IAAI,CAACphB,MAAvC,EAA+C;AAC7CohB,QAAAA,IAAI,CAACphB,MAAL,GAAc,KAAd;AACD;;AACD,aAAOohB,IAAP;AACD,KALD;;AAMA3Z,IAAAA,SAAS,GAAG,mBAAS2Z,IAAT,EAAeC,IAAf,EAAqB;AAC/B,UAAID,IAAI,IAAI,CAACA,IAAI,CAACjhB,aAAd,KAAgCihB,IAAI,CAACpiB,KAAL,IAAcoiB,IAAI,CAAC5gB,WAAnB,IAAkC4gB,IAAI,CAAC3gB,eAAvC,IAA0D2gB,IAAI,CAAC1gB,SAA/F,CAAJ,EAA+G;AAC7G0gB,QAAAA,IAAI,CAACjhB,aAAL,GAAqB,IAArB;AACD;;AACD,aAAOihB,IAAP;AACD,KALD;;AAMA1Z,IAAAA,QAAQ,GAAG,kBAAS4Z,IAAT,EAAe,CACzB,CADD;;AAEA9c,IAAAA,SAAS,GAAG,qBAAW;AACrB,aAAO,KAAP;AACD,KAFD;;AAGAsC,IAAAA,aAAa,GAAG,uBAAS2W,CAAT,EAAY;AAC1B,UAAI8D,KAAJ;;AACA,WAAKA,KAAL,IAAc9D,CAAd,EAAiB;AACf,YAAIA,CAAC,CAAC5N,cAAF,CAAiB0R,KAAjB,KAA2B,OAAO9D,CAAC,CAAC8D,KAAD,CAAR,KAAoB,UAAnD,EAA+D;AAC7D9D,UAAAA,CAAC,CAAC8D,KAAD,CAAD,GAAW/c,SAAX;AACD;AACF;;AACD+c,MAAAA,KAAK,GAAG,IAAR;AACD,KARD;;AASAxa,IAAAA,UAAU,GAAG,oBAASqK,UAAT,EAAqB;AAChC,UAAIA,UAAU,KAAKvU,UAAnB,EAA+B;AAC7BuU,QAAAA,UAAU,GAAG,KAAb;AACD;;AACD,UAAIlM,QAAQ,IAAIkM,UAAhB,EAA4B;AAC1BzN,QAAAA,GAAG,CAACwN,OAAJ,CAAYC,UAAZ;AACD;AACF,KAPD;;AAQApK,IAAAA,iBAAiB,GAAG,2BAAS/E,QAAT,EAAmB;AACrC,UAAIuf,SAAS,GAAG,IAAhB;AAAA,UAAsBnkB,GAAtB;;AACA,UAAI4E,QAAJ,EAAc;AACZ,YAAIA,QAAQ,CAAC+H,KAAT,CAAe,gBAAf,CAAJ,EAAsC;AACpCwX,UAAAA,SAAS,GAAGvf,QAAQ,CAAC4e,MAAT,CAAgB5e,QAAQ,CAAC0e,WAAT,GAAuBc,WAAvB,CAAmC,OAAnC,IAA8C,CAA9D,CAAZ;AACA,cAAID,SAAJ,EAAe,OAAOvf,QAAP;AAChB,SAHD,MAGO,IAAIA,QAAQ,CAACwf,WAAT,CAAqB,GAArB,MAA8Bxf,QAAQ,CAAC0M,MAAT,GAAkB,CAApD,EAAuD;AAC5D1M,UAAAA,QAAQ,IAAI,GAAZ;AACD;AACF;;AACD5E,MAAAA,GAAG,GAAG,CAAC4E,QAAQ,IAAIA,QAAQ,CAACwf,WAAT,CAAqB,GAArB,MAA8B,CAAC,CAA3C,GAA+Cxf,QAAQ,CAAC4e,MAAT,CAAgB,CAAhB,EAAmB5e,QAAQ,CAACwf,WAAT,CAAqB,GAArB,IAA4B,CAA/C,CAA/C,GAAmG,IAApG,IAA4G9d,GAAG,CAAC1B,QAAtH;;AACA,UAAI0B,GAAG,CAAClF,UAAR,EAAoB;AAClBpB,QAAAA,GAAG,IAAK,SAAS,IAAIqkB,IAAJ,GAAWC,OAAX,EAAjB;AACD;;AACD,aAAOtkB,GAAP;AACD,KAfD;;AAgBA2I,IAAAA,cAAc,GAAG,0BAAW;AAC1BrB,MAAAA,EAAE,GAAGsM,QAAQ,CAACtN,GAAG,CAACrG,YAAL,EAAmB,EAAnB,CAAb;;AACA,UAAIqH,EAAE,KAAK,CAAP,IAAYA,EAAE,KAAK,CAAvB,EAA0B;AACxBhB,QAAAA,GAAG,CAACrG,YAAJ,GAAmBqH,EAAE,GAAGkC,mBAAxB;AACD;;AACD,UAAI+a,OAAO,GAAIje,GAAG,CAACpG,SAAJ,IAAiBoG,GAAG,CAACnG,UAArB,GAAkC,YAAlC,GAAiD,MAAhE;;AACA,UAAImG,GAAG,CAACvF,aAAJ,IAAqB,CAACuF,GAAG,CAACH,SAA1B,IAAuCG,GAAG,CAACzC,YAAJ,CAAiBG,GAAjB,CAAqBD,QAA5D,IAAwEuD,EAAE,GAAG,CAAjF,EAAoF;AAClFhB,QAAAA,GAAG,CAACrG,YAAJ,GAAmBqH,EAAE,GAAG,CAAxB;AACD;;AACDhB,MAAAA,GAAG,CAAC3B,OAAJ,GAAc2B,GAAG,CAAC5B,aAAJ,IAAqB4B,GAAG,CAACH,SAAJ,GAAgB,oBAAhB,GAAwCmB,EAAE,KAAK,CAAP,GAAW,gBAAX,GAA8B,gBAA3F,CAAd;;AACA,UAAIA,EAAE,GAAG,CAAT,EAAY;AACVhB,QAAAA,GAAG,CAAChF,cAAJ,GAAqB4G,MAAK,CAAC5B,GAAG,CAAChF,cAAL,EAAqBgF,GAAG,CAACtD,aAAzB,CAA1B;AACAsD,QAAAA,GAAG,CAACb,QAAJ,CAAaC,SAAb,GAAyB,IAAzB;AACAY,QAAAA,GAAG,CAAChF,cAAJ,GAAqB4G,MAAK,CAAC5B,GAAG,CAAChF,cAAL,EAAqBgF,GAAG,CAAC9C,gBAAzB,CAA1B;AACA8C,QAAAA,GAAG,CAAChB,YAAJ,CAAiBE,MAAjB,GAA0B,IAAI2I,MAAJ,CAAW,aAAaF,cAAc,CAACG,IAAf,CAAoB,GAApB,CAAb,GAAwC,YAAnD,EAAiE,GAAjE,CAA1B;AACA9H,QAAAA,GAAG,CAACb,QAAJ,CAAaK,SAAb,GAAyB,IAAzB;AACD,OAND,MAMO;AACLQ,QAAAA,GAAG,CAACb,QAAJ,CAAaK,SAAb,GAAyB,KAAzB;AACD;;AACDQ,MAAAA,GAAG,CAACjB,WAAJ,GAAkBiB,GAAG,CAAChB,YAAJ,CAAkBgC,EAAE,KAAK,CAAP,GAAW,QAAX,GAAsB,QAAxC,CAAlB;AACAhB,MAAAA,GAAG,CAAC1B,QAAJ,GAAe,CAAC0C,EAAE,KAAK,CAAP,GAAW,mBAAX,GAAiC,0BAAlC,EAA8Dkd,OAA9D,CAAsE,MAAtE,EAA8ED,OAA9E,CAAf;AACAje,MAAAA,GAAG,CAACb,QAAJ,CAAaE,QAAb,GAAwBW,GAAG,CAACb,QAAJ,CAAaG,YAAb,GAA4BU,GAAG,CAACb,QAAJ,CAAaI,MAAb,GAAuByB,EAAE,GAAG,CAAhF;AACD,KAtBD;;AAuBA+B,IAAAA,UAAU,GAAG,oBAASob,QAAT,EAAmBC,gBAAnB,EAAqC;AAChD,UAAI,CAACxe,KAAL,EAAY;AACV;AACD;;AACDA,MAAAA,KAAK,CAACye,WAAN,CAAkBF,QAAlB,EAA4BC,gBAA5B;AACD,KALD;;AAMApb,IAAAA,SAAS,GAAG,qBAAW,CACtB,CADD;;AAEAgB,IAAAA,OAAO,GAAG,KAAKiK,YAAf;;AACAvK,IAAAA,SAAS,GAAG,qBAAW;AACrB,UAAI4a,GAAG,GAAG,EAAV;;AACA,UAAIte,GAAG,CAACpG,SAAR,EAAmB;AACjB0kB,QAAAA,GAAG,CAACpV,IAAJ,CAASvF,MAAM,CAAC2E,QAAhB;AACD;;AACD,UAAItI,GAAG,CAACnG,UAAR,EAAoB;AAClBykB,QAAAA,GAAG,CAACpV,IAAJ,CAASvF,MAAM,CAAC6E,UAAhB;AACD;;AACD,UAAIxI,GAAG,CAAC9F,kBAAR,EAA4B;AAC1BokB,QAAAA,GAAG,CAACpV,IAAJ,CAASvF,MAAM,CAAC4E,QAAhB;AACD;;AACD,aAAO+V,GAAG,CAACxW,IAAJ,CAAS,GAAT,CAAP;AACD,KAZD;;AAaArE,IAAAA,iBAAiB,GAAG,6BAAW;AAC7B,UAAI8a,IAAI,GAAG/a,GAAG,CAAC,WAAD,CAAd;AAAA,UACIgb,CAAC,GAAGxe,GAAG,CAACoP,eAAJ,EADR;AAAA,UAEIkP,GAAG,GAAG3a,MAFV;AAAA,UAGI6X,KAAK,GAAG;AACNjf,QAAAA,IAAI,EAAE;AADA,OAHZ;;AAMA,UAAIyD,GAAG,CAACH,SAAR,EAAmB;AACjB;AACD;;AACD,UAAI,CAACG,GAAG,CAACiJ,EAAJ,EAAL,EAAe;AACb,YAAItE,UAAJ,EAAgB;AACd3E,UAAAA,GAAG,CAACtB,GAAJ,CAAQ+f,SAAR,GAAoB/a,SAAS,KAAK,GAAd,GAAoB4a,GAAG,CAACpW,UAAxB,GAAqC,GAArC,IAA4CsW,CAAC,KAAK,IAAN,GAAaF,GAAG,CAAClW,WAAjB,GAA+BkW,GAAG,CAACnW,QAA/E,CAApB;AACD;;AACDnI,QAAAA,GAAG,CAAClB,aAAJ,GAAoB,IAApB;AACAkD,QAAAA,eAAe,CAAC;AACdzF,UAAAA,IAAI,EAAE,WADQ;AAEdmiB,UAAAA,UAAU,EAAE,IAFE;AAGdlD,UAAAA,KAAK,EAAEA;AAHO,SAAD,CAAf;AAKA1Y,QAAAA,UAAU,CAAC0Y,KAAD,CAAV;AACD,OAXD,MAWO;AACL,YAAIxb,GAAG,CAACtB,GAAR,EAAa;AACXsB,UAAAA,GAAG,CAACtB,GAAJ,CAAQ+f,SAAR,GAAoB,CAAC/a,SAAS,EAAV,EAAc4a,GAAG,CAACpW,UAAlB,EAA8BoW,GAAG,CAAC9f,SAAJ,IAAiBwB,GAAG,CAAClB,aAAJ,GAAoB,MAAMwf,GAAG,CAACjW,YAA9B,GAA6C,EAA9D,CAA9B,EAAiGP,IAAjG,CAAsG,GAAtG,CAApB;AACD;AACF;AACF,KA1BD;;AA2BA/F,IAAAA,UAAU,GAAG,oBAASqM,KAAT,EAAgB/C,OAAhB,EAAyBC,MAAzB,EAAiC;AAC5C,UAAIrK,QAAQ,CAACmN,KAAD,CAAR,KAAoBlV,UAAxB,EAAoC;AAClC+H,QAAAA,QAAQ,CAACmN,KAAD,CAAR,GAAkB,EAAlB;AACD;;AACDnN,MAAAA,QAAQ,CAACmN,KAAD,CAAR,CAAgBlF,IAAhB,CAAqB;AACnB8K,QAAAA,MAAM,EAAE3I,OADW;AAEnB4I,QAAAA,KAAK,EAAG3I,MAAM,IAAI,IAFC;AAGnB4D,QAAAA,KAAK,EAAE;AAHY,OAArB;AAKD,KATD;;AAUAlN,IAAAA,eAAe,GAAG,yBAAS4H,QAAT,EAAmB;AACnC,UAAI,CAACA,QAAL,EAAe;AACbA,QAAAA,QAAQ,GAAG;AACTrN,UAAAA,IAAI,EAAGyD,GAAG,CAACiJ,EAAJ,KAAW,SAAX,GAAuB;AADrB,SAAX;AAGD;;AACD,UAAI,CAAC3H,OAAD,IAAYsI,QAAZ,IAAwB,CAACA,QAAQ,CAAC8U,UAAtC,EAAkD,OAAO,KAAP;AAClD,UAAI9U,QAAQ,CAACrN,IAAT,KAAkB,WAAlB,KAAkCyD,GAAG,CAACiJ,EAAJ,MAAa1H,QAAQ,IAAI,CAACqI,QAAQ,CAAC8U,UAArE,CAAJ,EAAuF,OAAO,KAAP;AACvF,UAAIC,MAAM,GAAG;AACPC,QAAAA,OAAO,EAAGhV,QAAQ,IAAIA,QAAQ,CAAC8U,UAArB,GAAkC1e,GAAG,CAACiJ,EAAJ,EAAlC,GAA6C,CAAC1H;AADjD,OAAb;AAAA,UAGIsd,QAAQ,GAAIjV,QAAQ,IAAIA,QAAQ,CAACrN,IAArB,GAA4B0E,QAAQ,CAAC2I,QAAQ,CAACrN,IAAV,CAAR,IAA2B,EAAvD,GAA4D,EAH5E;AAAA,UAIIuiB,KAAK,GAAG,EAJZ;AAAA,UAIgBlU,CAJhB;AAAA,UAImBgC,CAJnB;AAAA,UAKI+N,IAAI,GAAG,CAACgE,MAAD,CALX;AAAA,UAMII,QAAQ,GAAIpa,UAAU,IAAI,CAAC3E,GAAG,CAACiJ,EAAJ,EAN/B;;AAOA,UAAIW,QAAQ,CAAC4R,KAAb,EAAoB;AAClBb,QAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQa,KAAR,GAAgB5R,QAAQ,CAAC4R,KAAzB;AACD;;AACD,WAAK5Q,CAAC,GAAG,CAAJ,EAAOgC,CAAC,GAAGiS,QAAQ,CAAC7T,MAAzB,EAAiCJ,CAAC,GAAGgC,CAArC,EAAwChC,CAAC,EAAzC,EAA6C;AAC3C,YAAIiU,QAAQ,CAACjU,CAAD,CAAR,CAAYsE,KAAZ,KAAsB,IAA1B,EAAgC;AAC9B4P,UAAAA,KAAK,CAAC5V,IAAN,CAAW2V,QAAQ,CAACjU,CAAD,CAAnB;AACD;AACF;;AACD,UAAIkU,KAAK,CAAC9T,MAAV,EAAkB;AAChB,aAAKJ,CAAC,GAAG,CAAJ,EAAOgC,CAAC,GAAGkS,KAAK,CAAC9T,MAAtB,EAA8BJ,CAAC,GAAGgC,CAAlC,EAAqChC,CAAC,EAAtC,EAA0C;AACxC,cAAIkU,KAAK,CAAClU,CAAD,CAAL,CAASqJ,KAAb,EAAoB;AAClB6K,YAAAA,KAAK,CAAClU,CAAD,CAAL,CAASoJ,MAAT,CAAgB3J,KAAhB,CAAsByU,KAAK,CAAClU,CAAD,CAAL,CAASqJ,KAA/B,EAAsC0G,IAAtC;AACD,WAFD,MAEO;AACLmE,YAAAA,KAAK,CAAClU,CAAD,CAAL,CAASoJ,MAAT,CAAgB3J,KAAhB,CAAsB,IAAtB,EAA4BsQ,IAA5B;AACD;;AACD,cAAI,CAACoE,QAAL,EAAe;AACbD,YAAAA,KAAK,CAAClU,CAAD,CAAL,CAASsE,KAAT,GAAiB,IAAjB;AACD;AACF;AACF;;AACD,aAAO,IAAP;AACD,KApCD;;AAqCAjN,IAAAA,eAAc,GAAG,0BAAW;AAC1BhJ,MAAAA,MAAM,CAACsQ,UAAP,CAAkB,YAAW;AAC3B,YAAIvJ,GAAG,CAACxF,aAAR,EAAuB;AACrBiJ,UAAAA,iBAAiB;AAClB;;AACDzB,QAAAA,eAAe;;AACf,YAAI,OAAOhC,GAAG,CAACzE,MAAX,KAAsB,UAA1B,EAAsC;AACpCyE,UAAAA,GAAG,CAACzE,MAAJ,CAAW8O,KAAX,CAAiBpR,MAAjB;AACD;;AACD,YAAI+G,GAAG,CAAChG,iBAAR,EAA2B;AACzBoL,UAAAA,KAAK,CAACqN,GAAN,CAAUxZ,MAAV,EAAkB,MAAlB,EAA0BgJ,eAA1B;AACD;AACF,OAXD,EAWG,CAXH;AAYD,KAbD;;AAcA0D,IAAAA,WAAW,GAAG,uBAAW;AACvB,UAAID,QAAQ,KAAKxM,UAAjB,EAA6B,OAAOwM,QAAP;AAC7B,UAAIsZ,SAAS,GAAG,KAAhB;AAAA,UAAuBC,CAAC,GAAG3e,SAA3B;AAAA,UAAsC4e,GAAtC;AAAA,UAA2C3iB,IAA3C;AAAA,UAAiD4iB,KAAjD;AAAA,UAAwDC,EAAE,GAAGnmB,MAAM,CAAComB,aAApE;AACA,UAAIC,EAAJ;;AACA,UAAI;AACFA,QAAAA,EAAE,GAAGL,CAAC,CAACM,OAAP;AACD,OAFD,CAEE,OAAM1W,CAAN,EAAS;AACTyW,QAAAA,EAAE,GAAGE,SAAL;AACD;;AACD,UAAIF,EAAE,IAAIA,EAAE,CAACtU,MAAb,EAAqB;AACnBzO,QAAAA,IAAI,GAAG,+BAAP;AACA4iB,QAAAA,KAAK,GAAGF,CAAC,CAACQ,SAAV;;AACA,YAAIN,KAAK,IAAIA,KAAK,CAAC5iB,IAAD,CAAd,IAAwB4iB,KAAK,CAAC5iB,IAAD,CAAL,CAAYmjB,aAApC,IAAqDP,KAAK,CAAC5iB,IAAD,CAAL,CAAYmjB,aAAZ,CAA0B/I,WAAnF,EAAgG;AAC9FqI,UAAAA,SAAS,GAAG,IAAZ;AACD;AACF,OAND,MAMO,IAAII,EAAE,KAAKlmB,UAAP,IAAqB,CAACmH,EAAE,CAACgG,KAAH,CAAS,YAAT,CAA1B,EAAkD;AACvD,YAAI;AACF6Y,UAAAA,GAAG,GAAG,IAAIE,EAAJ,CAAO,+BAAP,CAAN;AACD,SAFD,CAEE,OAAMvW,CAAN,EAAS;AACTqW,UAAAA,GAAG,GAAG,IAAN;AACD;;AACDF,QAAAA,SAAS,GAAI,CAAC,CAACE,GAAf;AACAA,QAAAA,GAAG,GAAG,IAAN;AACD;;AACDxZ,MAAAA,QAAQ,GAAGsZ,SAAX;AACA,aAAOA,SAAP;AACD,KA1BD;;AA2BApa,IAAAA,YAAY,GAAG,wBAAW;AACxB,UAAI+a,WAAJ;AAAA,UACIxL,IADJ;AAAA,UAEIyL,OAAO,GAAG5f,GAAG,CAACzC,YAFlB;AAAA,UAGIsiB,SAAS,GAAIzZ,UAAU,IAAI,CAAC,CAAE/F,EAAE,CAACgG,KAAH,CAAS,qBAAT,CAHlC;;AAIA,UAAIwZ,SAAJ,EAAe;AACb7f,QAAAA,GAAG,CAACyI,QAAJ,GAAe,KAAf;AACAzI,QAAAA,GAAG,CAACH,SAAJ,GAAgB,IAAhB;;AACA,YAAIG,GAAG,CAACtB,GAAR,EAAa;AACXsB,UAAAA,GAAG,CAACtB,GAAJ,CAAQohB,KAAR,CAAcC,OAAd,GAAwB,MAAxB;AACD;AACF,OAND,MAMO,IAAI/f,GAAG,CAACvF,aAAR,EAAuB;AAC1B,YAAI,CAACuF,GAAG,CAACN,KAAL,IAAc,CAACM,GAAG,CAACN,KAAJ,CAAUkJ,WAA7B,EAA0C;AACxC5I,UAAAA,GAAG,CAACyI,QAAJ,GAAe,KAAf;AACD;AACF;;AACH,UAAIzI,GAAG,CAACvF,aAAJ,IAAqBuF,GAAG,CAACyI,QAA7B,EAAuC;AACrC/D,QAAAA,cAAc,GAAG,IAAjB;;AACA,aAAKyP,IAAL,IAAayL,OAAb,EAAsB;AACpB,cAAIA,OAAO,CAAC1T,cAAR,CAAuBiI,IAAvB,CAAJ,EAAkC;AAChC,gBAAIyL,OAAO,CAACzL,IAAD,CAAP,CAAc1W,QAAlB,EAA4B;AAC1B,kBAAI,CAACuC,GAAG,CAACN,KAAJ,CAAUkJ,WAAV,CAAsBgX,OAAO,CAACzL,IAAD,CAAP,CAAc5X,IAApC,CAAL,EAAgD;AAC9CmI,gBAAAA,cAAc,GAAG,KAAjB;AACAib,gBAAAA,WAAW,GAAG,IAAd;AACD,eAHD,MAGO,IAAI3f,GAAG,CAACnF,WAAJ,KAAoBmF,GAAG,CAACJ,KAAJ,CAAUuU,IAAV,KAAmBnU,GAAG,CAACJ,KAAJ,CAAUggB,OAAO,CAACzL,IAAD,CAAP,CAAc5X,IAAxB,CAAvC,CAAJ,EAA2E;AAChFojB,gBAAAA,WAAW,GAAG,IAAd;AACD;AACF;AACF;AACF;AACF;;AACD,UAAI3f,GAAG,CAACF,WAAR,EAAqB;AACnB6f,QAAAA,WAAW,GAAG,KAAd;AACAjb,QAAAA,cAAc,GAAG,IAAjB;AACD;;AACD1E,MAAAA,GAAG,CAACH,SAAJ,GAAiBG,GAAG,CAACyI,QAAJ,IAAgBzI,GAAG,CAACvF,aAApB,IAAqC,CAACklB,WAAvD;AACA,aAAQ,CAAC3f,GAAG,CAACH,SAAb;AACD,KArCD;;AAsCA2E,IAAAA,QAAQ,GAAG,kBAAS9K,GAAT,EAAc;AACvB,UAAIkR,CAAJ;AAAA,UAAOgC,CAAP;AAAA,UAAUoT,SAAS,GAAG,CAAtB;AAAA,UAAyBxU,MAAzB;;AACA,UAAI9R,GAAG,YAAY4L,KAAnB,EAA0B;AACxB,aAAKsF,CAAC,GAAG,CAAJ,EAAOgC,CAAC,GAAGlT,GAAG,CAACsR,MAApB,EAA4BJ,CAAC,GAAGgC,CAAhC,EAAmChC,CAAC,EAApC,EAAwC;AACtC,cAAIlR,GAAG,CAACkR,CAAD,CAAH,YAAkBc,MAAtB,EAA8B;AAC5B,gBAAI1L,GAAG,CAAC2N,WAAJ,CAAgBjU,GAAG,CAACkR,CAAD,CAAH,CAAOrO,IAAvB,CAAJ,EAAkC;AAChCyjB,cAAAA,SAAS,GAAGpV,CAAZ;AACA;AACD;AACF,WALD,MAKO,IAAI5K,GAAG,CAAC6N,UAAJ,CAAenU,GAAG,CAACkR,CAAD,CAAlB,CAAJ,EAA4B;AACjCoV,YAAAA,SAAS,GAAGpV,CAAZ;AACA;AACD;AACF;;AACD,YAAIlR,GAAG,CAACsmB,SAAD,CAAH,CAAetmB,GAAnB,EAAwB;AACtBA,UAAAA,GAAG,CAACsmB,SAAD,CAAH,GAAiBtmB,GAAG,CAACsmB,SAAD,CAAH,CAAetmB,GAAhC;AACD;;AACD8R,QAAAA,MAAM,GAAG9R,GAAG,CAACsmB,SAAD,CAAZ;AACD,OAhBD,MAgBO;AACLxU,QAAAA,MAAM,GAAG9R,GAAT;AACD;;AACD,aAAO8R,MAAP;AACD,KAtBD;;AAuBArH,IAAAA,UAAU,GAAG,oBAAS6F,MAAT,EAAiB;AAC5B,UAAI,CAACA,MAAM,CAACyK,SAAZ,EAAuB;AACrBzK,QAAAA,MAAM,CAACyK,SAAP,GAAmB,IAAnB;;AACA,YAAI,CAAC9N,WAAD,IAAgB3G,GAAG,CAAC5F,oBAAxB,EAA8C;AAC5C,cAAImK,eAAe,KAAK,IAApB,IAA4BD,YAAY,KAAK,CAAjD,EAAoD;AAClDC,YAAAA,eAAe,GAAG0b,WAAW,CAAC5b,YAAD,EAAerE,GAAG,CAAC5F,oBAAnB,CAA7B;AACD;;AACDkK,UAAAA,YAAY;AACb;AACF;AACF,KAVD;;AAWAF,IAAAA,SAAS,GAAG,mBAAS4F,MAAT,EAAiB;AAC3B,UAAIA,MAAM,CAACyK,SAAX,EAAsB;AACpBzK,QAAAA,MAAM,CAACyK,SAAP,GAAmB,KAAnB;;AACA,YAAI,CAAC9N,WAAD,IAAgB3G,GAAG,CAAC5F,oBAAxB,EAA8C;AAC5CkK,UAAAA,YAAY;AACb;AACF;AACF,KAPD;;AAQAD,IAAAA,YAAY,GAAG,wBAAW;AACxB,UAAIuG,CAAJ;;AACA,UAAIrG,eAAe,KAAK,IAApB,IAA4B,CAACD,YAAjC,EAA+C;AAC7C4b,QAAAA,aAAa,CAAC3b,eAAD,CAAb;AACAA,QAAAA,eAAe,GAAG,IAAlB;AACA;AACD;;AACD,WAAKqG,CAAC,GAAG5K,GAAG,CAACpB,QAAJ,CAAaoM,MAAb,GAAsB,CAA/B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;AAC7C,YAAI5K,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4B2F,OAA5B,IAAuCvQ,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4B6J,SAAvE,EAAkF;AAChFzU,UAAAA,GAAG,CAACrB,MAAJ,CAAWqB,GAAG,CAACpB,QAAJ,CAAagM,CAAb,CAAX,EAA4BsI,QAA5B;AACD;AACF;AACF,KAZD;;AAaApQ,IAAAA,UAAU,GAAG,oBAASiG,OAAT,EAAkB;AAC7BA,MAAAA,OAAO,GAAIA,OAAO,KAAK7P,UAAZ,GAAyB6P,OAAzB,GAAmC,EAA9C;;AACA,UAAI,OAAO/I,GAAG,CAAC1E,OAAX,KAAuB,UAA3B,EAAuC;AACrC0E,QAAAA,GAAG,CAAC1E,OAAJ,CAAY+O,KAAZ,CAAkBpR,MAAlB,EAA0B,CAAC;AACzBsD,UAAAA,IAAI,EAAGwM,OAAO,CAACxM,IAAR,KAAiBrD,UAAjB,GAA8B6P,OAAO,CAACxM,IAAtC,GAA6C;AAD3B,SAAD,CAA1B;AAGD;;AACD,UAAIwM,OAAO,CAACmI,KAAR,KAAkBhY,UAAlB,IAAgC6P,OAAO,CAACmI,KAA5C,EAAmD;AACjDlR,QAAAA,GAAG,CAACwN,OAAJ;AACD;AACF,KAVD;;AAWA5H,IAAAA,YAAY,GAAG,wBAAW;AACxB,UAAI,CAACgB,WAAD,IAAgB,CAACjB,WAAW,EAAhC,EAAoC;AAClC;AACD;;AACD,UAAIkX,EAAE,GAAG7c,GAAG,CAACzC,YAAb;AAAA,UAA2BqN,CAA3B;AAAA,UAA8BuJ,IAA9B;;AACA,WAAKA,IAAL,IAAa0I,EAAb,EAAiB;AACf,YAAIA,EAAE,CAAC3Q,cAAH,CAAkBiI,IAAlB,CAAJ,EAA6B;AAC3B,cAAIA,IAAI,KAAK,KAAT,IAAkBA,IAAI,KAAK,KAA/B,EAAsC;AACpCnU,YAAAA,GAAG,CAACN,KAAJ,CAAUyU,IAAV,IAAkB,KAAlB;;AACA,gBAAI0I,EAAE,CAAC1I,IAAD,CAAF,IAAY0I,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAzB,EAAkC;AAChC,mBAAKiN,CAAC,GAAGiS,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAT,CAAiBqN,MAAjB,GAA0B,CAAnC,EAAsCJ,CAAC,IAAI,CAA3C,EAA8CA,CAAC,EAA/C,EAAmD;AACjD5K,gBAAAA,GAAG,CAACN,KAAJ,CAAUmd,EAAE,CAAC1I,IAAD,CAAF,CAASxW,OAAT,CAAiBiN,CAAjB,CAAV,IAAiC,KAAjC;AACD;AACF;AACF;AACF;AACF;AACF,KAjBD;;AAkBA,SAAKuV,eAAL,GAAuB,UAASC,WAAT,EAAsB,CAC5C,CADD;;AAEA,SAAKC,oBAAL,GAA4B,UAASC,UAAT,EAAqB;AAC/C,UAAItgB,GAAG,CAACxB,SAAR,EAAmB;AACjB;AACD;;AACD,UAAIqK,CAAJ;AACA7I,MAAAA,GAAG,CAACxB,SAAJ,GAAgB,IAAhB;AACA0I,MAAAA,cAAc,GAAG,KAAjB;;AACA,UAAIN,WAAJ,EAAiB;AACfhB,QAAAA,YAAY;AACb;;AACD2D,MAAAA,UAAU,CAACxI,IAAD,EAAOwF,IAAI,GAAG,GAAH,GAAS,CAApB,CAAV;AACD,KAXD;;AAYA1D,IAAAA,WAAW,GAAG,qBAAS7E,OAAT,EAAkBM,QAAlB,EAA4B;AACxC,UAAI8C,SAAS,IAAIC,aAAjB,EAAgC,OAAO,KAAP;;AAChC,eAASkf,OAAT,GAAmB,CAClB;;AACD,UAAIvgB,GAAG,CAACH,SAAR,EAAmB;AACjBwC,QAAAA,cAAc;AACdke,QAAAA,OAAO;AACPvgB,QAAAA,GAAG,CAACtB,GAAJ,GAAUT,EAAE,CAAC+B,GAAG,CAAChC,OAAL,CAAZ;AACA+C,QAAAA,IAAI;AACJK,QAAAA,SAAS,GAAG,IAAZ;AACAC,QAAAA,aAAa,GAAG,IAAhB;AACA,eAAO,KAAP;AACD;;AACD,UAAImf,SAAS,GAAIliB,QAAQ,IAAI0B,GAAG,CAACtG,GAAjC;AAAA,UACA+mB,QAAQ,GAAIzgB,GAAG,CAACzB,MAAJ,IAAciiB,SAD1B;AAAA,UAEAE,QAAQ,GAAG,2CAFX;AAAA,UAGAC,OAAO,GAAG/d,WAAW,EAHrB;AAAA,UAIAge,UAAU,GAAGld,SAAS,EAJtB;AAAA,UAKAmd,KAAK,GAAG,IALR;AAAA,UAMAC,IAAI,GAAGlgB,GAAG,CAAC4Y,oBAAJ,CAAyB,MAAzB,EAAiC,CAAjC,CANP;AAAA,UAOAuH,MAPA;AAAA,UAOQC,MAPR;AAAA,UAOgBC,GAPhB;AAAA,UAOqBC,SAPrB;AAAA,UAOgCC,GAPhC;AAAA,UAOqC7R,CAPrC;AAAA,UAOwC+F,CAPxC;AAAA,UAO2C+L,MAP3C;AAQAP,MAAAA,KAAK,GAAIC,IAAI,IAAIA,IAAI,CAACO,GAAb,IAAoBP,IAAI,CAACO,GAAL,CAAShb,KAAT,CAAe,MAAf,CAA7B;AACArI,MAAAA,OAAO,GAAIA,OAAO,KAAK9E,UAAZ,GAAyB8G,GAAG,CAAC/B,EAA7B,GAAkCD,OAA7C;;AACA,eAASsjB,KAAT,CAAe/C,IAAf,EAAqBgD,KAArB,EAA4B;AAC1B,eAAO,kBAAkBhD,IAAlB,GAAyB,WAAzB,GAAuCgD,KAAvC,GAA+C,MAAtD;AACD;;AACDlf,MAAAA,cAAc;AACdrC,MAAAA,GAAG,CAACtG,GAAJ,GAAU2J,iBAAiB,CAACkE,QAAQ,GAAGiZ,SAAH,GAAeC,QAAxB,CAA3B;AACAniB,MAAAA,QAAQ,GAAG0B,GAAG,CAACtG,GAAf;AACAsG,MAAAA,GAAG,CAAC1F,KAAJ,GAAa,CAAC0F,GAAG,CAAC1F,KAAL,IAAc0F,GAAG,CAAC9F,kBAAlB,GAAuC,aAAvC,GAAuD8F,GAAG,CAAC1F,KAAxE;;AACA,UAAI0F,GAAG,CAAC1F,KAAJ,KAAc,IAAd,KAAuB+F,EAAE,CAACgG,KAAH,CAAS,SAAT,KAAwB,CAACE,IAAD,IAAS,CAACvG,GAAG,CAAC9F,kBAA7D,KAAqFoG,SAAS,CAACkhB,QAAV,CAAmBnb,KAAnB,CAAyB,cAAzB,CAAzF,EAAmI;AACjI5B,QAAAA,QAAQ,CAACyE,IAAT,CAAc3G,OAAO,CAACkf,QAAtB;AACAzhB,QAAAA,GAAG,CAAC1F,KAAJ,GAAY,IAAZ;AACD;;AACDymB,MAAAA,MAAM,GAAG;AACPxC,QAAAA,IAAI,EAAEvgB,OADC;AAEPC,QAAAA,EAAE,EAAED,OAFG;AAGP8S,QAAAA,GAAG,EAAExS,QAHE;AAIPojB,QAAAA,OAAO,EAAE,MAJF;AAKPnnB,QAAAA,iBAAiB,EAAEyF,GAAG,CAACzF,iBALhB;AAMPonB,QAAAA,OAAO,EAAE3hB,GAAG,CAAC/F,OANN;AAOP2nB,QAAAA,WAAW,EAAEna,IAAI,GAAG,sCAPb;AAQPoa,QAAAA,KAAK,EAAEnB,QARA;AASPnkB,QAAAA,IAAI,EAAE,+BATC;AAUPjC,QAAAA,KAAK,EAAE0F,GAAG,CAAC1F,KAVJ;AAWPwnB,QAAAA,WAAW,EAAE;AAXN,OAAT;;AAaA,UAAI9hB,GAAG,CAACnG,UAAR,EAAoB;AAClBknB,QAAAA,MAAM,CAACgB,SAAP,GAAmB,SAAnB;AACD;;AACD,UAAI,CAAC/hB,GAAG,CAAC1F,KAAT,EAAgB;AACd,eAAOymB,MAAM,CAACzmB,KAAd;AACD;;AACD,UAAIiM,IAAJ,EAAU;AACRya,QAAAA,MAAM,GAAGpgB,GAAG,CAACohB,aAAJ,CAAkB,KAAlB,CAAT;AACAd,QAAAA,SAAS,GAAG,CACV,iBAAiBljB,OAAjB,GAA2B,UAA3B,GAAwCM,QAAxC,GAAmD,UAAnD,GAAgEyiB,MAAM,CAACxkB,IAAvE,GAA8E,WAA9E,GAA4FwkB,MAAM,CAACc,KAAnG,GAA2G,yJADjG,EAEVP,KAAK,CAAC,OAAD,EAAUhjB,QAAV,CAFK,EAGVgjB,KAAK,CAAC,mBAAD,EAAsBthB,GAAG,CAACzF,iBAA1B,CAHK,EAIV+mB,KAAK,CAAC,SAAD,EAAYP,MAAM,CAACW,OAAnB,CAJK,EAKT1hB,GAAG,CAAC1F,KAAJ,GAAYgnB,KAAK,CAAC,OAAD,EAAUthB,GAAG,CAAC1F,KAAd,CAAjB,GAAwC,EAL/B,EAMVgnB,KAAK,CAAC,SAAD,EAAYthB,GAAG,CAAC/F,OAAhB,CANK,EAOVqnB,KAAK,CAAC,aAAD,EAAgB,MAAhB,CAPK,EAQTthB,GAAG,CAACnG,UAAJ,GAAiBynB,KAAK,CAAC,WAAD,EAAcP,MAAM,CAACgB,SAArB,CAAtB,GAAwD,EAR/C,EASV,WATU,EAUVja,IAVU,CAUL,EAVK,CAAZ;AAWD,OAbD,MAaO;AACLkZ,QAAAA,MAAM,GAAGpgB,GAAG,CAACohB,aAAJ,CAAkB,OAAlB,CAAT;;AACA,aAAKf,GAAL,IAAYF,MAAZ,EAAoB;AAClB,cAAIA,MAAM,CAAC7U,cAAP,CAAsB+U,GAAtB,CAAJ,EAAgC;AAC9BD,YAAAA,MAAM,CAACiB,YAAP,CAAoBhB,GAApB,EAAyBF,MAAM,CAACE,GAAD,CAA/B;AACD;AACF;AACF;;AACDje,MAAAA,SAAS;AACT4d,MAAAA,UAAU,GAAGld,SAAS,EAAtB;AACAid,MAAAA,OAAO,GAAG/d,WAAW,EAArB;;AACA,UAAI+d,OAAJ,EAAa;AACX3gB,QAAAA,GAAG,CAACtB,GAAJ,GAAWT,EAAE,CAAC+B,GAAG,CAAChC,OAAL,CAAF,IAAmB4C,GAAG,CAACohB,aAAJ,CAAkB,KAAlB,CAA9B;;AACA,YAAI,CAAChiB,GAAG,CAACtB,GAAJ,CAAQT,EAAb,EAAiB;AACf+B,UAAAA,GAAG,CAACtB,GAAJ,CAAQT,EAAR,GAAa+B,GAAG,CAAChC,OAAjB;AACAgC,UAAAA,GAAG,CAACtB,GAAJ,CAAQ+f,SAAR,GAAoB9a,MAAM,CAACuE,UAAP,GAAoB,GAApB,GAA0B0Y,UAA9C;AACAtR,UAAAA,CAAC,GAAG,IAAJ;AACA6R,UAAAA,GAAG,GAAG,IAAN;;AACA,cAAI,CAACnhB,GAAG,CAACxF,aAAT,EAAwB;AACtB,gBAAIwF,GAAG,CAAC9F,kBAAR,EAA4B;AAC1BoV,cAAAA,CAAC,GAAG;AACFpT,gBAAAA,QAAQ,EAAE,OADR;AAEFgmB,gBAAAA,KAAK,EAAE,KAFL;AAGFC,gBAAAA,MAAM,EAAE,KAHN;AAIFC,gBAAAA,MAAM,EAAE,KAJN;AAKFtN,gBAAAA,IAAI,EAAE,KALJ;AAMFuN,gBAAAA,QAAQ,EAAE;AANR,eAAJ;AAQD,aATD,MASO;AACL/S,cAAAA,CAAC,GAAG;AACFpT,gBAAAA,QAAQ,EAAE,UADR;AAEFgmB,gBAAAA,KAAK,EAAE,KAFL;AAGFC,gBAAAA,MAAM,EAAE,KAHN;AAIFG,gBAAAA,GAAG,EAAE,SAJH;AAKFxN,gBAAAA,IAAI,EAAE;AALJ,eAAJ;;AAOA,kBAAI+L,KAAJ,EAAW;AACTvR,gBAAAA,CAAC,CAACwF,IAAF,GAASpC,IAAI,CAAC6P,GAAL,CAASjV,QAAQ,CAACgC,CAAC,CAACwF,IAAH,EAAS,EAAT,CAAjB,IAAiC,IAA1C;AACD;AACF;AACF;;AACD,cAAItO,QAAJ,EAAc;AACZxG,YAAAA,GAAG,CAACtB,GAAJ,CAAQohB,KAAR,CAAc0C,MAAd,GAAuB,KAAvB;AACD;;AACD,cAAI,CAACxiB,GAAG,CAACnG,UAAT,EAAqB;AACnB,iBAAKwb,CAAL,IAAU/F,CAAV,EAAa;AACX,kBAAIA,CAAC,CAACpD,cAAF,CAAiBmJ,CAAjB,CAAJ,EAAyB;AACvBrV,gBAAAA,GAAG,CAACtB,GAAJ,CAAQohB,KAAR,CAAczK,CAAd,IAAmB/F,CAAC,CAAC+F,CAAD,CAApB;AACD;AACF;AACF;;AACD,cAAI;AACF,gBAAI,CAAC9O,IAAL,EAAW;AACTvG,cAAAA,GAAG,CAACtB,GAAJ,CAAQ+jB,WAAR,CAAoBzB,MAApB;AACD;;AACDL,YAAAA,OAAO,CAAC8B,WAAR,CAAoBziB,GAAG,CAACtB,GAAxB;;AACA,gBAAI6H,IAAJ,EAAU;AACR4a,cAAAA,GAAG,GAAGnhB,GAAG,CAACtB,GAAJ,CAAQ+jB,WAAR,CAAoB7hB,GAAG,CAACohB,aAAJ,CAAkB,KAAlB,CAApB,CAAN;AACAb,cAAAA,GAAG,CAAC1C,SAAJ,GAAgB9a,MAAM,CAACsE,MAAvB;AACAkZ,cAAAA,GAAG,CAACpS,SAAJ,GAAgBmS,SAAhB;AACD;;AACD7f,YAAAA,aAAa,GAAG,IAAhB;AACD,WAXD,CAWE,OAAMwH,CAAN,EAAS;AACT,kBAAM,IAAIzP,KAAJ,CAAUoK,GAAG,CAAC,UAAD,CAAH,GAAkB,KAAlB,GAA0BqF,CAAC,CAAClI,QAAF,EAApC,CAAN;AACD;AACF,SApDD,MAoDO;AACLygB,UAAAA,MAAM,GAAGphB,GAAG,CAACtB,GAAJ,CAAQ+f,SAAjB;AACAze,UAAAA,GAAG,CAACtB,GAAJ,CAAQ+f,SAAR,GAAoB,CAAC2C,MAAM,GAAGA,MAAM,GAAG,GAAZ,GAAkBzd,MAAM,CAACuE,UAAhC,KAA+C0Y,UAAU,GAAG,MAAMA,UAAT,GAAsB,EAA/E,CAApB;AACA5gB,UAAAA,GAAG,CAACtB,GAAJ,CAAQ+jB,WAAR,CAAoBzB,MAApB;;AACA,cAAIza,IAAJ,EAAU;AACR4a,YAAAA,GAAG,GAAGnhB,GAAG,CAACtB,GAAJ,CAAQ+jB,WAAR,CAAoB7hB,GAAG,CAACohB,aAAJ,CAAkB,KAAlB,CAApB,CAAN;AACAb,YAAAA,GAAG,CAAC1C,SAAJ,GAAgB9a,MAAM,CAACsE,MAAvB;AACAkZ,YAAAA,GAAG,CAACpS,SAAJ,GAAgBmS,SAAhB;AACD;;AACD7f,UAAAA,aAAa,GAAG,IAAhB;AACD;AACF;;AACDD,MAAAA,SAAS,GAAG,IAAZ;AACAmf,MAAAA,OAAO;AACP,aAAO,IAAP;AACD,KAlJD;;AAmJA/d,IAAAA,SAAS,GAAG,qBAAW;AACrB,UAAIxC,GAAG,CAACH,SAAR,EAAmB;AACjBgD,QAAAA,WAAW;AACX,eAAO,KAAP;AACD;;AACD,UAAIjD,KAAJ,EAAW,OAAO,KAAP;;AACX,UAAI,CAACI,GAAG,CAACtG,GAAT,EAAc;AACX,eAAO,KAAP;AACF;;AACDkG,MAAAA,KAAK,GAAGI,GAAG,CAACyJ,QAAJ,CAAazJ,GAAG,CAAC/B,EAAjB,CAAR;;AACA,UAAI,CAAC2B,KAAL,EAAY;AACV,YAAI,CAAC0D,QAAL,EAAe;AACbT,UAAAA,WAAW,CAAC7C,GAAG,CAAC/B,EAAL,EAAS+B,GAAG,CAACtG,GAAb,CAAX;AACD,SAFD,MAEO;AACL,cAAI,CAAC6M,IAAL,EAAW;AACTvG,YAAAA,GAAG,CAACtB,GAAJ,CAAQ+jB,WAAR,CAAoBnf,QAApB;AACD,WAFD,MAEO;AACLtD,YAAAA,GAAG,CAACtB,GAAJ,CAAQqQ,SAAR,GAAoBxL,YAApB;AACD;;AACDD,UAAAA,QAAQ,GAAG,IAAX;AACAlC,UAAAA,SAAS,GAAG,IAAZ;AACD;;AACDxB,QAAAA,KAAK,GAAGI,GAAG,CAACyJ,QAAJ,CAAazJ,GAAG,CAAC/B,EAAjB,CAAR;AACD;;AACD,UAAI,OAAO+B,GAAG,CAAC0iB,WAAX,KAA2B,UAA/B,EAA2C;AACzCnZ,QAAAA,UAAU,CAACvJ,GAAG,CAAC0iB,WAAL,EAAkB,CAAlB,CAAV;AACD;;AACD,aAAO,IAAP;AACD,KA5BD;;AA6BAxgB,IAAAA,cAAc,GAAG,0BAAW;AAC1BqH,MAAAA,UAAU,CAACpH,SAAD,EAAY,IAAZ,CAAV;AACD,KAFD;;AAGAC,IAAAA,eAAe,GAAG,2BAAW;AAC3BnJ,MAAAA,MAAM,CAACsQ,UAAP,CAAkB,YAAW;AAC3BvJ,QAAAA,GAAG,CAAC8I,KAAJ,CAAU;AACRjO,UAAAA,WAAW,EAAE;AADL,SAAV,EAEG8T,MAFH;AAGA3O,QAAAA,GAAG,CAAClB,aAAJ,GAAoB,IAApB;AACAkB,QAAAA,GAAG,CAACqJ,gBAAJ;AACD,OAND,EAMG,CANH;AAOD,KARD;;AASAlH,IAAAA,SAAS,GAAG,qBAAW;AACrB,UAAIqc,CAAJ;AAAA,UACImE,cAAc,GAAG,KADrB;;AAEA,UAAI,CAAC3iB,GAAG,CAACtG,GAAT,EAAc;AACZ;AACD;;AACD,UAAIuK,YAAJ,EAAkB;AAChB;AACD;;AACDA,MAAAA,YAAY,GAAG,IAAf;AACAmB,MAAAA,KAAK,CAACsI,MAAN,CAAazU,MAAb,EAAqB,MAArB,EAA6BiJ,cAA7B;;AACA,UAAIwD,QAAQ,IAAIwB,cAAZ,IAA8B,CAACF,SAAnC,EAA8C;AAC5C;AACD;;AACD,UAAI,CAAC1F,OAAL,EAAc;AACZkd,QAAAA,CAAC,GAAGxe,GAAG,CAACoP,eAAJ,EAAJ;;AACA,YAAIoP,CAAC,GAAG,CAAJ,IAASA,CAAC,GAAG,GAAjB,EAAsB;AACpBmE,UAAAA,cAAc,GAAG,IAAjB;AACD;AACF;;AACDpZ,MAAAA,UAAU,CAAC,YAAW;AACpBiV,QAAAA,CAAC,GAAGxe,GAAG,CAACoP,eAAJ,EAAJ;;AACA,YAAIuT,cAAJ,EAAoB;AAClB1e,UAAAA,YAAY,GAAG,KAAf;AACAhL,UAAAA,MAAM,CAACsQ,UAAP,CAAkBrH,cAAlB,EAAkC,CAAlC;AACA;AACD;;AACD,YAAI,CAACZ,OAAD,IAAY6F,WAAhB,EAA6B;AAC3B,cAAIqX,CAAC,KAAK,IAAV,EAAgB;AACd,gBAAIxe,GAAG,CAACxF,aAAJ,IAAqBwF,GAAG,CAAC3F,gBAAJ,KAAyB,CAAlD,EAAqD;AACnD,kBAAI2F,GAAG,CAACxF,aAAR,EAAuB;AACrBiJ,gBAAAA,iBAAiB;AAClB;AACF,aAJD,MAIO,IAAI,CAACzD,GAAG,CAACxF,aAAL,IAAsBkK,cAA1B,EAA0C;AAC/CtC,cAAAA,eAAe;AAChB,aAFM,MAEA;AACLJ,cAAAA,eAAe,CAAC;AACdzF,gBAAAA,IAAI,EAAE,WADQ;AAEdmiB,gBAAAA,UAAU,EAAE,IAFE;AAGdlD,gBAAAA,KAAK,EAAE;AACLjf,kBAAAA,IAAI,EAAE;AADD;AAHO,eAAD,CAAf;AAOD;AACF,WAhBD,MAgBO,IAAIyD,GAAG,CAAC3F,gBAAJ,KAAyB,CAA7B,EAAgC,CACtC,CADM,MACA,IAAI,CAAC2F,GAAG,CAACxF,aAAL,IAAsBkK,cAA1B,EAA0C;AAC/CtC,YAAAA,eAAe;AAChB,WAFM,MAEA;AACLgB,YAAAA,UAAU,CAAC,IAAD,CAAV;AACD;AACF;AACF,OA/BS,EA+BPpD,GAAG,CAAC3F,gBA/BG,CAAV;AAgCD,KApDD;;AAqDAiI,IAAAA,YAAW,GAAG,uBAAW;AACvB,eAASsgB,OAAT,GAAmB;AACjBxd,QAAAA,KAAK,CAACsI,MAAN,CAAazU,MAAb,EAAqB,OAArB,EAA8BqJ,YAA9B;AACD;;AACD,UAAI0E,SAAS,IAAI,CAACE,cAAlB,EAAkC;AAChC0b,QAAAA,OAAO;AACP,eAAO,IAAP;AACD;;AACDzb,MAAAA,WAAW,GAAG,IAAd;AACAH,MAAAA,SAAS,GAAG,IAAZ;AACA/C,MAAAA,YAAY,GAAG,KAAf;AACA/B,MAAAA,cAAc;AACd0gB,MAAAA,OAAO;AACP,aAAO,IAAP;AACD,KAdD;;AAeA7c,IAAAA,aAAa,GAAG,yBAAW,CAC1B,CADD;;AAEAD,IAAAA,WAAW,GAAG,uBAAW,CACxB,CADD;;AAEAnE,IAAAA,YAAY,GAAG,sBAAS8L,UAAT,EAAqB;AAClC,UAAInM,OAAJ,EAAa,OAAO,KAAP;;AACb,UAAItB,GAAG,CAACH,SAAR,EAAmB;AACjByB,QAAAA,OAAO,GAAG,IAAV;;AACAW,QAAAA,eAAc;;AACd,eAAO,IAAP;AACD;;AACD,UAAI4gB,UAAU,GAAI7iB,GAAG,CAACxF,aAAJ,IAAqBwF,GAAG,CAAC3F,gBAAzB,IAA6C,CAAC2F,GAAG,CAACoP,eAAJ,EAAhE;AAAA,UACI5D,MAAM,GAAG,IADb;AAAA,UAEIgQ,KAFJ;;AAGA,UAAI,CAACqH,UAAL,EAAiB;AACfvhB,QAAAA,OAAO,GAAG,IAAV;AACD;;AACDka,MAAAA,KAAK,GAAG;AACNjf,QAAAA,IAAI,EAAG,CAACmJ,QAAD,IAAaf,UAAb,GAA0B,UAA1B,GAAuC;AADxC,OAAR;;AAGA,UAAIpD,QAAQ,IAAIkM,UAAhB,EAA4B;AAC1B,YAAIzN,GAAG,CAACxF,aAAJ,IAAqBwF,GAAG,CAACtB,GAA7B,EAAkC;AAChCsB,UAAAA,GAAG,CAACtB,GAAJ,CAAQ+f,SAAR,GAAoB/a,SAAS,KAAK,GAAd,IAAqB1D,GAAG,CAACoP,eAAJ,OAA0B,IAA1B,GAAiCzL,MAAM,CAACyE,WAAxC,GAAsDzE,MAAM,CAACwE,QAAlF,CAApB;AACD;;AACDnG,QAAAA,eAAe,CAAC;AACdzF,UAAAA,IAAI,EAAE,WADQ;AAEdif,UAAAA,KAAK,EAAEA,KAFO;AAGdkD,UAAAA,UAAU,EAAE;AAHE,SAAD,CAAf;AAKA5b,QAAAA,UAAU,CAAC0Y,KAAD,CAAV;AACAhQ,QAAAA,MAAM,GAAG,KAAT;AACD,OAXD,MAWO,CACN;;AACD,UAAI,CAACjK,QAAL,EAAe;AACb,YAAIvB,GAAG,CAAChG,iBAAJ,IAAyB,CAACwH,YAA9B,EAA4C;AAC1C4D,UAAAA,KAAK,CAACqN,GAAN,CAAUxZ,MAAV,EAAkB,MAAlB,EAA0BgJ,eAA1B;AACD,SAFD,MAEO;AACLA,UAAAA,eAAc;AACf;AACF;;AACD,aAAOuJ,MAAP;AACD,KArCD;;AAsCA1K,IAAAA,aAAa,GAAG,yBAAW;AACzB,UAAI8J,CAAJ;AAAA,UACIkP,CAAC,GAAG9Z,GAAG,CAACvG,YADZ;;AAEA,WAAKmR,CAAL,IAAUkP,CAAV,EAAa;AACX,YAAIA,CAAC,CAAC5N,cAAF,CAAiBtB,CAAjB,CAAJ,EAAyB;AACvB,cAAI5K,GAAG,CAAC4K,CAAD,CAAH,KAAW1R,UAAf,EAA2B;AACzB8G,YAAAA,GAAG,CAAC4K,CAAD,CAAH,GAASkP,CAAC,CAAClP,CAAD,CAAV;AACD,WAFD,MAEO,IAAI5K,GAAG,CAAC4K,CAAD,CAAH,KAAWkP,CAAC,CAAClP,CAAD,CAAhB,EAAqB;AAC1B5K,YAAAA,GAAG,CAACvG,YAAJ,CAAiBmR,CAAjB,IAAsB5K,GAAG,CAAC4K,CAAD,CAAzB;AACD;AACF;AACF;AACF,KAZD;;AAaA7J,IAAAA,IAAI,GAAG,gBAAW;AAChB,UAAIO,OAAJ,EAAa;AACX,eAAO,KAAP;AACD;;AACD,eAASshB,OAAT,GAAmB;AACjBxd,QAAAA,KAAK,CAACsI,MAAN,CAAazU,MAAb,EAAqB,MAArB,EAA6B+G,GAAG,CAACqJ,gBAAjC;AACD;;AACD,UAAIrJ,GAAG,CAACH,SAAR,EAAmB;AACjB,YAAI,CAACyB,OAAL,EAAc;AACZshB,UAAAA,OAAO;AACP5iB,UAAAA,GAAG,CAACvB,OAAJ,GAAc,IAAd;AACAkD,UAAAA,YAAY;AACb;;AACD,eAAO,IAAP;AACD;;AACDa,MAAAA,SAAS;;AACT,UAAI;AACF5C,QAAAA,KAAK,CAACkjB,sBAAN,CAA6B,KAA7B;;AACA/f,QAAAA,UAAU,CAAC,IAAD,EAAQ/C,GAAG,CAAC7F,oBAAJ,KAA6B6F,GAAG,CAAC9F,kBAAJ,GAAyB,EAAzB,GAA8B,EAA3D,CAAR,CAAV;;AACA,YAAI,CAAC8F,GAAG,CAACpG,SAAT,EAAoB;AAClBgG,UAAAA,KAAK,CAACmjB,aAAN;AACD;;AACD/iB,QAAAA,GAAG,CAACvB,OAAJ,GAAc,IAAd;;AACA,YAAI,CAACuB,GAAG,CAACH,SAAT,EAAoB;AAClBuF,UAAAA,KAAK,CAACqN,GAAN,CAAUxZ,MAAV,EAAkB,QAAlB,EAA4B4H,SAA5B;AACD;AACF,OAVD,CAUE,OAAMgI,CAAN,EAAS;AACT/F,QAAAA,UAAU,CAAC;AACTvG,UAAAA,IAAI,EAAE,uBADG;AAET2U,UAAAA,KAAK,EAAE;AAFE,SAAD,CAAV;AAIA9N,QAAAA,UAAU,CAAC,IAAD,CAAV;AACAzB,QAAAA,YAAY;AACZ,eAAO,KAAP;AACD;;AACDA,MAAAA,YAAY;AACZihB,MAAAA,OAAO;AACP,aAAO,IAAP;AACD,KAtCD;;AAuCAngB,IAAAA,iBAAgB,GAAG,4BAAW;AAC5B,UAAIE,WAAJ,EAAiB,OAAO,KAAP;AACjBA,MAAAA,WAAW,GAAG,IAAd;AACA7B,MAAAA,aAAa;AACbkC,MAAAA,SAAS;;AACT,UAAI,CAAC0C,QAAD,IAAa1F,GAAG,CAACyI,QAArB,EAA+B;AAC7BzI,QAAAA,GAAG,CAAC8I,KAAJ,CAAU;AACRrO,UAAAA,aAAa,EAAE,IADP;AAERI,UAAAA,WAAW,EAAE;AAFL,SAAV;AAID;;AACDsK,MAAAA,SAAS;;AACT,UAAI,CAACO,QAAD,IAAaf,UAAjB,EAA6B;AAC3BF,QAAAA,QAAQ,CAACyE,IAAT,CAAc3G,OAAO,CAACygB,SAAtB;AACAhjB,QAAAA,GAAG,CAAC8I,KAAJ,CAAU;AACRzO,UAAAA,gBAAgB,EAAE;AADV,SAAV;AAGD;;AACD,UAAIuG,GAAG,CAACyV,mBAAR,EAA6B;AAC3BzV,QAAAA,GAAG,CAACyV,mBAAJ,CAAwB,kBAAxB,EAA4C5T,iBAA5C,EAA8D,KAA9D;AACD;;AACDD,MAAAA,SAAS;AACT,aAAO,IAAP;AACD,KAvBD;;AAwBA0C,IAAAA,mBAAkB,GAAG,8BAAW;AAC9B,UAAItE,GAAG,CAAC0I,UAAJ,KAAmB,UAAvB,EAAmC;AACjC7G,QAAAA,iBAAgB;;AAChB7B,QAAAA,GAAG,CAACqiB,WAAJ,CAAgB,oBAAhB,EAAsC/d,mBAAtC;AACD;;AACD,aAAO,IAAP;AACD,KAND;;AAOAxC,IAAAA,UAAS,GAAG,qBAAW;AACrBlB,MAAAA,YAAY,GAAG,IAAf;;AACAiB,MAAAA,iBAAgB;;AAChB2C,MAAAA,KAAK,CAACsI,MAAN,CAAazU,MAAb,EAAqB,MAArB,EAA6ByJ,UAA7B;AACD,KAJD;;AAKAiD,IAAAA,WAAW;AACXP,IAAAA,KAAK,CAACqN,GAAN,CAAUxZ,MAAV,EAAkB,OAAlB,EAA2BqJ,YAA3B;AACA8C,IAAAA,KAAK,CAACqN,GAAN,CAAUxZ,MAAV,EAAkB,MAAlB,EAA0BiJ,cAA1B;AACAkD,IAAAA,KAAK,CAACqN,GAAN,CAAUxZ,MAAV,EAAkB,MAAlB,EAA0ByJ,UAA1B;;AACA,QAAI9B,GAAG,CAACwV,gBAAR,EAA0B;AACxBxV,MAAAA,GAAG,CAACwV,gBAAJ,CAAqB,kBAArB,EAAyC3T,iBAAzC,EAA2D,KAA3D;AACD,KAFD,MAEO,IAAI7B,GAAG,CAAC2Z,WAAR,EAAqB;AAC1B3Z,MAAAA,GAAG,CAAC2Z,WAAJ,CAAgB,oBAAhB,EAAsCrV,mBAAtC;AACD,KAFM,MAEA;AACLpC,MAAAA,UAAU,CAAC;AACTvG,QAAAA,IAAI,EAAE,gBADG;AAET2U,QAAAA,KAAK,EAAE;AAFE,OAAD,CAAV;AAID;AACF,GAjmFiC,CAkmFlC;;;AACA,MAAIjY,MAAM,CAACiqB,SAAP,KAAqBhqB,UAArB,IAAmC,CAACgqB,SAAxC,EAAmD;AACjD7pB,IAAAA,YAAY,GAAG,IAAIC,YAAJ,EAAf;AACD;;AACD,MAAI,OAAO6pB,MAAP,KAAkB,QAAlB,IAA8BA,MAA9B,IAAwC,OAAOA,MAAM,CAACC,OAAd,KAA0B,QAAtE,EAAgF;AAC9ED,IAAAA,MAAM,CAACC,OAAP,CAAe9pB,YAAf,GAA8BA,YAA9B;AACA6pB,IAAAA,MAAM,CAACC,OAAP,CAAe/pB,YAAf,GAA8BA,YAA9B;AACD,GAHD,MAGO,IAAI,OAAOgqB,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA3C,EAAgD;AACrDD,IAAAA,MAAM,CAAC,YAAW;AAChB,eAASE,WAAT,CAAqBC,SAArB,EAAgC;AAC9B,YAAI,CAACvqB,MAAM,CAACI,YAAR,IAAwBmqB,SAAS,YAAYrJ,QAAjD,EAA2D;AACzD,cAAIsJ,QAAQ,GAAGD,SAAS,CAAClqB,YAAD,CAAxB;;AACA,cAAImqB,QAAQ,YAAYnqB,YAAxB,EAAsC;AACpCL,YAAAA,MAAM,CAACI,YAAP,GAAsBoqB,QAAtB;AACD;AACF;;AACD,eAAOxqB,MAAM,CAACI,YAAd;AACD;;AACD,aAAO;AACLqqB,QAAAA,WAAW,EAAEpqB,YADR;AAELiqB,QAAAA,WAAW,EAAEA;AAFR,OAAP;AAID,KAdK,CAAN;AAeD,GAznFiC,CA0nFlC;AACA;;;AACAtqB,EAAAA,MAAM,CAACK,YAAP,GAAsBA,YAAtB,CA5nFkC,CA6nFlC;;AACAL,EAAAA,MAAM,CAACI,YAAP,GAAsBA,YAAtB;AACC,CA/nFA,EA+nFCJ,MA/nFD,CAAD","sourcesContent":["/** @license\r\n *\r\n * SoundManager 2: JavaScript Sound for the Web\r\n * ----------------------------------------------\r\n * http://schillmania.com/projects/soundmanager2/\r\n *\r\n * Copyright (c) 2007, Scott Schiller. All rights reserved.\r\n * Code provided under the BSD License:\r\n * http://schillmania.com/projects/soundmanager2/license.txt\r\n *\r\n * V2.97a.20170601\r\n */\r\n\r\n(function SM2(window, _undefined) {\r\n'use strict';\r\nif (!window || !window.document) {\r\n  throw new Error('SoundManager requires a browser with window and document objects.');\r\n}\r\nvar soundManager = null;\r\nfunction SoundManager(smURL, smID) {\r\n  this.setupOptions = {\r\n    url: (smURL || null),\r\n    flashVersion: 8,\r\n    debugMode: true,\r\n    debugFlash: false,\r\n    useConsole: true,\r\n    consoleOnly: true,\r\n    waitForWindowLoad: false,\r\n    bgColor: '#ffffff',\r\n    useHighPerformance: false,\r\n    flashPollingInterval: null,\r\n    html5PollingInterval: null,\r\n    flashLoadTimeout: 1000,\r\n    wmode: null,\r\n    allowScriptAccess: 'always',\r\n    useFlashBlock: false,\r\n    useHTML5Audio: true,\r\n    forceUseGlobalHTML5Audio: false,\r\n    ignoreMobileRestrictions: false,\r\n    html5Test: /^(probably|maybe)$/i,\r\n    preferFlash: false,\r\n    noSWFCache: false,\r\n    idPrefix: 'sound'\r\n  };\r\n  this.defaultOptions = {\r\n    autoLoad: false,\r\n    autoPlay: false,\r\n    from: null,\r\n    loops: 1,\r\n    onid3: null,\r\n    onerror: null,\r\n    onload: null,\r\n    whileloading: null,\r\n    onplay: null,\r\n    onpause: null,\r\n    onresume: null,\r\n    whileplaying: null,\r\n    onposition: null,\r\n    onstop: null,\r\n    onfinish: null,\r\n    multiShot: true,\r\n    multiShotEvents: false,\r\n    position: null,\r\n    pan: 0,\r\n    playbackRate: 1,\r\n    stream: true,\r\n    to: null,\r\n    type: null,\r\n    usePolicyFile: false,\r\n    volume: 100\r\n  };\r\n  this.flash9Options = {\r\n    onfailure: null,\r\n    isMovieStar: null,\r\n    usePeakData: false,\r\n    useWaveformData: false,\r\n    useEQData: false,\r\n    onbufferchange: null,\r\n    ondataerror: null\r\n  };\r\n  this.movieStarOptions = {\r\n    bufferTime: 3,\r\n    serverURL: null,\r\n    onconnect: null,\r\n    duration: null\r\n  };\r\n  this.audioFormats = {\r\n    mp3: {\r\n      type: ['audio/mpeg; codecs=\"mp3\"', 'audio/mpeg', 'audio/mp3', 'audio/MPA', 'audio/mpa-robust'],\r\n      required: true\r\n    },\r\n    mp4: {\r\n      related: ['aac', 'm4a', 'm4b'],\r\n      type: ['audio/mp4; codecs=\"mp4a.40.2\"', 'audio/aac', 'audio/x-m4a', 'audio/MP4A-LATM', 'audio/mpeg4-generic'],\r\n      required: false\r\n    },\r\n    ogg: {\r\n      type: ['audio/ogg; codecs=vorbis'],\r\n      required: false\r\n    },\r\n    opus: {\r\n      type: ['audio/ogg; codecs=opus', 'audio/opus'],\r\n      required: false\r\n    },\r\n    wav: {\r\n      type: ['audio/wav; codecs=\"1\"', 'audio/wav', 'audio/wave', 'audio/x-wav'],\r\n      required: false\r\n    },\r\n    flac: {\r\n      type: ['audio/flac'],\r\n      required: false\r\n    }\r\n  };\r\n  this.movieID = 'sm2-container';\r\n  this.id = (smID || 'sm2movie');\r\n  this.debugID = 'soundmanager-debug';\r\n  this.debugURLParam = /([#?&])debug=1/i;\r\n  this.versionNumber = 'V2.97a.20170601';\r\n  this.version = null;\r\n  this.movieURL = null;\r\n  this.altURL = null;\r\n  this.swfLoaded = false;\r\n  this.enabled = false;\r\n  this.oMC = null;\r\n  this.sounds = {};\r\n  this.soundIDs = [];\r\n  this.muted = false;\r\n  this.didFlashBlock = false;\r\n  this.filePattern = null;\r\n  this.filePatterns = {\r\n    flash8: /\\.mp3(\\?.*)?$/i,\r\n    flash9: /\\.mp3(\\?.*)?$/i\r\n  };\r\n  this.features = {\r\n    buffering: false,\r\n    peakData: false,\r\n    waveformData: false,\r\n    eqData: false,\r\n    movieStar: false\r\n  };\r\n  this.sandbox = {\r\n  };\r\n  this.html5 = {\r\n    usingFlash: null\r\n  };\r\n  this.flash = {};\r\n  this.html5Only = false;\r\n  this.ignoreFlash = false;\r\n  var SMSound,\r\n  sm2 = this, globalHTML5Audio = null, flash = null, sm = 'soundManager', smc = sm + ': ', h5 = 'HTML5::', id, ua = navigator.userAgent, wl = window.location.href.toString(), doc = document, doNothing, setProperties, init, fV, on_queue = [], debugOpen = true, debugTS, didAppend = false, appendSuccess = false, didInit = false, disabled = false, windowLoaded = false, _wDS, wdCount = 0, initComplete, mixin, assign, extraOptions, addOnEvent, processOnEvents, initUserOnload, delayWaitForEI, waitForEI, rebootIntoHTML5, setVersionInfo, handleFocus, strings, initMovie, domContentLoaded, winOnLoad, didDCLoaded, getDocument, createMovie, catchError, setPolling, initDebug, debugLevels = ['log', 'info', 'warn', 'error'], defaultFlashVersion = 8, disableObject, failSafely, normalizeMovieURL, oRemoved = null, oRemovedHTML = null, str, flashBlockHandler, getSWFCSS, swfCSS, toggleDebug, loopFix, policyFix, complain, idCheck, waitingForEI = false, initPending = false, startTimer, stopTimer, timerExecute, h5TimerCount = 0, h5IntervalTimer = null, parseURL, messages = [],\r\n  canIgnoreFlash, needsFlash = null, featureCheck, html5OK, html5CanPlay, html5ErrorCodes, html5Ext, html5Unload, domContentLoadedIE, testHTML5, event, slice = Array.prototype.slice, useGlobalHTML5Audio = false, lastGlobalHTML5URL, hasFlash, detectFlash, badSafariFix, html5_events, showSupport, flushMessages, wrapCallback, idCounter = 0, didSetup, msecScale = 1000,\r\n  is_iDevice = ua.match(/(ipad|iphone|ipod)/i), isAndroid = ua.match(/android/i), isIE = ua.match(/msie|trident/i),\r\n  isWebkit = ua.match(/webkit/i),\r\n  isSafari = (ua.match(/safari/i) && !ua.match(/chrome/i)),\r\n  isOpera = (ua.match(/opera/i)),\r\n  mobileHTML5 = (ua.match(/(mobile|pre\\/|xoom)/i) || is_iDevice || isAndroid),\r\n  isBadSafari = (!wl.match(/usehtml5audio/i) && !wl.match(/sm2-ignorebadua/i) && isSafari && !ua.match(/silk/i) && ua.match(/OS\\sX\\s10_6_([3-7])/i)),\r\n  hasConsole = (window.console !== _undefined && console.log !== _undefined),\r\n  isFocused = (doc.hasFocus !== _undefined ? doc.hasFocus() : null),\r\n  tryInitOnFocus = (isSafari && (doc.hasFocus === _undefined || !doc.hasFocus())),\r\n  okToDisable = !tryInitOnFocus,\r\n  flashMIME = /(mp3|mp4|mpa|m4a|m4b)/i,\r\n  emptyURL = 'about:blank',\r\n  emptyWAV = 'data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==',\r\n  overHTTP = (doc.location ? doc.location.protocol.match(/http/i) : null),\r\n  http = (!overHTTP ? '//' : ''),\r\n  netStreamMimeTypes = /^\\s*audio\\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\\s*(?:$|;)/i,\r\n  netStreamTypes = ['mpeg4', 'aac', 'flv', 'mov', 'mp4', 'm4v', 'f4v', 'm4a', 'm4b', 'mp4v', '3gp', '3g2'],\r\n  netStreamPattern = new RegExp('\\\\.(' + netStreamTypes.join('|') + ')(\\\\?.*)?$', 'i');\r\n  this.mimePattern = /^\\s*audio\\/(?:x-)?(?:mp(?:eg|3))\\s*(?:$|;)/i;\r\n  this.useAltURL = !overHTTP;\r\n  swfCSS = {\r\n    swfBox: 'sm2-object-box',\r\n    swfDefault: 'movieContainer',\r\n    swfError: 'swf_error',\r\n    swfTimedout: 'swf_timedout',\r\n    swfLoaded: 'swf_loaded',\r\n    swfUnblocked: 'swf_unblocked',\r\n    sm2Debug: 'sm2_debug',\r\n    highPerf: 'high_performance',\r\n    flashDebug: 'flash_debug'\r\n  };\r\n  html5ErrorCodes = [\r\n    null,\r\n    'MEDIA_ERR_ABORTED',\r\n    'MEDIA_ERR_NETWORK',\r\n    'MEDIA_ERR_DECODE',\r\n    'MEDIA_ERR_SRC_NOT_SUPPORTED'\r\n  ];\r\n  this.hasHTML5 = (function() {\r\n    try {\r\n      return (Audio !== _undefined && (isOpera && opera !== _undefined && opera.version() < 10 ? new Audio(null) : new Audio()).canPlayType !== _undefined);\r\n    } catch(e) {\r\n      return false;\r\n    }\r\n  }());\r\n  this.setup = function(options) {\r\n    var noURL = (!sm2.url);\r\n    if (options !== _undefined && didInit && needsFlash && sm2.ok() && (options.flashVersion !== _undefined || options.url !== _undefined || options.html5Test !== _undefined)) {\r\n    }\r\n    assign(options);\r\n    if (!useGlobalHTML5Audio) {\r\n      if (mobileHTML5) {\r\n        if (!sm2.setupOptions.ignoreMobileRestrictions || sm2.setupOptions.forceUseGlobalHTML5Audio) {\r\n          messages.push(strings.globalHTML5);\r\n          useGlobalHTML5Audio = true;\r\n        }\r\n      } else if (sm2.setupOptions.forceUseGlobalHTML5Audio) {\r\n        messages.push(strings.globalHTML5);\r\n        useGlobalHTML5Audio = true;\r\n      }\r\n    }\r\n    if (!didSetup && mobileHTML5) {\r\n      if (sm2.setupOptions.ignoreMobileRestrictions) {\r\n        messages.push(strings.ignoreMobile);\r\n      } else {\r\n        sm2.setupOptions.useHTML5Audio = true;\r\n        sm2.setupOptions.preferFlash = false;\r\n        if (is_iDevice) {\r\n          sm2.ignoreFlash = true;\r\n        } else if ((isAndroid && !ua.match(/android\\s2\\.3/i)) || !isAndroid) {\r\n          useGlobalHTML5Audio = true;\r\n        }\r\n      }\r\n    }\r\n    if (options) {\r\n      if (noURL && didDCLoaded && options.url !== _undefined) {\r\n        sm2.beginDelayedInit();\r\n      }\r\n      if (!didDCLoaded && options.url !== _undefined && doc.readyState === 'complete') {\r\n        setTimeout(domContentLoaded, 1);\r\n      }\r\n    }\r\n    didSetup = true;\r\n    return sm2;\r\n  };\r\n  this.ok = function() {\r\n    return (needsFlash ? (didInit && !disabled) : (sm2.useHTML5Audio && sm2.hasHTML5));\r\n  };\r\n  this.supported = this.ok;\r\n  this.getMovie = function(movie_id) {\r\n    return id(movie_id) || doc[movie_id] || window[movie_id];\r\n  };\r\n  this.createSound = function(oOptions, _url) {\r\n    var cs, cs_string, options, oSound = null;\r\n    if (!didInit || !sm2.ok()) {\r\n      return false;\r\n    }\r\n    if (_url !== _undefined) {\r\n      oOptions = {\r\n        id: oOptions,\r\n        url: _url\r\n      };\r\n    }\r\n    options = mixin(oOptions);\r\n    options.url = parseURL(options.url);\r\n    if (options.id === _undefined) {\r\n      options.id = sm2.setupOptions.idPrefix + (idCounter++);\r\n    }\r\n    if (idCheck(options.id, true)) {\r\n      return sm2.sounds[options.id];\r\n    }\r\n    function make() {\r\n      options = loopFix(options);\r\n      sm2.sounds[options.id] = new SMSound(options);\r\n      sm2.soundIDs.push(options.id);\r\n      return sm2.sounds[options.id];\r\n    }\r\n    if (html5OK(options)) {\r\n      oSound = make();\r\n      oSound._setup_html5(options);\r\n    } else {\r\n      if (sm2.html5Only) {\r\n        return make();\r\n      }\r\n      if (sm2.html5.usingFlash && options.url && options.url.match(/data:/i)) {\r\n        return make();\r\n      }\r\n      if (fV > 8) {\r\n        if (options.isMovieStar === null) {\r\n          options.isMovieStar = !!(options.serverURL || (options.type ? options.type.match(netStreamMimeTypes) : false) || (options.url && options.url.match(netStreamPattern)));\r\n        }\r\n      }\r\n      options = policyFix(options, cs);\r\n      oSound = make();\r\n      if (fV === 8) {\r\n        flash._createSound(options.id, options.loops || 1, options.usePolicyFile);\r\n      } else {\r\n        flash._createSound(options.id, options.url, options.usePeakData, options.useWaveformData, options.useEQData, options.isMovieStar, (options.isMovieStar ? options.bufferTime : false), options.loops || 1, options.serverURL, options.duration || null, options.autoPlay, true, options.autoLoad, options.usePolicyFile);\r\n        if (!options.serverURL) {\r\n          oSound.connected = true;\r\n          if (options.onconnect) {\r\n            options.onconnect.apply(oSound);\r\n          }\r\n        }\r\n      }\r\n      if (!options.serverURL && (options.autoLoad || options.autoPlay)) {\r\n        oSound.load(options);\r\n      }\r\n    }\r\n    if (!options.serverURL && options.autoPlay) {\r\n      oSound.play();\r\n    }\r\n    return oSound;\r\n  };\r\n  this.destroySound = function(sID, _bFromSound) {\r\n    if (!idCheck(sID)) return false;\r\n    var oS = sm2.sounds[sID], i;\r\n    oS.stop();\r\n    oS._iO = {};\r\n    oS.unload();\r\n    for (i = 0; i < sm2.soundIDs.length; i++) {\r\n      if (sm2.soundIDs[i] === sID) {\r\n        sm2.soundIDs.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    if (!_bFromSound) {\r\n      oS.destruct(true);\r\n    }\r\n    oS = null;\r\n    delete sm2.sounds[sID];\r\n    return true;\r\n  };\r\n  this.load = function(sID, oOptions) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].load(oOptions);\r\n  };\r\n  this.unload = function(sID) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].unload();\r\n  };\r\n  this.onPosition = function(sID, nPosition, oMethod, oScope) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].onposition(nPosition, oMethod, oScope);\r\n  };\r\n  this.onposition = this.onPosition;\r\n  this.clearOnPosition = function(sID, nPosition, oMethod) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].clearOnPosition(nPosition, oMethod);\r\n  };\r\n  this.play = function(sID, oOptions) {\r\n    var result = null,\r\n        overloaded = (oOptions && !(oOptions instanceof Object));\r\n    if (!didInit || !sm2.ok()) {\r\n      return false;\r\n    }\r\n    if (!idCheck(sID, overloaded)) {\r\n      if (!overloaded) return false;\r\n      if (overloaded) {\r\n        oOptions = {\r\n          url: oOptions\r\n        };\r\n      }\r\n      if (oOptions && oOptions.url) {\r\n        oOptions.id = sID;\r\n        result = sm2.createSound(oOptions).play();\r\n      }\r\n    } else if (overloaded) {\r\n      oOptions = {\r\n        url: oOptions\r\n      };\r\n    }\r\n    if (result === null) {\r\n      result = sm2.sounds[sID].play(oOptions);\r\n    }\r\n    return result;\r\n  };\r\n  this.start = this.play;\r\n  this.setPlaybackRate = function(sID, rate, allowOverride) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].setPlaybackRate(rate, allowOverride);\r\n  };\r\n  this.setPosition = function(sID, nMsecOffset) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].setPosition(nMsecOffset);\r\n  };\r\n  this.stop = function(sID) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].stop();\r\n  };\r\n  this.stopAll = function() {\r\n    var oSound;\r\n    for (oSound in sm2.sounds) {\r\n      if (sm2.sounds.hasOwnProperty(oSound)) {\r\n        sm2.sounds[oSound].stop();\r\n      }\r\n    }\r\n  };\r\n  this.pause = function(sID) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].pause();\r\n  };\r\n  this.pauseAll = function() {\r\n    var i;\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      sm2.sounds[sm2.soundIDs[i]].pause();\r\n    }\r\n  };\r\n  this.resume = function(sID) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].resume();\r\n  };\r\n  this.resumeAll = function() {\r\n    var i;\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      sm2.sounds[sm2.soundIDs[i]].resume();\r\n    }\r\n  };\r\n  this.togglePause = function(sID) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].togglePause();\r\n  };\r\n  this.setPan = function(sID, nPan) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].setPan(nPan);\r\n  };\r\n  this.setVolume = function(sID, nVol) {\r\n    var i, j;\r\n    if (sID !== _undefined && !isNaN(sID) && nVol === _undefined) {\r\n      for (i = 0, j = sm2.soundIDs.length; i < j; i++) {\r\n        sm2.sounds[sm2.soundIDs[i]].setVolume(sID);\r\n      }\r\n      return false;\r\n    }\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].setVolume(nVol);\r\n  };\r\n  this.mute = function(sID) {\r\n    var i = 0;\r\n    if (sID instanceof String) {\r\n      sID = null;\r\n    }\r\n    if (!sID) {\r\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n        sm2.sounds[sm2.soundIDs[i]].mute();\r\n      }\r\n      sm2.muted = true;\r\n    } else {\r\n      if (!idCheck(sID)) return false;\r\n      return sm2.sounds[sID].mute();\r\n    }\r\n    return true;\r\n  };\r\n  this.muteAll = function() {\r\n    sm2.mute();\r\n  };\r\n  this.unmute = function(sID) {\r\n    var i;\r\n    if (sID instanceof String) {\r\n      sID = null;\r\n    }\r\n    if (!sID) {\r\n      for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n        sm2.sounds[sm2.soundIDs[i]].unmute();\r\n      }\r\n      sm2.muted = false;\r\n    } else {\r\n      if (!idCheck(sID)) return false;\r\n      return sm2.sounds[sID].unmute();\r\n    }\r\n    return true;\r\n  };\r\n  this.unmuteAll = function() {\r\n    sm2.unmute();\r\n  };\r\n  this.toggleMute = function(sID) {\r\n    if (!idCheck(sID)) return false;\r\n    return sm2.sounds[sID].toggleMute();\r\n  };\r\n  this.getMemoryUse = function() {\r\n    var ram = 0;\r\n    if (flash && fV !== 8) {\r\n      ram = parseInt(flash._getMemoryUse(), 10);\r\n    }\r\n    return ram;\r\n  };\r\n  this.disable = function(bNoDisable) {\r\n    var i;\r\n    if (bNoDisable === _undefined) {\r\n      bNoDisable = false;\r\n    }\r\n    if (disabled) return false;\r\n    disabled = true;\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      disableObject(sm2.sounds[sm2.soundIDs[i]]);\r\n    }\r\n    disableObject(sm2);\r\n    initComplete(bNoDisable);\r\n    event.remove(window, 'load', initUserOnload);\r\n    return true;\r\n  };\r\n  this.canPlayMIME = function(sMIME) {\r\n    var result;\r\n    if (sm2.hasHTML5) {\r\n      result = html5CanPlay({\r\n        type: sMIME\r\n      });\r\n    }\r\n    if (!result && needsFlash) {\r\n      result = (sMIME && sm2.ok() ? !!((fV > 8 ? sMIME.match(netStreamMimeTypes) : null) || sMIME.match(sm2.mimePattern)) : null);\r\n    }\r\n    return result;\r\n  };\r\n  this.canPlayURL = function(sURL) {\r\n    var result;\r\n    if (sm2.hasHTML5) {\r\n      result = html5CanPlay({\r\n        url: sURL\r\n      });\r\n    }\r\n    if (!result && needsFlash) {\r\n      result = (sURL && sm2.ok() ? !!(sURL.match(sm2.filePattern)) : null);\r\n    }\r\n    return result;\r\n  };\r\n  this.canPlayLink = function(oLink) {\r\n    if (oLink.type !== _undefined && oLink.type && sm2.canPlayMIME(oLink.type)) return true;\r\n    return sm2.canPlayURL(oLink.href);\r\n  };\r\n  this.getSoundById = function(sID, _suppressDebug) {\r\n    if (!sID) return null;\r\n    var result = sm2.sounds[sID];\r\n    return result;\r\n  };\r\n  this.onready = function(oMethod, oScope) {\r\n    var sType = 'onready',\r\n        result = false;\r\n    if (typeof oMethod === 'function') {\r\n      if (!oScope) {\r\n        oScope = window;\r\n      }\r\n      addOnEvent(sType, oMethod, oScope);\r\n      processOnEvents();\r\n      result = true;\r\n    } else {\r\n      throw str('needFunction', sType);\r\n    }\r\n    return result;\r\n  };\r\n  this.ontimeout = function(oMethod, oScope) {\r\n    var sType = 'ontimeout',\r\n        result = false;\r\n    if (typeof oMethod === 'function') {\r\n      if (!oScope) {\r\n        oScope = window;\r\n      }\r\n      addOnEvent(sType, oMethod, oScope);\r\n      processOnEvents({ type: sType });\r\n      result = true;\r\n    } else {\r\n      throw str('needFunction', sType);\r\n    }\r\n    return result;\r\n  };\r\n  this._writeDebug = function(sText, sTypeOrObject) {\r\n    return true;\r\n  };\r\n  this._wD = this._writeDebug;\r\n  this._debug = function() {\r\n  };\r\n  this.reboot = function(resetEvents, excludeInit) {\r\n    var i, j, k;\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      sm2.sounds[sm2.soundIDs[i]].destruct();\r\n    }\r\n    if (flash) {\r\n      try {\r\n        if (isIE) {\r\n          oRemovedHTML = flash.innerHTML;\r\n        }\r\n        oRemoved = flash.parentNode.removeChild(flash);\r\n      } catch(e) {\r\n      }\r\n    }\r\n    oRemovedHTML = oRemoved = needsFlash = flash = null;\r\n    sm2.enabled = didDCLoaded = didInit = waitingForEI = initPending = didAppend = appendSuccess = disabled = useGlobalHTML5Audio = sm2.swfLoaded = false;\r\n    sm2.soundIDs = [];\r\n    sm2.sounds = {};\r\n    idCounter = 0;\r\n    didSetup = false;\r\n    if (!resetEvents) {\r\n      for (i in on_queue) {\r\n        if (on_queue.hasOwnProperty(i)) {\r\n          for (j = 0, k = on_queue[i].length; j < k; j++) {\r\n            on_queue[i][j].fired = false;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      on_queue = [];\r\n    }\r\n    sm2.html5 = {\r\n      usingFlash: null\r\n    };\r\n    sm2.flash = {};\r\n    sm2.html5Only = false;\r\n    sm2.ignoreFlash = false;\r\n    window.setTimeout(function() {\r\n      if (!excludeInit) {\r\n        sm2.beginDelayedInit();\r\n      }\r\n    }, 20);\r\n    return sm2;\r\n  };\r\n  this.reset = function() {\r\n    return sm2.reboot(true, true);\r\n  };\r\n  this.getMoviePercent = function() {\r\n    return (flash && 'PercentLoaded' in flash ? flash.PercentLoaded() : null);\r\n  };\r\n  this.beginDelayedInit = function() {\r\n    windowLoaded = true;\r\n    domContentLoaded();\r\n    setTimeout(function() {\r\n      if (initPending) return false;\r\n      createMovie();\r\n      initMovie();\r\n      initPending = true;\r\n      return true;\r\n    }, 20);\r\n    delayWaitForEI();\r\n  };\r\n  this.destruct = function() {\r\n    sm2.disable(true);\r\n  };\r\n  SMSound = function(oOptions) {\r\n    var s = this, resetProperties, add_html5_events, remove_html5_events, stop_html5_timer, start_html5_timer, attachOnPosition, onplay_called = false, onPositionItems = [], onPositionFired = 0, detachOnPosition, applyFromTo, lastURL = null, lastHTML5State, urlOmitted;\r\n    lastHTML5State = {\r\n      duration: null,\r\n      time: null\r\n    };\r\n    this.id = oOptions.id;\r\n    this.sID = this.id;\r\n    this.url = oOptions.url;\r\n    this.options = mixin(oOptions);\r\n    this.instanceOptions = this.options;\r\n    this._iO = this.instanceOptions;\r\n    this.pan = this.options.pan;\r\n    this.volume = this.options.volume;\r\n    this.isHTML5 = false;\r\n    this._a = null;\r\n    urlOmitted = (!this.url);\r\n    this.id3 = {};\r\n    this._debug = function() {\r\n    };\r\n    this.load = function(options) {\r\n      var oSound = null, instanceOptions;\r\n      if (options !== _undefined) {\r\n        s._iO = mixin(options, s.options);\r\n      } else {\r\n        options = s.options;\r\n        s._iO = options;\r\n        if (lastURL && lastURL !== s.url) {\r\n          s._iO.url = s.url;\r\n          s.url = null;\r\n        }\r\n      }\r\n      if (!s._iO.url) {\r\n        s._iO.url = s.url;\r\n      }\r\n      s._iO.url = parseURL(s._iO.url);\r\n      s.instanceOptions = s._iO;\r\n      instanceOptions = s._iO;\r\n      if (!instanceOptions.url && !s.url) {\r\n        return s;\r\n      }\r\n      if (instanceOptions.url === s.url && s.readyState !== 0 && s.readyState !== 2) {\r\n        if (s.readyState === 3 && instanceOptions.onload) {\r\n          wrapCallback(s, function() {\r\n            instanceOptions.onload.apply(s, [(!!s.duration)]);\r\n          });\r\n        }\r\n        return s;\r\n      }\r\n      s.loaded = false;\r\n      s.readyState = 1;\r\n      s.playState = 0;\r\n      s.id3 = {};\r\n      if (html5OK(instanceOptions)) {\r\n        oSound = s._setup_html5(instanceOptions);\r\n        if (!oSound._called_load) {\r\n          s._html5_canplay = false;\r\n          if (s.url !== instanceOptions.url) {\r\n            s._a.src = instanceOptions.url;\r\n            s.setPosition(0);\r\n          }\r\n          s._a.autobuffer = 'auto';\r\n          s._a.preload = 'auto';\r\n          s._a._called_load = true;\r\n        } else {\r\n        }\r\n      } else {\r\n        if (sm2.html5Only) {\r\n          return s;\r\n        }\r\n        if (s._iO.url && s._iO.url.match(/data:/i)) {\r\n          return s;\r\n        }\r\n        try {\r\n          s.isHTML5 = false;\r\n          s._iO = policyFix(loopFix(instanceOptions));\r\n          if (s._iO.autoPlay && (s._iO.position || s._iO.from)) {\r\n            s._iO.autoPlay = false;\r\n          }\r\n          instanceOptions = s._iO;\r\n          if (fV === 8) {\r\n            flash._load(s.id, instanceOptions.url, instanceOptions.stream, instanceOptions.autoPlay, instanceOptions.usePolicyFile);\r\n          } else {\r\n            flash._load(s.id, instanceOptions.url, !!(instanceOptions.stream), !!(instanceOptions.autoPlay), instanceOptions.loops || 1, !!(instanceOptions.autoLoad), instanceOptions.usePolicyFile);\r\n          }\r\n        } catch(e) {\r\n          catchError({\r\n            type: 'SMSOUND_LOAD_JS_EXCEPTION',\r\n            fatal: true\r\n          });\r\n        }\r\n      }\r\n      s.url = instanceOptions.url;\r\n      return s;\r\n    };\r\n    this.unload = function() {\r\n      if (s.readyState !== 0) {\r\n        if (!s.isHTML5) {\r\n          if (fV === 8) {\r\n            flash._unload(s.id, emptyURL);\r\n          } else {\r\n            flash._unload(s.id);\r\n          }\r\n        } else {\r\n          stop_html5_timer();\r\n          if (s._a) {\r\n            s._a.pause();\r\n            lastURL = html5Unload(s._a);\r\n          }\r\n        }\r\n        resetProperties();\r\n      }\r\n      return s;\r\n    };\r\n    this.destruct = function(_bFromSM) {\r\n      if (!s.isHTML5) {\r\n        s._iO.onfailure = null;\r\n        flash._destroySound(s.id);\r\n      } else {\r\n        stop_html5_timer();\r\n        if (s._a) {\r\n          s._a.pause();\r\n          html5Unload(s._a);\r\n          if (!useGlobalHTML5Audio) {\r\n            remove_html5_events();\r\n          }\r\n          s._a._s = null;\r\n          s._a = null;\r\n        }\r\n      }\r\n      if (!_bFromSM) {\r\n        sm2.destroySound(s.id, true);\r\n      }\r\n    };\r\n    this.play = function(options, _updatePlayState) {\r\n      var fN, allowMulti, a, onready,\r\n          audioClone, onended, oncanplay,\r\n          startOK = true;\r\n      _updatePlayState = (_updatePlayState === _undefined ? true : _updatePlayState);\r\n      if (!options) {\r\n        options = {};\r\n      }\r\n      if (s.url) {\r\n        s._iO.url = s.url;\r\n      }\r\n      s._iO = mixin(s._iO, s.options);\r\n      s._iO = mixin(options, s._iO);\r\n      s._iO.url = parseURL(s._iO.url);\r\n      s.instanceOptions = s._iO;\r\n      if (!s.isHTML5 && s._iO.serverURL && !s.connected) {\r\n        if (!s.getAutoPlay()) {\r\n          s.setAutoPlay(true);\r\n        }\r\n        return s;\r\n      }\r\n      if (html5OK(s._iO)) {\r\n        s._setup_html5(s._iO);\r\n        start_html5_timer();\r\n      }\r\n      if (s.playState === 1 && !s.paused) {\r\n        allowMulti = s._iO.multiShot;\r\n        if (!allowMulti) {\r\n          if (s.isHTML5) {\r\n            s.setPosition(s._iO.position);\r\n          }\r\n          return s;\r\n        }\r\n      }\r\n      if (options.url && options.url !== s.url) {\r\n        if (!s.readyState && !s.isHTML5 && fV === 8 && urlOmitted) {\r\n          urlOmitted = false;\r\n        } else {\r\n          s.load(s._iO);\r\n        }\r\n      }\r\n      if (!s.loaded) {\r\n        if (s.readyState === 0) {\r\n          if (!s.isHTML5 && !sm2.html5Only) {\r\n            s._iO.autoPlay = true;\r\n            s.load(s._iO);\r\n          } else if (s.isHTML5) {\r\n            s.load(s._iO);\r\n          } else {\r\n            return s;\r\n          }\r\n          s.instanceOptions = s._iO;\r\n        } else if (s.readyState === 2) {\r\n          return s;\r\n        } else {\r\n        }\r\n      } else {\r\n      }\r\n      if (!s.isHTML5 && fV === 9 && s.position > 0 && s.position === s.duration) {\r\n        options.position = 0;\r\n      }\r\n      if (s.paused && s.position >= 0 && (!s._iO.serverURL || s.position > 0)) {\r\n        s.resume();\r\n      } else {\r\n        s._iO = mixin(options, s._iO);\r\n        if (((!s.isHTML5 && s._iO.position !== null && s._iO.position > 0) || (s._iO.from !== null && s._iO.from > 0) || s._iO.to !== null) && s.instanceCount === 0 && s.playState === 0 && !s._iO.serverURL) {\r\n          onready = function() {\r\n            s._iO = mixin(options, s._iO);\r\n            s.play(s._iO);\r\n          };\r\n          if (s.isHTML5 && !s._html5_canplay) {\r\n            s.load({\r\n              _oncanplay: onready\r\n            });\r\n          } else if (!s.isHTML5 && !s.loaded && (!s.readyState || s.readyState !== 2)) {\r\n            s.load({\r\n              onload: onready\r\n            });\r\n          }\r\n          s._iO = applyFromTo();\r\n        }\r\n        if (!s.instanceCount || s._iO.multiShotEvents || (s.isHTML5 && s._iO.multiShot && !useGlobalHTML5Audio) || (!s.isHTML5 && fV > 8 && !s.getAutoPlay())) {\r\n          s.instanceCount++;\r\n        }\r\n        if (s._iO.onposition && s.playState === 0) {\r\n          attachOnPosition(s);\r\n        }\r\n        s.playState = 1;\r\n        s.paused = false;\r\n        s.position = (s._iO.position !== _undefined && !isNaN(s._iO.position) ? s._iO.position : 0);\r\n        if (!s.isHTML5) {\r\n          s._iO = policyFix(loopFix(s._iO));\r\n        }\r\n        if (s._iO.onplay && _updatePlayState) {\r\n          s._iO.onplay.apply(s);\r\n          onplay_called = true;\r\n        }\r\n        s.setVolume(s._iO.volume, true);\r\n        s.setPan(s._iO.pan, true);\r\n        if (s._iO.playbackRate !== 1) {\r\n          s.setPlaybackRate(s._iO.playbackRate);\r\n        }\r\n        if (!s.isHTML5) {\r\n          startOK = flash._start(s.id, s._iO.loops || 1, (fV === 9 ? s.position : s.position / msecScale), s._iO.multiShot || false);\r\n          if (fV === 9 && !startOK) {\r\n            if (s._iO.onplayerror) {\r\n              s._iO.onplayerror.apply(s);\r\n            }\r\n          }\r\n        } else if (s.instanceCount < 2) {\r\n            start_html5_timer();\r\n            a = s._setup_html5();\r\n            s.setPosition(s._iO.position);\r\n            a.play();\r\n          } else {\r\n            audioClone = new Audio(s._iO.url);\r\n            onended = function() {\r\n              event.remove(audioClone, 'ended', onended);\r\n              s._onfinish(s);\r\n              html5Unload(audioClone);\r\n              audioClone = null;\r\n            };\r\n            oncanplay = function() {\r\n              event.remove(audioClone, 'canplay', oncanplay);\r\n              try {\r\n                audioClone.currentTime = s._iO.position / msecScale;\r\n              } catch(err) {\r\n              }\r\n              audioClone.play();\r\n            };\r\n            event.add(audioClone, 'ended', onended);\r\n            if (s._iO.volume !== _undefined) {\r\n              audioClone.volume = Math.max(0, Math.min(1, s._iO.volume / 100));\r\n            }\r\n            if (s.muted) {\r\n              audioClone.muted = true;\r\n            }\r\n            if (s._iO.position) {\r\n              event.add(audioClone, 'canplay', oncanplay);\r\n            } else {\r\n              audioClone.play();\r\n            }\r\n          }\r\n      }\r\n      return s;\r\n    };\r\n    this.start = this.play;\r\n    this.stop = function(bAll) {\r\n      var instanceOptions = s._iO,\r\n          originalPosition;\r\n      if (s.playState === 1) {\r\n        s._onbufferchange(0);\r\n        s._resetOnPosition(0);\r\n        s.paused = false;\r\n        if (!s.isHTML5) {\r\n          s.playState = 0;\r\n        }\r\n        detachOnPosition();\r\n        if (instanceOptions.to) {\r\n          s.clearOnPosition(instanceOptions.to);\r\n        }\r\n        if (!s.isHTML5) {\r\n          flash._stop(s.id, bAll);\r\n          if (instanceOptions.serverURL) {\r\n            s.unload();\r\n          }\r\n        } else if (s._a) {\r\n            originalPosition = s.position;\r\n            s.setPosition(0);\r\n            s.position = originalPosition;\r\n            s._a.pause();\r\n            s.playState = 0;\r\n            s._onTimer();\r\n            stop_html5_timer();\r\n          }\r\n        s.instanceCount = 0;\r\n        s._iO = {};\r\n        if (instanceOptions.onstop) {\r\n          instanceOptions.onstop.apply(s);\r\n        }\r\n      }\r\n      return s;\r\n    };\r\n    this.setAutoPlay = function(autoPlay) {\r\n      s._iO.autoPlay = autoPlay;\r\n      if (!s.isHTML5) {\r\n        flash._setAutoPlay(s.id, autoPlay);\r\n        if (autoPlay) {\r\n          if (!s.instanceCount && s.readyState === 1) {\r\n            s.instanceCount++;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this.getAutoPlay = function() {\r\n      return s._iO.autoPlay;\r\n    };\r\n    this.setPlaybackRate = function(playbackRate) {\r\n      var normalizedRate = Math.max(0.5, Math.min(4, playbackRate));\r\n      if (s.isHTML5) {\r\n        try {\r\n          s._iO.playbackRate = normalizedRate;\r\n          s._a.playbackRate = normalizedRate;\r\n        } catch(e) {\r\n        }\r\n      }\r\n      return s;\r\n    };\r\n    this.setPosition = function(nMsecOffset) {\r\n      if (nMsecOffset === _undefined) {\r\n        nMsecOffset = 0;\r\n      }\r\n      var position, position1K,\r\n          offset = (s.isHTML5 ? Math.max(nMsecOffset, 0) : Math.min(s.duration || s._iO.duration, Math.max(nMsecOffset, 0)));\r\n      s.position = offset;\r\n      position1K = s.position / msecScale;\r\n      s._resetOnPosition(s.position);\r\n      s._iO.position = offset;\r\n      if (!s.isHTML5) {\r\n        position = (fV === 9 ? s.position : position1K);\r\n        if (s.readyState && s.readyState !== 2) {\r\n          flash._setPosition(s.id, position, (s.paused || !s.playState), s._iO.multiShot);\r\n        }\r\n      } else if (s._a) {\r\n        if (s._html5_canplay) {\r\n          if (s._a.currentTime.toFixed(3) !== position1K.toFixed(3)) {\r\n            try {\r\n              s._a.currentTime = position1K;\r\n              if (s.playState === 0 || s.paused) {\r\n                s._a.pause();\r\n              }\r\n            } catch(e) {\r\n            }\r\n          }\r\n        } else if (position1K) {\r\n          return s;\r\n        }\r\n        if (s.paused) {\r\n          s._onTimer(true);\r\n        }\r\n      }\r\n      return s;\r\n    };\r\n    this.pause = function(_bCallFlash) {\r\n      if (s.paused || (s.playState === 0 && s.readyState !== 1)) return s;\r\n      s.paused = true;\r\n      if (!s.isHTML5) {\r\n        if (_bCallFlash || _bCallFlash === _undefined) {\r\n          flash._pause(s.id, s._iO.multiShot);\r\n        }\r\n      } else {\r\n        s._setup_html5().pause();\r\n        stop_html5_timer();\r\n      }\r\n      if (s._iO.onpause) {\r\n        s._iO.onpause.apply(s);\r\n      }\r\n      return s;\r\n    };\r\n    this.resume = function() {\r\n      var instanceOptions = s._iO;\r\n      if (!s.paused) return s;\r\n      s.paused = false;\r\n      s.playState = 1;\r\n      if (!s.isHTML5) {\r\n        if (instanceOptions.isMovieStar && !instanceOptions.serverURL) {\r\n          s.setPosition(s.position);\r\n        }\r\n        flash._pause(s.id, instanceOptions.multiShot);\r\n      } else {\r\n        s._setup_html5().play();\r\n        start_html5_timer();\r\n      }\r\n      if (!onplay_called && instanceOptions.onplay) {\r\n        instanceOptions.onplay.apply(s);\r\n        onplay_called = true;\r\n      } else if (instanceOptions.onresume) {\r\n        instanceOptions.onresume.apply(s);\r\n      }\r\n      return s;\r\n    };\r\n    this.togglePause = function() {\r\n      if (s.playState === 0) {\r\n        s.play({\r\n          position: (fV === 9 && !s.isHTML5 ? s.position : s.position / msecScale)\r\n        });\r\n        return s;\r\n      }\r\n      if (s.paused) {\r\n        s.resume();\r\n      } else {\r\n        s.pause();\r\n      }\r\n      return s;\r\n    };\r\n    this.setPan = function(nPan, bInstanceOnly) {\r\n      if (nPan === _undefined) {\r\n        nPan = 0;\r\n      }\r\n      if (bInstanceOnly === _undefined) {\r\n        bInstanceOnly = false;\r\n      }\r\n      if (!s.isHTML5) {\r\n        flash._setPan(s.id, nPan);\r\n      }\r\n      s._iO.pan = nPan;\r\n      if (!bInstanceOnly) {\r\n        s.pan = nPan;\r\n        s.options.pan = nPan;\r\n      }\r\n      return s;\r\n    };\r\n    this.setVolume = function(nVol, _bInstanceOnly) {\r\n      if (nVol === _undefined) {\r\n        nVol = 100;\r\n      }\r\n      if (_bInstanceOnly === _undefined) {\r\n        _bInstanceOnly = false;\r\n      }\r\n      if (!s.isHTML5) {\r\n        flash._setVolume(s.id, (sm2.muted && !s.muted) || s.muted ? 0 : nVol);\r\n      } else if (s._a) {\r\n        if (sm2.muted && !s.muted) {\r\n          s.muted = true;\r\n          s._a.muted = true;\r\n        }\r\n        s._a.volume = Math.max(0, Math.min(1, nVol / 100));\r\n      }\r\n      s._iO.volume = nVol;\r\n      if (!_bInstanceOnly) {\r\n        s.volume = nVol;\r\n        s.options.volume = nVol;\r\n      }\r\n      return s;\r\n    };\r\n    this.mute = function() {\r\n      s.muted = true;\r\n      if (!s.isHTML5) {\r\n        flash._setVolume(s.id, 0);\r\n      } else if (s._a) {\r\n        s._a.muted = true;\r\n      }\r\n      return s;\r\n    };\r\n    this.unmute = function() {\r\n      s.muted = false;\r\n      var hasIO = (s._iO.volume !== _undefined);\r\n      if (!s.isHTML5) {\r\n        flash._setVolume(s.id, hasIO ? s._iO.volume : s.options.volume);\r\n      } else if (s._a) {\r\n        s._a.muted = false;\r\n      }\r\n      return s;\r\n    };\r\n    this.toggleMute = function() {\r\n      return (s.muted ? s.unmute() : s.mute());\r\n    };\r\n    this.onPosition = function(nPosition, oMethod, oScope) {\r\n      onPositionItems.push({\r\n        position: parseInt(nPosition, 10),\r\n        method: oMethod,\r\n        scope: (oScope !== _undefined ? oScope : s),\r\n        fired: false\r\n      });\r\n      return s;\r\n    };\r\n    this.onposition = this.onPosition;\r\n    this.clearOnPosition = function(nPosition, oMethod) {\r\n      var i;\r\n      nPosition = parseInt(nPosition, 10);\r\n      if (isNaN(nPosition)) {\r\n        return;\r\n      }\r\n      for (i = 0; i < onPositionItems.length; i++) {\r\n        if (nPosition === onPositionItems[i].position) {\r\n          if (!oMethod || (oMethod === onPositionItems[i].method)) {\r\n            if (onPositionItems[i].fired) {\r\n              onPositionFired--;\r\n            }\r\n            onPositionItems.splice(i, 1);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this._processOnPosition = function() {\r\n      var i, item, j = onPositionItems.length;\r\n      if (!j || !s.playState || onPositionFired >= j) return false;\r\n      for (i = j - 1; i >= 0; i--) {\r\n        item = onPositionItems[i];\r\n        if (!item.fired && s.position >= item.position) {\r\n          item.fired = true;\r\n          onPositionFired++;\r\n          item.method.apply(item.scope, [item.position]);\r\n          j = onPositionItems.length;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    this._resetOnPosition = function(nPosition) {\r\n      var i, item, j = onPositionItems.length;\r\n      if (!j) return false;\r\n      for (i = j - 1; i >= 0; i--) {\r\n        item = onPositionItems[i];\r\n        if (item.fired && nPosition <= item.position) {\r\n          item.fired = false;\r\n          onPositionFired--;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    applyFromTo = function() {\r\n      var instanceOptions = s._iO,\r\n          f = instanceOptions.from,\r\n          t = instanceOptions.to,\r\n          start, end;\r\n      end = function() {\r\n        s.clearOnPosition(t, end);\r\n        s.stop();\r\n      };\r\n      start = function() {\r\n        if (t !== null && !isNaN(t)) {\r\n          s.onPosition(t, end);\r\n        }\r\n      };\r\n      if (f !== null && !isNaN(f)) {\r\n        instanceOptions.position = f;\r\n        instanceOptions.multiShot = false;\r\n        start();\r\n      }\r\n      return instanceOptions;\r\n    };\r\n    attachOnPosition = function() {\r\n      var item,\r\n          op = s._iO.onposition;\r\n      if (op) {\r\n        for (item in op) {\r\n          if (op.hasOwnProperty(item)) {\r\n            s.onPosition(parseInt(item, 10), op[item]);\r\n          }\r\n        }\r\n      }\r\n    };\r\n    detachOnPosition = function() {\r\n      var item,\r\n          op = s._iO.onposition;\r\n      if (op) {\r\n        for (item in op) {\r\n          if (op.hasOwnProperty(item)) {\r\n            s.clearOnPosition(parseInt(item, 10));\r\n          }\r\n        }\r\n      }\r\n    };\r\n    start_html5_timer = function() {\r\n      if (s.isHTML5) {\r\n        startTimer(s);\r\n      }\r\n    };\r\n    stop_html5_timer = function() {\r\n      if (s.isHTML5) {\r\n        stopTimer(s);\r\n      }\r\n    };\r\n    resetProperties = function(retainPosition) {\r\n      if (!retainPosition) {\r\n        onPositionItems = [];\r\n        onPositionFired = 0;\r\n      }\r\n      onplay_called = false;\r\n      s._hasTimer = null;\r\n      s._a = null;\r\n      s._html5_canplay = false;\r\n      s.bytesLoaded = null;\r\n      s.bytesTotal = null;\r\n      s.duration = (s._iO && s._iO.duration ? s._iO.duration : null);\r\n      s.durationEstimate = null;\r\n      s.buffered = [];\r\n      s.eqData = [];\r\n      s.eqData.left = [];\r\n      s.eqData.right = [];\r\n      s.failures = 0;\r\n      s.isBuffering = false;\r\n      s.instanceOptions = {};\r\n      s.instanceCount = 0;\r\n      s.loaded = false;\r\n      s.metadata = {};\r\n      s.readyState = 0;\r\n      s.muted = false;\r\n      s.paused = false;\r\n      s.peakData = {\r\n        left: 0,\r\n        right: 0\r\n      };\r\n      s.waveformData = {\r\n        left: [],\r\n        right: []\r\n      };\r\n      s.playState = 0;\r\n      s.position = null;\r\n      s.id3 = {};\r\n    };\r\n    resetProperties();\r\n    this._onTimer = function(bForce) {\r\n      var duration, isNew = false, time, x = {};\r\n      if (s._hasTimer || bForce) {\r\n        if (s._a && (bForce || ((s.playState > 0 || s.readyState === 1) && !s.paused))) {\r\n          duration = s._get_html5_duration();\r\n          if (duration !== lastHTML5State.duration) {\r\n            lastHTML5State.duration = duration;\r\n            s.duration = duration;\r\n            isNew = true;\r\n          }\r\n          s.durationEstimate = s.duration;\r\n          time = (s._a.currentTime * msecScale || 0);\r\n          if (time !== lastHTML5State.time) {\r\n            lastHTML5State.time = time;\r\n            isNew = true;\r\n          }\r\n          if (isNew || bForce) {\r\n            s._whileplaying(time, x, x, x, x);\r\n          }\r\n        }\r\n      }\r\n      return isNew;\r\n    };\r\n    this._get_html5_duration = function() {\r\n      var instanceOptions = s._iO,\r\n          d = (s._a && s._a.duration ? s._a.duration * msecScale : (instanceOptions && instanceOptions.duration ? instanceOptions.duration : null)),\r\n          result = (d && !isNaN(d) && d !== Infinity ? d : null);\r\n      return result;\r\n    };\r\n    this._apply_loop = function(a, nLoops) {\r\n      a.loop = (nLoops > 1 ? 'loop' : '');\r\n    };\r\n    this._setup_html5 = function(options) {\r\n      var instanceOptions = mixin(s._iO, options),\r\n          a = useGlobalHTML5Audio ? globalHTML5Audio : s._a,\r\n          dURL = decodeURI(instanceOptions.url),\r\n          sameURL;\r\n      if (useGlobalHTML5Audio) {\r\n        if (dURL === decodeURI(lastGlobalHTML5URL)) {\r\n          sameURL = true;\r\n        }\r\n      } else if (dURL === decodeURI(lastURL)) {\r\n        sameURL = true;\r\n      }\r\n      if (a) {\r\n        if (a._s) {\r\n          if (useGlobalHTML5Audio) {\r\n            if (a._s && a._s.playState && !sameURL) {\r\n              a._s.stop();\r\n            }\r\n          } else if (!useGlobalHTML5Audio && dURL === decodeURI(lastURL)) {\r\n            s._apply_loop(a, instanceOptions.loops);\r\n            return a;\r\n          }\r\n        }\r\n        if (!sameURL) {\r\n          if (lastURL) {\r\n            resetProperties(false);\r\n          }\r\n          a.src = instanceOptions.url;\r\n          s.url = instanceOptions.url;\r\n          lastURL = instanceOptions.url;\r\n          lastGlobalHTML5URL = instanceOptions.url;\r\n          a._called_load = false;\r\n        }\r\n      } else {\r\n        if (instanceOptions.autoLoad || instanceOptions.autoPlay) {\r\n          s._a = new Audio(instanceOptions.url);\r\n          s._a.load();\r\n        } else {\r\n          s._a = (isOpera && opera.version() < 10 ? new Audio(null) : new Audio());\r\n        }\r\n        a = s._a;\r\n        a._called_load = false;\r\n        if (useGlobalHTML5Audio) {\r\n          globalHTML5Audio = a;\r\n        }\r\n      }\r\n      s.isHTML5 = true;\r\n      s._a = a;\r\n      a._s = s;\r\n      add_html5_events();\r\n      s._apply_loop(a, instanceOptions.loops);\r\n      if (instanceOptions.autoLoad || instanceOptions.autoPlay) {\r\n        s.load();\r\n      } else {\r\n        a.autobuffer = false;\r\n        a.preload = 'auto';\r\n      }\r\n      return a;\r\n    };\r\n    add_html5_events = function() {\r\n      if (s._a._added_events) return false;\r\n      var f;\r\n      function add(oEvt, oFn, bCapture) {\r\n        return s._a ? s._a.addEventListener(oEvt, oFn, bCapture || false) : null;\r\n      }\r\n      s._a._added_events = true;\r\n      for (f in html5_events) {\r\n        if (html5_events.hasOwnProperty(f)) {\r\n          add(f, html5_events[f]);\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    remove_html5_events = function() {\r\n      var f;\r\n      function remove(oEvt, oFn, bCapture) {\r\n        return (s._a ? s._a.removeEventListener(oEvt, oFn, bCapture || false) : null);\r\n      }\r\n      s._a._added_events = false;\r\n      for (f in html5_events) {\r\n        if (html5_events.hasOwnProperty(f)) {\r\n          remove(f, html5_events[f]);\r\n        }\r\n      }\r\n    };\r\n    this._onload = function(nSuccess) {\r\n      var fN,\r\n          loadOK = !!nSuccess || (!s.isHTML5 && fV === 8 && s.duration);\r\n      s.loaded = loadOK;\r\n      s.readyState = (loadOK ? 3 : 2);\r\n      s._onbufferchange(0);\r\n      if (!loadOK && !s.isHTML5) {\r\n        s._onerror();\r\n      }\r\n      if (s._iO.onload) {\r\n        wrapCallback(s, function() {\r\n          s._iO.onload.apply(s, [loadOK]);\r\n        });\r\n      }\r\n      return true;\r\n    };\r\n    this._onerror = function(errorCode, description) {\r\n      if (s._iO.onerror) {\r\n        wrapCallback(s, function() {\r\n          s._iO.onerror.apply(s, [errorCode, description]);\r\n        });\r\n      }\r\n    };\r\n    this._onbufferchange = function(nIsBuffering) {\r\n      if (s.playState === 0) return false;\r\n      if ((nIsBuffering && s.isBuffering) || (!nIsBuffering && !s.isBuffering)) return false;\r\n      s.isBuffering = (nIsBuffering === 1);\r\n      if (s._iO.onbufferchange) {\r\n        s._iO.onbufferchange.apply(s, [nIsBuffering]);\r\n      }\r\n      return true;\r\n    };\r\n    this._onsuspend = function() {\r\n      if (s._iO.onsuspend) {\r\n        s._iO.onsuspend.apply(s);\r\n      }\r\n      return true;\r\n    };\r\n    this._onfailure = function(msg, level, code) {\r\n      s.failures++;\r\n      if (s._iO.onfailure && s.failures === 1) {\r\n        s._iO.onfailure(msg, level, code);\r\n      } else {\r\n      }\r\n    };\r\n    this._onwarning = function(msg, level, code) {\r\n      if (s._iO.onwarning) {\r\n        s._iO.onwarning(msg, level, code);\r\n      }\r\n    };\r\n    this._onfinish = function() {\r\n      var io_onfinish = s._iO.onfinish;\r\n      s._onbufferchange(0);\r\n      s._resetOnPosition(0);\r\n      if (s.instanceCount) {\r\n        s.instanceCount--;\r\n        if (!s.instanceCount) {\r\n          detachOnPosition();\r\n          s.playState = 0;\r\n          s.paused = false;\r\n          s.instanceCount = 0;\r\n          s.instanceOptions = {};\r\n          s._iO = {};\r\n          stop_html5_timer();\r\n          if (s.isHTML5) {\r\n            s.position = 0;\r\n          }\r\n        }\r\n        if (!s.instanceCount || s._iO.multiShotEvents) {\r\n          if (io_onfinish) {\r\n            wrapCallback(s, function() {\r\n              io_onfinish.apply(s);\r\n            });\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this._whileloading = function(nBytesLoaded, nBytesTotal, nDuration, nBufferLength) {\r\n      var instanceOptions = s._iO;\r\n      s.bytesLoaded = nBytesLoaded;\r\n      s.bytesTotal = nBytesTotal;\r\n      s.duration = Math.floor(nDuration);\r\n      s.bufferLength = nBufferLength;\r\n      if (!s.isHTML5 && !instanceOptions.isMovieStar) {\r\n        if (instanceOptions.duration) {\r\n          s.durationEstimate = (s.duration > instanceOptions.duration) ? s.duration : instanceOptions.duration;\r\n        } else {\r\n          s.durationEstimate = parseInt((s.bytesTotal / s.bytesLoaded) * s.duration, 10);\r\n        }\r\n      } else {\r\n        s.durationEstimate = s.duration;\r\n      }\r\n      if (!s.isHTML5) {\r\n        s.buffered = [{\r\n          start: 0,\r\n          end: s.duration\r\n        }];\r\n      }\r\n      if ((s.readyState !== 3 || s.isHTML5) && instanceOptions.whileloading) {\r\n        instanceOptions.whileloading.apply(s);\r\n      }\r\n    };\r\n    this._whileplaying = function(nPosition, oPeakData, oWaveformDataLeft, oWaveformDataRight, oEQData) {\r\n      var instanceOptions = s._iO,\r\n          eqLeft;\r\n      if (isNaN(nPosition) || nPosition === null) return false;\r\n      s.position = Math.max(0, nPosition);\r\n      s._processOnPosition();\r\n      if (!s.isHTML5 && fV > 8) {\r\n        if (instanceOptions.usePeakData && oPeakData !== _undefined && oPeakData) {\r\n          s.peakData = {\r\n            left: oPeakData.leftPeak,\r\n            right: oPeakData.rightPeak\r\n          };\r\n        }\r\n        if (instanceOptions.useWaveformData && oWaveformDataLeft !== _undefined && oWaveformDataLeft) {\r\n          s.waveformData = {\r\n            left: oWaveformDataLeft.split(','),\r\n            right: oWaveformDataRight.split(',')\r\n          };\r\n        }\r\n        if (instanceOptions.useEQData) {\r\n          if (oEQData !== _undefined && oEQData && oEQData.leftEQ) {\r\n            eqLeft = oEQData.leftEQ.split(',');\r\n            s.eqData = eqLeft;\r\n            s.eqData.left = eqLeft;\r\n            if (oEQData.rightEQ !== _undefined && oEQData.rightEQ) {\r\n              s.eqData.right = oEQData.rightEQ.split(',');\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (s.playState === 1) {\r\n        if (!s.isHTML5 && fV === 8 && !s.position && s.isBuffering) {\r\n          s._onbufferchange(0);\r\n        }\r\n        if (instanceOptions.whileplaying) {\r\n          instanceOptions.whileplaying.apply(s);\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n    this._oncaptiondata = function(oData) {\r\n      s.captiondata = oData;\r\n      if (s._iO.oncaptiondata) {\r\n        s._iO.oncaptiondata.apply(s, [oData]);\r\n      }\r\n    };\r\n    this._onmetadata = function(oMDProps, oMDData) {\r\n      var oData = {}, i, j;\r\n      for (i = 0, j = oMDProps.length; i < j; i++) {\r\n        oData[oMDProps[i]] = oMDData[i];\r\n      }\r\n      s.metadata = oData;\r\n      if (s._iO.onmetadata) {\r\n        s._iO.onmetadata.call(s, s.metadata);\r\n      }\r\n    };\r\n    this._onid3 = function(oID3Props, oID3Data) {\r\n      var oData = [], i, j;\r\n      for (i = 0, j = oID3Props.length; i < j; i++) {\r\n        oData[oID3Props[i]] = oID3Data[i];\r\n      }\r\n      s.id3 = mixin(s.id3, oData);\r\n      if (s._iO.onid3) {\r\n        s._iO.onid3.apply(s);\r\n      }\r\n    };\r\n    this._onconnect = function(bSuccess) {\r\n      bSuccess = (bSuccess === 1);\r\n      s.connected = bSuccess;\r\n      if (bSuccess) {\r\n        s.failures = 0;\r\n        if (idCheck(s.id)) {\r\n          if (s.getAutoPlay()) {\r\n            s.play(_undefined, s.getAutoPlay());\r\n          } else if (s._iO.autoLoad) {\r\n            s.load();\r\n          }\r\n        }\r\n        if (s._iO.onconnect) {\r\n          s._iO.onconnect.apply(s, [bSuccess]);\r\n        }\r\n      }\r\n    };\r\n    this._ondataerror = function(sError) {\r\n      if (s.playState > 0) {\r\n        if (s._iO.ondataerror) {\r\n          s._iO.ondataerror.apply(s);\r\n        }\r\n      }\r\n    };\r\n  };\r\n  getDocument = function() {\r\n    return (doc.body || doc.getElementsByTagName('div')[0]);\r\n  };\r\n  id = function(sID) {\r\n    return doc.getElementById(sID);\r\n  };\r\n  mixin = function(oMain, oAdd) {\r\n    var o1 = (oMain || {}), o2, o;\r\n    o2 = (oAdd === _undefined ? sm2.defaultOptions : oAdd);\r\n    for (o in o2) {\r\n      if (o2.hasOwnProperty(o) && o1[o] === _undefined) {\r\n        if (typeof o2[o] !== 'object' || o2[o] === null) {\r\n          o1[o] = o2[o];\r\n        } else {\r\n          o1[o] = mixin(o1[o], o2[o]);\r\n        }\r\n      }\r\n    }\r\n    return o1;\r\n  };\r\n  wrapCallback = function(oSound, callback) {\r\n    if (!oSound.isHTML5 && fV === 8) {\r\n      window.setTimeout(callback, 0);\r\n    } else {\r\n      callback();\r\n    }\r\n  };\r\n  extraOptions = {\r\n    onready: 1,\r\n    ontimeout: 1,\r\n    defaultOptions: 1,\r\n    flash9Options: 1,\r\n    movieStarOptions: 1\r\n  };\r\n  assign = function(o, oParent) {\r\n    var i,\r\n        result = true,\r\n        hasParent = (oParent !== _undefined),\r\n        setupOptions = sm2.setupOptions,\r\n        bonusOptions = extraOptions;\r\n    for (i in o) {\r\n      if (o.hasOwnProperty(i)) {\r\n        if (typeof o[i] !== 'object' || o[i] === null || o[i] instanceof Array || o[i] instanceof RegExp) {\r\n          if (hasParent && bonusOptions[oParent] !== _undefined) {\r\n            sm2[oParent][i] = o[i];\r\n          } else if (setupOptions[i] !== _undefined) {\r\n            sm2.setupOptions[i] = o[i];\r\n            sm2[i] = o[i];\r\n          } else if (bonusOptions[i] === _undefined) {\r\n            result = false;\r\n          } else if (sm2[i] instanceof Function) {\r\n            sm2[i].apply(sm2, (o[i] instanceof Array ? o[i] : [o[i]]));\r\n          } else {\r\n            sm2[i] = o[i];\r\n          }\r\n        } else if (bonusOptions[i] === _undefined) {\r\n          result = false;\r\n        } else {\r\n          return assign(o[i], i);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n  function preferFlashCheck(kind) {\r\n    return (sm2.preferFlash && hasFlash && !sm2.ignoreFlash && (sm2.flash[kind] !== _undefined && sm2.flash[kind]));\r\n  }\r\n  event = (function() {\r\n    var old = (window.attachEvent),\r\n    evt = {\r\n      add: (old ? 'attachEvent' : 'addEventListener'),\r\n      remove: (old ? 'detachEvent' : 'removeEventListener')\r\n    };\r\n    function getArgs(oArgs) {\r\n      var args = slice.call(oArgs),\r\n          len = args.length;\r\n      if (old) {\r\n        args[1] = 'on' + args[1];\r\n        if (len > 3) {\r\n          args.pop();\r\n        }\r\n      } else if (len === 3) {\r\n        args.push(false);\r\n      }\r\n      return args;\r\n    }\r\n    function apply(args, sType) {\r\n      var element = args.shift(),\r\n          method = [evt[sType]];\r\n      if (old) {\r\n        element[method](args[0], args[1]);\r\n      } else {\r\n        element[method].apply(element, args);\r\n      }\r\n    }\r\n    function add() {\r\n      apply(getArgs(arguments), 'add');\r\n    }\r\n    function remove() {\r\n      apply(getArgs(arguments), 'remove');\r\n    }\r\n    return {\r\n      add: add,\r\n      remove: remove\r\n    };\r\n  }());\r\n  function html5_event(oFn) {\r\n    return function(e) {\r\n      var s = this._s,\r\n          result;\r\n      if (!s || !s._a) {\r\n        result = null;\r\n      } else {\r\n        result = oFn.call(this, e);\r\n      }\r\n      return result;\r\n    };\r\n  }\r\n  html5_events = {\r\n    abort: html5_event(function() {\r\n    }),\r\n    canplay: html5_event(function() {\r\n      var s = this._s,\r\n          position1K;\r\n      if (s._html5_canplay) {\r\n        return;\r\n      }\r\n      s._html5_canplay = true;\r\n      s._onbufferchange(0);\r\n      position1K = (s._iO.position !== _undefined && !isNaN(s._iO.position) ? s._iO.position / msecScale : null);\r\n      if (this.currentTime !== position1K) {\r\n        try {\r\n          this.currentTime = position1K;\r\n        } catch(ee) {\r\n        }\r\n      }\r\n      if (s._iO._oncanplay) {\r\n        s._iO._oncanplay();\r\n      }\r\n    }),\r\n    canplaythrough: html5_event(function() {\r\n      var s = this._s;\r\n      if (!s.loaded) {\r\n        s._onbufferchange(0);\r\n        s._whileloading(s.bytesLoaded, s.bytesTotal, s._get_html5_duration());\r\n        s._onload(true);\r\n      }\r\n    }),\r\n    durationchange: html5_event(function() {\r\n      var s = this._s,\r\n          duration;\r\n      duration = s._get_html5_duration();\r\n      if (!isNaN(duration) && duration !== s.duration) {\r\n        s.durationEstimate = s.duration = duration;\r\n      }\r\n    }),\r\n    ended: html5_event(function() {\r\n      var s = this._s;\r\n      s._onfinish();\r\n    }),\r\n    error: html5_event(function() {\r\n      var description = (html5ErrorCodes[this.error.code] || null);\r\n      this._s._onload(false);\r\n      this._s._onerror(this.error.code, description);\r\n    }),\r\n    loadeddata: html5_event(function() {\r\n      var s = this._s;\r\n      if (!s._loaded && !isSafari) {\r\n        s.duration = s._get_html5_duration();\r\n      }\r\n    }),\r\n    loadedmetadata: html5_event(function() {\r\n    }),\r\n    loadstart: html5_event(function() {\r\n      this._s._onbufferchange(1);\r\n    }),\r\n    play: html5_event(function() {\r\n      this._s._onbufferchange(0);\r\n    }),\r\n    playing: html5_event(function() {\r\n      this._s._onbufferchange(0);\r\n    }),\r\n    progress: html5_event(function(e) {\r\n      var s = this._s,\r\n          i, j, progStr, buffered = 0,\r\n          isProgress = (e.type === 'progress'),\r\n          ranges = e.target.buffered,\r\n          loaded = (e.loaded || 0),\r\n          total = (e.total || 1);\r\n      s.buffered = [];\r\n      if (ranges && ranges.length) {\r\n        for (i = 0, j = ranges.length; i < j; i++) {\r\n          s.buffered.push({\r\n            start: ranges.start(i) * msecScale,\r\n            end: ranges.end(i) * msecScale\r\n          });\r\n        }\r\n        buffered = (ranges.end(0) - ranges.start(0)) * msecScale;\r\n        loaded = Math.min(1, buffered / (e.target.duration * msecScale));\r\n      }\r\n      if (!isNaN(loaded)) {\r\n        s._whileloading(loaded, total, s._get_html5_duration());\r\n        if (loaded && total && loaded === total) {\r\n          html5_events.canplaythrough.call(this, e);\r\n        }\r\n      }\r\n    }),\r\n    ratechange: html5_event(function() {\r\n    }),\r\n    suspend: html5_event(function(e) {\r\n      var s = this._s;\r\n      html5_events.progress.call(this, e);\r\n      s._onsuspend();\r\n    }),\r\n    stalled: html5_event(function() {\r\n    }),\r\n    timeupdate: html5_event(function() {\r\n      this._s._onTimer();\r\n    }),\r\n    waiting: html5_event(function() {\r\n      var s = this._s;\r\n      s._onbufferchange(1);\r\n    })\r\n  };\r\n  html5OK = function(iO) {\r\n    var result;\r\n    if (!iO || (!iO.type && !iO.url && !iO.serverURL)) {\r\n      result = false;\r\n    } else if (iO.serverURL || (iO.type && preferFlashCheck(iO.type))) {\r\n      result = false;\r\n    } else {\r\n      result = ((iO.type ? html5CanPlay({ type: iO.type }) : html5CanPlay({ url: iO.url }) || sm2.html5Only || iO.url.match(/data:/i)));\r\n    }\r\n    return result;\r\n  };\r\n  html5Unload = function(oAudio) {\r\n    var url;\r\n    if (oAudio) {\r\n      url = (isSafari ? emptyURL : (sm2.html5.canPlayType('audio/wav') ? emptyWAV : emptyURL));\r\n      oAudio.src = url;\r\n      if (oAudio._called_unload !== _undefined) {\r\n        oAudio._called_load = false;\r\n      }\r\n    }\r\n    if (useGlobalHTML5Audio) {\r\n      lastGlobalHTML5URL = null;\r\n    }\r\n    return url;\r\n  };\r\n  html5CanPlay = function(o) {\r\n    if (!sm2.useHTML5Audio || !sm2.hasHTML5) return false;\r\n    var url = (o.url || null),\r\n        mime = (o.type || null),\r\n        aF = sm2.audioFormats,\r\n        result,\r\n        offset,\r\n        fileExt,\r\n        item;\r\n    if (mime && sm2.html5[mime] !== _undefined) return (sm2.html5[mime] && !preferFlashCheck(mime));\r\n    if (!html5Ext) {\r\n      html5Ext = [];\r\n      for (item in aF) {\r\n        if (aF.hasOwnProperty(item)) {\r\n          html5Ext.push(item);\r\n          if (aF[item].related) {\r\n            html5Ext = html5Ext.concat(aF[item].related);\r\n          }\r\n        }\r\n      }\r\n      html5Ext = new RegExp('\\\\.(' + html5Ext.join('|') + ')(\\\\?.*)?$', 'i');\r\n    }\r\n    fileExt = (url ? url.toLowerCase().match(html5Ext) : null);\r\n    if (!fileExt || !fileExt.length) {\r\n      if (!mime) {\r\n        result = false;\r\n      } else {\r\n        offset = mime.indexOf(';');\r\n        fileExt = (offset !== -1 ? mime.substr(0, offset) : mime).substr(6);\r\n      }\r\n    } else {\r\n      fileExt = fileExt[1];\r\n    }\r\n    if (fileExt && sm2.html5[fileExt] !== _undefined) {\r\n      result = (sm2.html5[fileExt] && !preferFlashCheck(fileExt));\r\n    } else {\r\n      mime = 'audio/' + fileExt;\r\n      result = sm2.html5.canPlayType({ type: mime });\r\n      sm2.html5[fileExt] = result;\r\n      result = (result && sm2.html5[mime] && !preferFlashCheck(mime));\r\n    }\r\n    return result;\r\n  };\r\n  testHTML5 = function() {\r\n    if (!sm2.useHTML5Audio || !sm2.hasHTML5) {\r\n      sm2.html5.usingFlash = true;\r\n      needsFlash = true;\r\n      return false;\r\n    }\r\n    var a = (Audio !== _undefined ? (isOpera && opera.version() < 10 ? new Audio(null) : new Audio()) : null),\r\n        item, lookup, support = {}, aF, i;\r\n    function cp(m) {\r\n      var canPlay, j,\r\n          result = false,\r\n          isOK = false;\r\n      if (!a || typeof a.canPlayType !== 'function') return result;\r\n      if (m instanceof Array) {\r\n        for (i = 0, j = m.length; i < j; i++) {\r\n          if (sm2.html5[m[i]] || a.canPlayType(m[i]).match(sm2.html5Test)) {\r\n            isOK = true;\r\n            sm2.html5[m[i]] = true;\r\n            sm2.flash[m[i]] = !!(m[i].match(flashMIME));\r\n          }\r\n        }\r\n        result = isOK;\r\n      } else {\r\n        canPlay = (a && typeof a.canPlayType === 'function' ? a.canPlayType(m) : false);\r\n        result = !!(canPlay && (canPlay.match(sm2.html5Test)));\r\n      }\r\n      return result;\r\n    }\r\n    aF = sm2.audioFormats;\r\n    for (item in aF) {\r\n      if (aF.hasOwnProperty(item)) {\r\n        lookup = 'audio/' + item;\r\n        support[item] = cp(aF[item].type);\r\n        support[lookup] = support[item];\r\n        if (item.match(flashMIME)) {\r\n          sm2.flash[item] = true;\r\n          sm2.flash[lookup] = true;\r\n        } else {\r\n          sm2.flash[item] = false;\r\n          sm2.flash[lookup] = false;\r\n        }\r\n        if (aF[item] && aF[item].related) {\r\n          for (i = aF[item].related.length - 1; i >= 0; i--) {\r\n            support['audio/' + aF[item].related[i]] = support[item];\r\n            sm2.html5[aF[item].related[i]] = support[item];\r\n            sm2.flash[aF[item].related[i]] = support[item];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    support.canPlayType = (a ? cp : null);\r\n    sm2.html5 = mixin(sm2.html5, support);\r\n    sm2.html5.usingFlash = featureCheck();\r\n    needsFlash = sm2.html5.usingFlash;\r\n    return true;\r\n  };\r\n  strings = {\r\n  };\r\n  str = function() {\r\n  };\r\n  loopFix = function(sOpt) {\r\n    if (fV === 8 && sOpt.loops > 1 && sOpt.stream) {\r\n      sOpt.stream = false;\r\n    }\r\n    return sOpt;\r\n  };\r\n  policyFix = function(sOpt, sPre) {\r\n    if (sOpt && !sOpt.usePolicyFile && (sOpt.onid3 || sOpt.usePeakData || sOpt.useWaveformData || sOpt.useEQData)) {\r\n      sOpt.usePolicyFile = true;\r\n    }\r\n    return sOpt;\r\n  };\r\n  complain = function(sMsg) {\r\n  };\r\n  doNothing = function() {\r\n    return false;\r\n  };\r\n  disableObject = function(o) {\r\n    var oProp;\r\n    for (oProp in o) {\r\n      if (o.hasOwnProperty(oProp) && typeof o[oProp] === 'function') {\r\n        o[oProp] = doNothing;\r\n      }\r\n    }\r\n    oProp = null;\r\n  };\r\n  failSafely = function(bNoDisable) {\r\n    if (bNoDisable === _undefined) {\r\n      bNoDisable = false;\r\n    }\r\n    if (disabled || bNoDisable) {\r\n      sm2.disable(bNoDisable);\r\n    }\r\n  };\r\n  normalizeMovieURL = function(movieURL) {\r\n    var urlParams = null, url;\r\n    if (movieURL) {\r\n      if (movieURL.match(/\\.swf(\\?.*)?$/i)) {\r\n        urlParams = movieURL.substr(movieURL.toLowerCase().lastIndexOf('.swf?') + 4);\r\n        if (urlParams) return movieURL;\r\n      } else if (movieURL.lastIndexOf('/') !== movieURL.length - 1) {\r\n        movieURL += '/';\r\n      }\r\n    }\r\n    url = (movieURL && movieURL.lastIndexOf('/') !== -1 ? movieURL.substr(0, movieURL.lastIndexOf('/') + 1) : './') + sm2.movieURL;\r\n    if (sm2.noSWFCache) {\r\n      url += ('?ts=' + new Date().getTime());\r\n    }\r\n    return url;\r\n  };\r\n  setVersionInfo = function() {\r\n    fV = parseInt(sm2.flashVersion, 10);\r\n    if (fV !== 8 && fV !== 9) {\r\n      sm2.flashVersion = fV = defaultFlashVersion;\r\n    }\r\n    var isDebug = (sm2.debugMode || sm2.debugFlash ? '_debug.swf' : '.swf');\r\n    if (sm2.useHTML5Audio && !sm2.html5Only && sm2.audioFormats.mp4.required && fV < 9) {\r\n      sm2.flashVersion = fV = 9;\r\n    }\r\n    sm2.version = sm2.versionNumber + (sm2.html5Only ? ' (HTML5-only mode)' : (fV === 9 ? ' (AS3/Flash 9)' : ' (AS2/Flash 8)'));\r\n    if (fV > 8) {\r\n      sm2.defaultOptions = mixin(sm2.defaultOptions, sm2.flash9Options);\r\n      sm2.features.buffering = true;\r\n      sm2.defaultOptions = mixin(sm2.defaultOptions, sm2.movieStarOptions);\r\n      sm2.filePatterns.flash9 = new RegExp('\\\\.(mp3|' + netStreamTypes.join('|') + ')(\\\\?.*)?$', 'i');\r\n      sm2.features.movieStar = true;\r\n    } else {\r\n      sm2.features.movieStar = false;\r\n    }\r\n    sm2.filePattern = sm2.filePatterns[(fV !== 8 ? 'flash9' : 'flash8')];\r\n    sm2.movieURL = (fV === 8 ? 'soundmanager2.swf' : 'soundmanager2_flash9.swf').replace('.swf', isDebug);\r\n    sm2.features.peakData = sm2.features.waveformData = sm2.features.eqData = (fV > 8);\r\n  };\r\n  setPolling = function(bPolling, bHighPerformance) {\r\n    if (!flash) {\r\n      return;\r\n    }\r\n    flash._setPolling(bPolling, bHighPerformance);\r\n  };\r\n  initDebug = function() {\r\n  };\r\n  idCheck = this.getSoundById;\r\n  getSWFCSS = function() {\r\n    var css = [];\r\n    if (sm2.debugMode) {\r\n      css.push(swfCSS.sm2Debug);\r\n    }\r\n    if (sm2.debugFlash) {\r\n      css.push(swfCSS.flashDebug);\r\n    }\r\n    if (sm2.useHighPerformance) {\r\n      css.push(swfCSS.highPerf);\r\n    }\r\n    return css.join(' ');\r\n  };\r\n  flashBlockHandler = function() {\r\n    var name = str('fbHandler'),\r\n        p = sm2.getMoviePercent(),\r\n        css = swfCSS,\r\n        error = {\r\n          type: 'FLASHBLOCK'\r\n        };\r\n    if (sm2.html5Only) {\r\n      return;\r\n    }\r\n    if (!sm2.ok()) {\r\n      if (needsFlash) {\r\n        sm2.oMC.className = getSWFCSS() + ' ' + css.swfDefault + ' ' + (p === null ? css.swfTimedout : css.swfError);\r\n      }\r\n      sm2.didFlashBlock = true;\r\n      processOnEvents({\r\n        type: 'ontimeout',\r\n        ignoreInit: true,\r\n        error: error\r\n      });\r\n      catchError(error);\r\n    } else {\r\n      if (sm2.oMC) {\r\n        sm2.oMC.className = [getSWFCSS(), css.swfDefault, css.swfLoaded + (sm2.didFlashBlock ? ' ' + css.swfUnblocked : '')].join(' ');\r\n      }\r\n    }\r\n  };\r\n  addOnEvent = function(sType, oMethod, oScope) {\r\n    if (on_queue[sType] === _undefined) {\r\n      on_queue[sType] = [];\r\n    }\r\n    on_queue[sType].push({\r\n      method: oMethod,\r\n      scope: (oScope || null),\r\n      fired: false\r\n    });\r\n  };\r\n  processOnEvents = function(oOptions) {\r\n    if (!oOptions) {\r\n      oOptions = {\r\n        type: (sm2.ok() ? 'onready' : 'ontimeout')\r\n      };\r\n    }\r\n    if (!didInit && oOptions && !oOptions.ignoreInit) return false;\r\n    if (oOptions.type === 'ontimeout' && (sm2.ok() || (disabled && !oOptions.ignoreInit))) return false;\r\n    var status = {\r\n          success: (oOptions && oOptions.ignoreInit ? sm2.ok() : !disabled)\r\n        },\r\n        srcQueue = (oOptions && oOptions.type ? on_queue[oOptions.type] || [] : []),\r\n        queue = [], i, j,\r\n        args = [status],\r\n        canRetry = (needsFlash && !sm2.ok());\r\n    if (oOptions.error) {\r\n      args[0].error = oOptions.error;\r\n    }\r\n    for (i = 0, j = srcQueue.length; i < j; i++) {\r\n      if (srcQueue[i].fired !== true) {\r\n        queue.push(srcQueue[i]);\r\n      }\r\n    }\r\n    if (queue.length) {\r\n      for (i = 0, j = queue.length; i < j; i++) {\r\n        if (queue[i].scope) {\r\n          queue[i].method.apply(queue[i].scope, args);\r\n        } else {\r\n          queue[i].method.apply(this, args);\r\n        }\r\n        if (!canRetry) {\r\n          queue[i].fired = true;\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n  initUserOnload = function() {\r\n    window.setTimeout(function() {\r\n      if (sm2.useFlashBlock) {\r\n        flashBlockHandler();\r\n      }\r\n      processOnEvents();\r\n      if (typeof sm2.onload === 'function') {\r\n        sm2.onload.apply(window);\r\n      }\r\n      if (sm2.waitForWindowLoad) {\r\n        event.add(window, 'load', initUserOnload);\r\n      }\r\n    }, 1);\r\n  };\r\n  detectFlash = function() {\r\n    if (hasFlash !== _undefined) return hasFlash;\r\n    var hasPlugin = false, n = navigator, obj, type, types, AX = window.ActiveXObject;\r\n    var nP;\r\n    try {\r\n      nP = n.plugins;\r\n    } catch(e) {\r\n      nP = undefined;\r\n    }\r\n    if (nP && nP.length) {\r\n      type = 'application/x-shockwave-flash';\r\n      types = n.mimeTypes;\r\n      if (types && types[type] && types[type].enabledPlugin && types[type].enabledPlugin.description) {\r\n        hasPlugin = true;\r\n      }\r\n    } else if (AX !== _undefined && !ua.match(/MSAppHost/i)) {\r\n      try {\r\n        obj = new AX('ShockwaveFlash.ShockwaveFlash');\r\n      } catch(e) {\r\n        obj = null;\r\n      }\r\n      hasPlugin = (!!obj);\r\n      obj = null;\r\n    }\r\n    hasFlash = hasPlugin;\r\n    return hasPlugin;\r\n  };\r\n  featureCheck = function() {\r\n    var flashNeeded,\r\n        item,\r\n        formats = sm2.audioFormats,\r\n        isSpecial = (is_iDevice && !!(ua.match(/os (1|2|3_0|3_1)\\s/i)));\r\n    if (isSpecial) {\r\n      sm2.hasHTML5 = false;\r\n      sm2.html5Only = true;\r\n      if (sm2.oMC) {\r\n        sm2.oMC.style.display = 'none';\r\n      }\r\n    } else if (sm2.useHTML5Audio) {\r\n        if (!sm2.html5 || !sm2.html5.canPlayType) {\r\n          sm2.hasHTML5 = false;\r\n        }\r\n      }\r\n    if (sm2.useHTML5Audio && sm2.hasHTML5) {\r\n      canIgnoreFlash = true;\r\n      for (item in formats) {\r\n        if (formats.hasOwnProperty(item)) {\r\n          if (formats[item].required) {\r\n            if (!sm2.html5.canPlayType(formats[item].type)) {\r\n              canIgnoreFlash = false;\r\n              flashNeeded = true;\r\n            } else if (sm2.preferFlash && (sm2.flash[item] || sm2.flash[formats[item].type])) {\r\n              flashNeeded = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (sm2.ignoreFlash) {\r\n      flashNeeded = false;\r\n      canIgnoreFlash = true;\r\n    }\r\n    sm2.html5Only = (sm2.hasHTML5 && sm2.useHTML5Audio && !flashNeeded);\r\n    return (!sm2.html5Only);\r\n  };\r\n  parseURL = function(url) {\r\n    var i, j, urlResult = 0, result;\r\n    if (url instanceof Array) {\r\n      for (i = 0, j = url.length; i < j; i++) {\r\n        if (url[i] instanceof Object) {\r\n          if (sm2.canPlayMIME(url[i].type)) {\r\n            urlResult = i;\r\n            break;\r\n          }\r\n        } else if (sm2.canPlayURL(url[i])) {\r\n          urlResult = i;\r\n          break;\r\n        }\r\n      }\r\n      if (url[urlResult].url) {\r\n        url[urlResult] = url[urlResult].url;\r\n      }\r\n      result = url[urlResult];\r\n    } else {\r\n      result = url;\r\n    }\r\n    return result;\r\n  };\r\n  startTimer = function(oSound) {\r\n    if (!oSound._hasTimer) {\r\n      oSound._hasTimer = true;\r\n      if (!mobileHTML5 && sm2.html5PollingInterval) {\r\n        if (h5IntervalTimer === null && h5TimerCount === 0) {\r\n          h5IntervalTimer = setInterval(timerExecute, sm2.html5PollingInterval);\r\n        }\r\n        h5TimerCount++;\r\n      }\r\n    }\r\n  };\r\n  stopTimer = function(oSound) {\r\n    if (oSound._hasTimer) {\r\n      oSound._hasTimer = false;\r\n      if (!mobileHTML5 && sm2.html5PollingInterval) {\r\n        h5TimerCount--;\r\n      }\r\n    }\r\n  };\r\n  timerExecute = function() {\r\n    var i;\r\n    if (h5IntervalTimer !== null && !h5TimerCount) {\r\n      clearInterval(h5IntervalTimer);\r\n      h5IntervalTimer = null;\r\n      return;\r\n    }\r\n    for (i = sm2.soundIDs.length - 1; i >= 0; i--) {\r\n      if (sm2.sounds[sm2.soundIDs[i]].isHTML5 && sm2.sounds[sm2.soundIDs[i]]._hasTimer) {\r\n        sm2.sounds[sm2.soundIDs[i]]._onTimer();\r\n      }\r\n    }\r\n  };\r\n  catchError = function(options) {\r\n    options = (options !== _undefined ? options : {});\r\n    if (typeof sm2.onerror === 'function') {\r\n      sm2.onerror.apply(window, [{\r\n        type: (options.type !== _undefined ? options.type : null)\r\n      }]);\r\n    }\r\n    if (options.fatal !== _undefined && options.fatal) {\r\n      sm2.disable();\r\n    }\r\n  };\r\n  badSafariFix = function() {\r\n    if (!isBadSafari || !detectFlash()) {\r\n      return;\r\n    }\r\n    var aF = sm2.audioFormats, i, item;\r\n    for (item in aF) {\r\n      if (aF.hasOwnProperty(item)) {\r\n        if (item === 'mp3' || item === 'mp4') {\r\n          sm2.html5[item] = false;\r\n          if (aF[item] && aF[item].related) {\r\n            for (i = aF[item].related.length - 1; i >= 0; i--) {\r\n              sm2.html5[aF[item].related[i]] = false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n  this._setSandboxType = function(sandboxType) {\r\n  };\r\n  this._externalInterfaceOK = function(swfVersion) {\r\n    if (sm2.swfLoaded) {\r\n      return;\r\n    }\r\n    var e;\r\n    sm2.swfLoaded = true;\r\n    tryInitOnFocus = false;\r\n    if (isBadSafari) {\r\n      badSafariFix();\r\n    }\r\n    setTimeout(init, isIE ? 100 : 1);\r\n  };\r\n  createMovie = function(movieID, movieURL) {\r\n    if (didAppend && appendSuccess) return false;\r\n    function initMsg() {\r\n    }\r\n    if (sm2.html5Only) {\r\n      setVersionInfo();\r\n      initMsg();\r\n      sm2.oMC = id(sm2.movieID);\r\n      init();\r\n      didAppend = true;\r\n      appendSuccess = true;\r\n      return false;\r\n    }\r\n    var remoteURL = (movieURL || sm2.url),\r\n    localURL = (sm2.altURL || remoteURL),\r\n    swfTitle = 'JS/Flash audio component (SoundManager 2)',\r\n    oTarget = getDocument(),\r\n    extraClass = getSWFCSS(),\r\n    isRTL = null,\r\n    html = doc.getElementsByTagName('html')[0],\r\n    oEmbed, oMovie, tmp, movieHTML, oEl, s, x, sClass;\r\n    isRTL = (html && html.dir && html.dir.match(/rtl/i));\r\n    movieID = (movieID === _undefined ? sm2.id : movieID);\r\n    function param(name, value) {\r\n      return '<param name=\"' + name + '\" value=\"' + value + '\" />';\r\n    }\r\n    setVersionInfo();\r\n    sm2.url = normalizeMovieURL(overHTTP ? remoteURL : localURL);\r\n    movieURL = sm2.url;\r\n    sm2.wmode = (!sm2.wmode && sm2.useHighPerformance ? 'transparent' : sm2.wmode);\r\n    if (sm2.wmode !== null && (ua.match(/msie 8/i) || (!isIE && !sm2.useHighPerformance)) && navigator.platform.match(/win32|win64/i)) {\r\n      messages.push(strings.spcWmode);\r\n      sm2.wmode = null;\r\n    }\r\n    oEmbed = {\r\n      name: movieID,\r\n      id: movieID,\r\n      src: movieURL,\r\n      quality: 'high',\r\n      allowScriptAccess: sm2.allowScriptAccess,\r\n      bgcolor: sm2.bgColor,\r\n      pluginspage: http + 'www.macromedia.com/go/getflashplayer',\r\n      title: swfTitle,\r\n      type: 'application/x-shockwave-flash',\r\n      wmode: sm2.wmode,\r\n      hasPriority: 'true'\r\n    };\r\n    if (sm2.debugFlash) {\r\n      oEmbed.FlashVars = 'debug=1';\r\n    }\r\n    if (!sm2.wmode) {\r\n      delete oEmbed.wmode;\r\n    }\r\n    if (isIE) {\r\n      oMovie = doc.createElement('div');\r\n      movieHTML = [\r\n        '<object id=\"' + movieID + '\" data=\"' + movieURL + '\" type=\"' + oEmbed.type + '\" title=\"' + oEmbed.title + '\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\">',\r\n        param('movie', movieURL),\r\n        param('AllowScriptAccess', sm2.allowScriptAccess),\r\n        param('quality', oEmbed.quality),\r\n        (sm2.wmode ? param('wmode', sm2.wmode) : ''),\r\n        param('bgcolor', sm2.bgColor),\r\n        param('hasPriority', 'true'),\r\n        (sm2.debugFlash ? param('FlashVars', oEmbed.FlashVars) : ''),\r\n        '</object>'\r\n      ].join('');\r\n    } else {\r\n      oMovie = doc.createElement('embed');\r\n      for (tmp in oEmbed) {\r\n        if (oEmbed.hasOwnProperty(tmp)) {\r\n          oMovie.setAttribute(tmp, oEmbed[tmp]);\r\n        }\r\n      }\r\n    }\r\n    initDebug();\r\n    extraClass = getSWFCSS();\r\n    oTarget = getDocument();\r\n    if (oTarget) {\r\n      sm2.oMC = (id(sm2.movieID) || doc.createElement('div'));\r\n      if (!sm2.oMC.id) {\r\n        sm2.oMC.id = sm2.movieID;\r\n        sm2.oMC.className = swfCSS.swfDefault + ' ' + extraClass;\r\n        s = null;\r\n        oEl = null;\r\n        if (!sm2.useFlashBlock) {\r\n          if (sm2.useHighPerformance) {\r\n            s = {\r\n              position: 'fixed',\r\n              width: '8px',\r\n              height: '8px',\r\n              bottom: '0px',\r\n              left: '0px',\r\n              overflow: 'hidden'\r\n            };\r\n          } else {\r\n            s = {\r\n              position: 'absolute',\r\n              width: '6px',\r\n              height: '6px',\r\n              top: '-9999px',\r\n              left: '-9999px'\r\n            };\r\n            if (isRTL) {\r\n              s.left = Math.abs(parseInt(s.left, 10)) + 'px';\r\n            }\r\n          }\r\n        }\r\n        if (isWebkit) {\r\n          sm2.oMC.style.zIndex = 10000;\r\n        }\r\n        if (!sm2.debugFlash) {\r\n          for (x in s) {\r\n            if (s.hasOwnProperty(x)) {\r\n              sm2.oMC.style[x] = s[x];\r\n            }\r\n          }\r\n        }\r\n        try {\r\n          if (!isIE) {\r\n            sm2.oMC.appendChild(oMovie);\r\n          }\r\n          oTarget.appendChild(sm2.oMC);\r\n          if (isIE) {\r\n            oEl = sm2.oMC.appendChild(doc.createElement('div'));\r\n            oEl.className = swfCSS.swfBox;\r\n            oEl.innerHTML = movieHTML;\r\n          }\r\n          appendSuccess = true;\r\n        } catch(e) {\r\n          throw new Error(str('domError') + ' \\n' + e.toString());\r\n        }\r\n      } else {\r\n        sClass = sm2.oMC.className;\r\n        sm2.oMC.className = (sClass ? sClass + ' ' : swfCSS.swfDefault) + (extraClass ? ' ' + extraClass : '');\r\n        sm2.oMC.appendChild(oMovie);\r\n        if (isIE) {\r\n          oEl = sm2.oMC.appendChild(doc.createElement('div'));\r\n          oEl.className = swfCSS.swfBox;\r\n          oEl.innerHTML = movieHTML;\r\n        }\r\n        appendSuccess = true;\r\n      }\r\n    }\r\n    didAppend = true;\r\n    initMsg();\r\n    return true;\r\n  };\r\n  initMovie = function() {\r\n    if (sm2.html5Only) {\r\n      createMovie();\r\n      return false;\r\n    }\r\n    if (flash) return false;\r\n    if (!sm2.url) {\r\n       return false;\r\n    }\r\n    flash = sm2.getMovie(sm2.id);\r\n    if (!flash) {\r\n      if (!oRemoved) {\r\n        createMovie(sm2.id, sm2.url);\r\n      } else {\r\n        if (!isIE) {\r\n          sm2.oMC.appendChild(oRemoved);\r\n        } else {\r\n          sm2.oMC.innerHTML = oRemovedHTML;\r\n        }\r\n        oRemoved = null;\r\n        didAppend = true;\r\n      }\r\n      flash = sm2.getMovie(sm2.id);\r\n    }\r\n    if (typeof sm2.oninitmovie === 'function') {\r\n      setTimeout(sm2.oninitmovie, 1);\r\n    }\r\n    return true;\r\n  };\r\n  delayWaitForEI = function() {\r\n    setTimeout(waitForEI, 1000);\r\n  };\r\n  rebootIntoHTML5 = function() {\r\n    window.setTimeout(function() {\r\n      sm2.setup({\r\n        preferFlash: false\r\n      }).reboot();\r\n      sm2.didFlashBlock = true;\r\n      sm2.beginDelayedInit();\r\n    }, 1);\r\n  };\r\n  waitForEI = function() {\r\n    var p,\r\n        loadIncomplete = false;\r\n    if (!sm2.url) {\r\n      return;\r\n    }\r\n    if (waitingForEI) {\r\n      return;\r\n    }\r\n    waitingForEI = true;\r\n    event.remove(window, 'load', delayWaitForEI);\r\n    if (hasFlash && tryInitOnFocus && !isFocused) {\r\n      return;\r\n    }\r\n    if (!didInit) {\r\n      p = sm2.getMoviePercent();\r\n      if (p > 0 && p < 100) {\r\n        loadIncomplete = true;\r\n      }\r\n    }\r\n    setTimeout(function() {\r\n      p = sm2.getMoviePercent();\r\n      if (loadIncomplete) {\r\n        waitingForEI = false;\r\n        window.setTimeout(delayWaitForEI, 1);\r\n        return;\r\n      }\r\n      if (!didInit && okToDisable) {\r\n        if (p === null) {\r\n          if (sm2.useFlashBlock || sm2.flashLoadTimeout === 0) {\r\n            if (sm2.useFlashBlock) {\r\n              flashBlockHandler();\r\n            }\r\n          } else if (!sm2.useFlashBlock && canIgnoreFlash) {\r\n            rebootIntoHTML5();\r\n          } else {\r\n            processOnEvents({\r\n              type: 'ontimeout',\r\n              ignoreInit: true,\r\n              error: {\r\n                type: 'INIT_FLASHBLOCK'\r\n              }\r\n            });\r\n          }\r\n        } else if (sm2.flashLoadTimeout === 0) {\r\n        } else if (!sm2.useFlashBlock && canIgnoreFlash) {\r\n          rebootIntoHTML5();\r\n        } else {\r\n          failSafely(true);\r\n        }\r\n      }\r\n    }, sm2.flashLoadTimeout);\r\n  };\r\n  handleFocus = function() {\r\n    function cleanup() {\r\n      event.remove(window, 'focus', handleFocus);\r\n    }\r\n    if (isFocused || !tryInitOnFocus) {\r\n      cleanup();\r\n      return true;\r\n    }\r\n    okToDisable = true;\r\n    isFocused = true;\r\n    waitingForEI = false;\r\n    delayWaitForEI();\r\n    cleanup();\r\n    return true;\r\n  };\r\n  flushMessages = function() {\r\n  };\r\n  showSupport = function() {\r\n  };\r\n  initComplete = function(bNoDisable) {\r\n    if (didInit) return false;\r\n    if (sm2.html5Only) {\r\n      didInit = true;\r\n      initUserOnload();\r\n      return true;\r\n    }\r\n    var wasTimeout = (sm2.useFlashBlock && sm2.flashLoadTimeout && !sm2.getMoviePercent()),\r\n        result = true,\r\n        error;\r\n    if (!wasTimeout) {\r\n      didInit = true;\r\n    }\r\n    error = {\r\n      type: (!hasFlash && needsFlash ? 'NO_FLASH' : 'INIT_TIMEOUT')\r\n    };\r\n    if (disabled || bNoDisable) {\r\n      if (sm2.useFlashBlock && sm2.oMC) {\r\n        sm2.oMC.className = getSWFCSS() + ' ' + (sm2.getMoviePercent() === null ? swfCSS.swfTimedout : swfCSS.swfError);\r\n      }\r\n      processOnEvents({\r\n        type: 'ontimeout',\r\n        error: error,\r\n        ignoreInit: true\r\n      });\r\n      catchError(error);\r\n      result = false;\r\n    } else {\r\n    }\r\n    if (!disabled) {\r\n      if (sm2.waitForWindowLoad && !windowLoaded) {\r\n        event.add(window, 'load', initUserOnload);\r\n      } else {\r\n        initUserOnload();\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n  setProperties = function() {\r\n    var i,\r\n        o = sm2.setupOptions;\r\n    for (i in o) {\r\n      if (o.hasOwnProperty(i)) {\r\n        if (sm2[i] === _undefined) {\r\n          sm2[i] = o[i];\r\n        } else if (sm2[i] !== o[i]) {\r\n          sm2.setupOptions[i] = sm2[i];\r\n        }\r\n      }\r\n    }\r\n  };\r\n  init = function() {\r\n    if (didInit) {\r\n      return false;\r\n    }\r\n    function cleanup() {\r\n      event.remove(window, 'load', sm2.beginDelayedInit);\r\n    }\r\n    if (sm2.html5Only) {\r\n      if (!didInit) {\r\n        cleanup();\r\n        sm2.enabled = true;\r\n        initComplete();\r\n      }\r\n      return true;\r\n    }\r\n    initMovie();\r\n    try {\r\n      flash._externalInterfaceTest(false);\r\n      setPolling(true, (sm2.flashPollingInterval || (sm2.useHighPerformance ? 10 : 50)));\r\n      if (!sm2.debugMode) {\r\n        flash._disableDebug();\r\n      }\r\n      sm2.enabled = true;\r\n      if (!sm2.html5Only) {\r\n        event.add(window, 'unload', doNothing);\r\n      }\r\n    } catch(e) {\r\n      catchError({\r\n        type: 'JS_TO_FLASH_EXCEPTION',\r\n        fatal: true\r\n      });\r\n      failSafely(true);\r\n      initComplete();\r\n      return false;\r\n    }\r\n    initComplete();\r\n    cleanup();\r\n    return true;\r\n  };\r\n  domContentLoaded = function() {\r\n    if (didDCLoaded) return false;\r\n    didDCLoaded = true;\r\n    setProperties();\r\n    initDebug();\r\n    if (!hasFlash && sm2.hasHTML5) {\r\n      sm2.setup({\r\n        useHTML5Audio: true,\r\n        preferFlash: false\r\n      });\r\n    }\r\n    testHTML5();\r\n    if (!hasFlash && needsFlash) {\r\n      messages.push(strings.needFlash);\r\n      sm2.setup({\r\n        flashLoadTimeout: 1\r\n      });\r\n    }\r\n    if (doc.removeEventListener) {\r\n      doc.removeEventListener('DOMContentLoaded', domContentLoaded, false);\r\n    }\r\n    initMovie();\r\n    return true;\r\n  };\r\n  domContentLoadedIE = function() {\r\n    if (doc.readyState === 'complete') {\r\n      domContentLoaded();\r\n      doc.detachEvent('onreadystatechange', domContentLoadedIE);\r\n    }\r\n    return true;\r\n  };\r\n  winOnLoad = function() {\r\n    windowLoaded = true;\r\n    domContentLoaded();\r\n    event.remove(window, 'load', winOnLoad);\r\n  };\r\n  detectFlash();\r\n  event.add(window, 'focus', handleFocus);\r\n  event.add(window, 'load', delayWaitForEI);\r\n  event.add(window, 'load', winOnLoad);\r\n  if (doc.addEventListener) {\r\n    doc.addEventListener('DOMContentLoaded', domContentLoaded, false);\r\n  } else if (doc.attachEvent) {\r\n    doc.attachEvent('onreadystatechange', domContentLoadedIE);\r\n  } else {\r\n    catchError({\r\n      type: 'NO_DOM2_EVENTS',\r\n      fatal: true\r\n    });\r\n  }\r\n}\r\n// SM2_DEFER details: http://www.schillmania.com/projects/soundmanager2/doc/getstarted/#lazy-loading\r\nif (window.SM2_DEFER === _undefined || !SM2_DEFER) {\r\n  soundManager = new SoundManager();\r\n}\r\nif (typeof module === 'object' && module && typeof module.exports === 'object') {\r\n  module.exports.SoundManager = SoundManager;\r\n  module.exports.soundManager = soundManager;\r\n} else if (typeof define === 'function' && define.amd) {\r\n  define(function() {\r\n    function getInstance(smBuilder) {\r\n      if (!window.soundManager && smBuilder instanceof Function) {\r\n        var instance = smBuilder(SoundManager);\r\n        if (instance instanceof SoundManager) {\r\n          window.soundManager = instance;\r\n        }\r\n      }\r\n      return window.soundManager;\r\n    }\r\n    return {\r\n      constructor: SoundManager,\r\n      getInstance: getInstance\r\n    };\r\n  });\r\n}\r\n// standard browser case\r\n// constructor\r\nwindow.SoundManager = SoundManager;\r\n// public API, flash callbacks etc.\r\nwindow.soundManager = soundManager;\r\n}(window));\r\n"]},"metadata":{},"sourceType":"script"}